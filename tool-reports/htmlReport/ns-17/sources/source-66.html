


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > Mech</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.common</a>
</div>

<h1>Coverage Summary for Class: Mech (megamek.common)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Mech</td>
<td class="coverageStat">
  <span class="percent">
    19,9%
  </span>
  <span class="absValue">
    (60/301)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    12,6%
  </span>
  <span class="absValue">
    (578/4592)
  </span>
</td>
</tr>
  <tr>
    <td class="name">Mech$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">Mech$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$00cqLK4R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$05rDZ670</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0DkE6byg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0ereJhAE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0ftN86h2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0IH7ji8X</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0ji0K7GJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0JKNvfNg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0jNEy3wi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0JUNN5E5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0KrmWnr4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0mMfrkuC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0OEAZw0n</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0OkFlTxn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0ommcTxF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0SgvomgW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0sJUpvMd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0wRD09oJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0YL9xUhb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0zLLrDOz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$0zRnSntE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$16fzLBUN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$179998Os</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$17TGF3bK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1azsOj8m</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1CbKiNTY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1G0Yd0Dt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1HMcxivf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1JoXOb3A</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1LcIYvva</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1ML62x0p</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1oc4Q80q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1Oi2QPiu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1qoPbc6Y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1r3E5IUS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1raHGo2E</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1ShSlxOW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1T4LRVDB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1T9rVoj6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1u4heDgz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1vQOKW5w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1yLodTUG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$1ziG3dzL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$24pknX7R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$258JTbt1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$26WqtrSv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2AAxfE2t</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2AozxV68</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2Ar2SZsh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2bAAxHGF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2CFLQwjR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2ERR35EW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2FibLbEo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2Gcyj5FK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2JCrYBhI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2kk6wmgI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2lBLKLqB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$2LFfb6ts</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$317bTFnT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$35f92jm6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$35ponkXT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$39IUwMdd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3cSX4VjF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3fECdVlE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3gUlrUv8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3mY2sojg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3R6lGXZ1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3rDrGzps</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3rR8jhjd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3SQJlKAe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3uvWhHuz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3xY8DGyc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3YYs2L4w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$3Z0ebWAv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$45pxFkuR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$45WsmZX3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$48BisMBh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4aHGVDDM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4d0oheYf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4ealEgPq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4hgJiEYg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4iFVe1QL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4JaclSlf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4kxw9sJr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4LDlz2uc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4MPCel9O</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4o9lDgZF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4omqcdnB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4PEuXFCb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4Twqaw3U</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4U2A6w1Q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4u4LTnB5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4XV5INex</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4Xw5bE8e</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4yN9qJs9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4YQDisrl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4YwtvjLz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$4zPawvub</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$53cvj3Mo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$56nwcolD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5B1N8zxv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5H8GjE4o</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5HpfkvET</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5iF0baHh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5LdLZ57F</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5m7GYyNm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5mIjUjMT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5NRce83U</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5pHEl1cT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5pPjU7z9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5pZZUiAB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5QvyJMvP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5tbtagk4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5TjNbHhT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5vJYvrit</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5XvBCitC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$5XxbfQVC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$612yyq5r</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$63bx6w4V</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$65IsfNCa</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$65NyXco9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$65teiSeM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$68BArEt3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$68Yhm0Fy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6bz4QfjI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6gj1XikN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6Jv4oHEI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6krSVRei</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6NT5x3eU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6nwIwTVa</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6p0s3Dzu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6pPSBEfy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6rCIO9HG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6snqq3e8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6uFQwhGx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6VXOjx8t</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6WsgGtnC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6X7k4iG9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6yVU0Agn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$6yyWhxPS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$75UzsQiG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$78PElHuA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7bsnA9F2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7DEZW1dK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7fDmMX5v</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7FOsROK5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7fvzMR4Q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7HA9j6mU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7iO1Fx6w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7j3LNNY9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7KrsHO65</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7LwcwBhC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7mY3pW2V</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7n5EaktT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7OV44Ej6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7Q6CtxpA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7ShEkpqc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7wafVvoR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$7wm661HL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$805JrJbr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$81TQ9fVc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$82nygsrL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$87wegw86</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8C8Bvdmc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8HxbV5uG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8jK5fddU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8kJBNnQr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8NurJwHP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8oImuR82</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8PMd7odx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8QfcAZag</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8QjCWSF5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8QJiyB6t</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8tzYn2nN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8uAb7IKU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8w2x9dmn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8wcc8qDm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8Y6klFJJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8yoou8GZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8yV6lppc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$8YZIASUG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$977na62v</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9b7qbwW7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9chHMMwN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9e1QtnPq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9F9OQ2Dk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9G9lDKbW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9IIdAtcV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9jwnEwgy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9kJzvjd0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9kyOTtrJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9nSphxqN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9uyRcKmC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9w646Nb5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9XCVURri</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$9xkAR6PD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$A0ZRApvU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$a173XpVt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$A19f6rUx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$a1xyDt9V</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$a2Ts23pY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$a3RW3au7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$a4BeDIbX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aANfErX4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$abPzmheC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AcAiHETm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AcmKOQaP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aCV6x2vH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ad4QPgfB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$adDGNHw6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ADDNJmjA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$adQWFTlj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$adYF6RHM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AEJ4796x</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Af56eA7D</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Aff4KO77</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AfnmDT8v</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aFYLIB8n</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AgaS1IK7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AjDp73Gp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ajNEOLgR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aKu900Hq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aNG8CmNy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AnLMw6bC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AOozi7kT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$APaGjxkD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$APqlrJnD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aR7NGMof</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$arlveS7k</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aSOSOGRC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aTDBH9Gx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AtMundHD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aUUhtcT6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$aVAle8Cc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AwoJuzwq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ax87fUc4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AYohJv0P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AZgQ8QKN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$AZVbr14M</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$B0K7npDy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$b1fFdnun</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$b2pnpsUE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$b3IbZYGX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$b4isNJfn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$B5GaGXZv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$B7g1Dk8i</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$badbgpYk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BB1K2ldU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BbHmtLIb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bBhrrJyP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BboAOck4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bCPuuO3z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BcXvGgLK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bddm5h0J</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BdunqZtA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BFORYHwA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BfskrB0L</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BGMdpjp3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bgWtwcYH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bjpeygIO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bKqddt7X</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bKTLxzet</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BkWCkHhr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bl96keUJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bLAiFZSP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BlG8JPGW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BlvZA8Ub</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bM1xiPLo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bo5w5KSn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bOknDZVw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bopjymII</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bOqXka9y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bPp2WrHJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BqERYqoB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bqFCBL4P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bRDWq6ji</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BrHelbMj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$brlfYxUw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bRzWwTjm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bSS2E5Wf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BtePrpQH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BtJnXPZE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$bwb1kgQg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BxnP9c8K</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BYUMbFj9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BYXmm529</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$BZLwfXLv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$C0eWN7CN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$C0Uhw79V</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$c4UWthEb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$C5ttwKl4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$C7qYVLTC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$c8gERsYB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$c8mfrsn4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cA5c192h</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CawTalPH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CB9oHaIf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CBAQ7DAu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cBJ5eN7O</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cBZi533r</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Cc1v7zyb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CcYcBFLZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cCZlC3Vv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cDissglk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CDqL71Fz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cebiJSc9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cEugwOu6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CHYMz4PW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cI8WQZAv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CI9QTcL2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ciGsne2Y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ciKXHUMY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cjul8Zym</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$clCbaauV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CnyXQMXw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$co5wEuIt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Congdics</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cpPl3zsI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cPQSp3rx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CR5QEpks</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$crMG8O0l</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CSFzFBV7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CspB5U4Y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CssGYx7J</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CTEVH5aL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CU4oKKkn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CubuIuw2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cUXjGxgn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CUyjmX4w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cVsUnq4P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cvVdr1oo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$cXSqxuhj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$CZYdLJ8G</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$D1f4EsgE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$D2aKSobN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$D3AR7McQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$D3XzlSKk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$d5sA7Fth</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$d5UlucHk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DA3OJgIz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dAmUa30C</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dAtT5XiP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DAu9LHIn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DbmrSY7a</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DbN0rLdO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dCeFaVDr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DCg360yN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DCOhAkmJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dcWH11vm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dD2Xtvzs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dDRkkLH0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DDTXdfxO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DEk2nllp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DeKb2Rpl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dgre4Dxo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dH15rsIO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DHR6xUhn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DHs6Rhlf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DINWqb9Y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$diZpNtNP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dJBP2dgr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DkaVQWJO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dl2a9dYp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DlSwwY1I</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dM8dLFaV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Dn8DWdWX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dnJVq0kZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DNQ4Bv16</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DO2ElF6I</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dOBZ0oak</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dOHSiRtc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dozPsfLO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DpzEWZEU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DQRt0lju</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DqtjhcvK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dQuyheeK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$drEnidJN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Drk39WHx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dRprJhX1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DsNcMCxs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DSsKtvtu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$DT0dLhJ3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$duy9NITN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dVNgpzMb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dvXLL8Lz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dyp7xzQl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$dZkktWgz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$E19vEuiW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$e2eB62yB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$E3mtcLG4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$e3pjk8he</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$E5Z3nLw6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$e74ksp7e</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$E8ewaavq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$E9p9pq14</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EACDffUT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EaNUlkmG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eaRLO0Mz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eC8s6iam</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ed4xc1kl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ediAf9Rp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$edvx2KJC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$efYg7Jmt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$egt67L2b</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eHmPy4v4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EHUPG4RF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EKrxPbs5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EKwWSIse</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EL8sHO7E</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$elOaBc1P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$emmQid8t</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$emXlyXLH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EnavKhMw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eNbgCRdp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eOFWW6Q7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eOzRxHN2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$epAbEYcd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EpFIsfQY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EqVSiDd4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$esGtesTV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$esh77cs6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ESKxT2mk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ETjcMcQr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ETjVKyn9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$evmGrfyF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EvWI1cxn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ewiJaUO9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EWpBExpT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$EX6Tb2uo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$eZOz769u</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$f00xImmS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$f2dZAB8e</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$f5kDmubf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$f70iLPvV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$F7VZiuZp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$f8R88P9K</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$f9660U25</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$falgzDin</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fAUnPl4K</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fbbI5Tcp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FC435fZh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FDSDiYRN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fdUsTX1k</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ffxWd284</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fg7wPjjR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FH4SnTOP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fIVNyX9m</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fj20LTUk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fj9uSQOe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fjdYPDwx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FJjLNfkQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fkcwGwQR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fNkbjmnZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FNkP5G1S</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FOQrm3pY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FOX38q74</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fPiwCWyr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FpSl2iyl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FPuqEs2e</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fshybyMd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FSM4iXO3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fswqph1u</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fTloJrJS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FtMZpvsd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FvZj2Gz5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FW7WZqUW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fwCe8abt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fWQ0E0wp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fWxxpN01</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FXXtnhQ7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$FyD08bsh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Fyjjsm12</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fySLxTBT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$fZaFen17</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G06zNSQE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G0JyrVss</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G33AOCFd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G4xyDYbF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$g6yAz98W</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$g7WjI5Lv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G7zvOQKu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$g819qQ7H</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G81W83U3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$G8bFL2qM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gBay0TM4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GC8hj9nd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Gcg58w13</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GChnB1tg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Gcvf1VIu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gCWGi7Gx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gDujcujk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gE68fD8O</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gegWPfXU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GF4SP7uY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ghC1KxXA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$glCIzj2g</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gLgP3UF3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GmRWTtxs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$goQ0owtq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GoT73f2x</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gQI6ge0F</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$grjMFpGO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GsGdWX1j</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gUbdsK82</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gumvtnGH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gWjPkWyW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gwRvT9KS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$gXaeBSCG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GY0Uj7Jy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GzF3eTfe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GzMDYge2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$GZzhrm06</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$H0v0W2Qh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$H1rGabbc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$h2O5jDqi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$H2WMqJLV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$H3lKcfKm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$h7qKln4E</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$h86eGzk4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$haSChw1I</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HaYZpqgA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Hc4kHIi7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hCfCVYlN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HeLr8RWX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hFrR9CmU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HgD5s3f5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hGKymB9q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HHjPqxhl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hHRxaX4N</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HI7N62Kk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hJHkNd2m</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HjK0zy97</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HkwfJ13N</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HNatkXmE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hnzqjDkU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hO1K4XuC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Hoa9jfDm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hoJ7bSbJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hoUx4VMk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hPRrk0GU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hRBvK9AQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Hs24RcjH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hs4aipwR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HSO0An9Q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hSYdTFtn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HVURUipI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HvW0VkA2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$hX9SKaCm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HY9oGDva</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HYL2gves</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$HyspmKom</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$i4Nmk6IQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$I6Ikc5DX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IBAomMdY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IBJNSjFp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IBRGNOWt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IBRs3oer</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ICddMOlu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ichEuJI1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iFgzYPcH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ifoMcg0m</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ihjPgmAB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IhlgUX5L</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iHpQyyEs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ijVAzpPV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IJYSIbm8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ik3vRJ1m</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ikh5QTGB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ImFJ8Q2W</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iMhbDhSL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$imyDguKN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iNinudrn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$INk7zlri</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$io8SmaBz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IoRVxrgn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ipTAY2km</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Iqa5ju6q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IsBKPcSx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IsedcDJF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iSj5ttwg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iso7arm6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iUHoWM96</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IVCPVMRy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iWHxZTVt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IWw7GISp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IxGOionF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ixKJ5sRF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$iyINZqPZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$IyQjJnLc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$izwOLkHQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$J23kNuhJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$J2iu1JL1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$J5WkIqjC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$j5zdmEV3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$J70LQmGX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$j76TB9ux</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$J83H0WK3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JAWdMjmr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jBXfGIrN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Jc4ZMMQA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JcbogeqJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JCOdt6CP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JDUp9On8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jeRRHIxR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jffmXBjy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jGsXgUVN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jiTVWjAk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jj8ZU1im</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jkxWL98D</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jMhrrLee</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JNN7BwtL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JNpZNV9H</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jnWftYWV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JO8N8GU1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jPHjSGlI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JpwO9bwR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Jqh1MMSI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jQzVAHkT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Js4CXXwT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$JuBr8iDT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jVxLxmeC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$jyUJ2Fn6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$k0woKO8F</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$K2i41HwV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$K3f8DcGL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$k3fhzx6i</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$k3YpVHqT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$K598WH3d</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$k72NHaly</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kBCiHlWU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KBPto6BT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KcmGG3d9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KFawyPt9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KffnKWcU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kFOuIIlh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Kg9HjbEr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$khDCHjlZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$khHHkqMh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kjJTbJsA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kKCRvHuD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kOQwe6LM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kQYjIusB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$krn7FSvH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$kT1OBKT1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KuL4wQEw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KvNdwMAa</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KVwlH0cp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KwkMvOzN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KWsxzwSE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$KYva81uY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$l0JfuD0j</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$L19Ziwi9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$L4eK2l8h</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$l4LZnHcG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$L8X6WsM5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$l9jNlaTp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$la5k9XCu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lbBSaBzw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Lc9ChIm3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LCJ89WLQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ldB71p9R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LdU5LNur</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LFlaPagP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LGByzcQs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LHoQ8jrw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LiVQF8QH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lIwzoDEY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lJMijLCT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ljP3cflu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ll5ujkU1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LMluYbdo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ln9xIJML</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lNXJjA9I</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Lofq5rlO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lOXfukEm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LpaR0cmn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LpbJ8c6N</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LRp38H9C</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lRWs0Lo8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lT3I7vMr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lvcKldsX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lVilgqVb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lwkmNw5s</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lX0UHVsy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LXIyMC7z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LY1EYtyZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$LY3EJxgc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lZc9CgBS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$lZTvRQb8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$M0SHxNHs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$m10YShA6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$M1rgKQL1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$m2iDSqpV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$M4jPmpve</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$M6mwpqYM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$M6X5m3L8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$M7BWtl3v</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$m9R6I2xk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MA57udEp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mAEl9X73</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MBJjm0Tm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MBKQPN1a</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MBstlp26</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mCOAWxf2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MCudnzBF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$md7YD8IK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mecOqPKT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Mei0JdBp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MeSP3wNg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MF0scOjM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mfbyfPXA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mFgAQe7w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MFX6hCIA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MFylp780</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mfZjEPGO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MgnUM8Ly</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mh0go5EN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MH3uXlux</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mhCasyQb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mhubX5bA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MidI99KX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mk0jkgdk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mKkeUbJe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mkWSYEO8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mm8iuBMI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Mm9yYiGx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MmCPoAKC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Mnaiul4C</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MnCOJKLK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MnVasWb4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MqoGWxcZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$msf95al6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Mt0xZkXh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Mt3ukgAY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$MTkHYFsO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mY5BAMXz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mYiBvaBD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$mzq5xbKI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$n0c0kWfq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$N0tR9Yub</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NaTNSBy3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NaxESKvi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nbOMyz39</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Nc0vaMAG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Nf324lzi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nFK1Lla3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NFRCdALN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nfTUEHwl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ng8sxKjx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NGQDCUSz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ngr97t4K</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ngy7x4C5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nHAod3nu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nHdgUq6P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$njSkXzQN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nK6GNvas</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NKodbzFi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nksLxiuf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NMjf90PE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NN1NRWIj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Nn43hGMe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nnZogLIt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nOADs6e9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NOmjVs69</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nPLbqd7G</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nPrPq5bx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NqAOW0JI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nQD8wun5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NqhYhWqn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nqz4Zcw4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nR1c6k4h</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NRm8oe2I</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NrplREIP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NRtyW5Nz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NscCJxAn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nso9UmEz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NT8KE62x</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NWxpeR4J</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$nWxX1OXW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$NxNhM4bz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$O1tEmyBo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$o62nzovX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$O67SFqYg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$O69sk5Gy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$o7yyg64h</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$o9EYXPUN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OAgjlkzH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OAxwx3A5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ObFB16aI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$odt0lWCU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Oe2aSf64</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oEYMroZy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ofBHxoSx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oGaJ0rSo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OgMXz0ON</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OGyn6Im4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OhhijFzd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ohuz1ALS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OI575kXV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oiaNQLyo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oiB6vLLl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Oixl5r29</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OknchAbT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OKQEWGD8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OLhacHem</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OMA9AC1S</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$on6Yctz1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oNic1p9n</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$onrwU5Dr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OnW0bB4w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oOxBScAo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OpaUYvak</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Oq6WSzht</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oqjzq7kn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Oqvuk2oA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ORKxRP44</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$orX9DHqA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oSWcZJAF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ouMQhLb8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oVUYeti8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OYpUheIT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$OysJFxm5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$oyxMQacB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$p0YhDRxe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$p1G4efMy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$P2gxrA3J</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$p4sVNfTm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$p53RJeX4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$P5C5c0Xh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$p5zj9KL9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$P6NtTkn2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$P7PNj9kf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$p7syryxp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pa584Sqr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PAVXMVUp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$paWUxJhd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Pb4Q5Vho</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pBtgpc2Z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PciAs1DU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pCJKT41o</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pf9PZGNH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pFeiEYuT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Pfv4E2sj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PG4hwlpW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PGO3UYTX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pI1cdBLI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Pk0lGOUS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pKHmnLx0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PlON37cx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pltfXThF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PMEHtSfM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pmwEbyTm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PnrrmoJw</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pOIw7w8f</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PojTZmZO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pp8xzPXY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pqhqQnyh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pUJX2Jdo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Pv7YuzyZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Pvu2owRG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PwpEc08P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pwYv3dyx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Pxd7Ml4x</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pycdXwZq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$pYrbSAMB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$PYtKEeFB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Q0VySvFt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Q1Kl3Fsl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q31Iohte</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q4BrkGKW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q5cUhbNk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q5ORoF4g</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Q5WPYqn7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Q6jXWTV0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q7f9UZ26</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Q7x21xbq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q90kPyQ0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$q9W0J92j</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qAW5fxgC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qBaCwLD9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qbKf7F0X</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qBo6loBe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Qc1m4b01</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QcB2pBBv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qdCa5KRO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QdJmBRXx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QER7XMAO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QEUWqzYe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qffMJ0uI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QFKKQy4W</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qfnKTfNA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qH2V8ClY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QItg7871</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QJm0D98F</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Qkqc5Td8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qMgnA6CG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QN6buiKY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Qn7nb1HJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QNPXpGuN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qNwNSM9o</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QpoTCCJ7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QPPXIxt0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qQR9pVUh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QRxzBhbN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QsMAHMId</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qsszoS31</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QUhkiSJe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qVrPKL5Q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qvtt3b0D</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qwIsINAd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qwm5aHmc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qwsAiUQa</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QY3du0WM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$qYyA4whB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QzD4Ckpr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QZHD5K4M</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$QzZ4Xmlp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$R0jqx1fz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$r8bVaWDx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rbLr6nSt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rBsCICn3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rFVcUnuF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RfYV879R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rhk9SON0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RHOdWojb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RHYtSU6R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ricm5C0W</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rJ2ms83p</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rKpZ2sIj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RM7fZe1x</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rmiS0j4L</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ro7DSVQf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rpgMe8QO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rplTQGtu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RqKI9hI9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RQqbOS5P</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rqQRXECP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RR2ciIaQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rS4iQvlt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RSI9VxQA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RspomLtX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RV7GaeTS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rW8Cg5Zv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$rXqP3W5z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$RyPu86WM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$S0YQVVtY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$S1D2yFvb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$s22DGWno</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$s3xQMHOJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$s5NjG61E</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$S6GxQlIs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$s78El7fR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$S988DE3Y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$saJcvYJz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Say44lVf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SBUIGvXg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sCCz2ZCc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SEd2IVoc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SEj1Ez4N</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SfHrXqsE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SgHwBDZA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SgVtKNls</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sHl5hDLM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ShUwTef1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SilUFV1G</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sjvicPYQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sKHIWo24</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sl9H4bZI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$slSSl66F</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Sm4jEk7r</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sMLC0E20</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SN7kx59O</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sNrAr0Yo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$snvodzUz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sO4kaHXf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Sogb8WeV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sOKrPOZ4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SOYpBUWF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Sp4oNyi4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sSvKSuSd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SSyrMvL9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SvaSxLHv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SWM0zcMH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sXD0zpo0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sxHbxLPn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SXjzgnnG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SyJ2VKtu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$SYsdyHIc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$sYWh3hZq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$t0q4zpDM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$t10XiCtj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$t1v20FZx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$T20h774z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$T2hOMPcF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$T7l7EMSS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$t8M7vo2r</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$T959Dsmz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TbNiPlUB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TBPrYxXm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tdWHr0it</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$teSGLroe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tfBHx3fX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Th3JXLxu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tHfuoabS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TK4g5eqq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TkqcPq0T</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tkVVs5mQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tMQIsJ87</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TMZ7IOGF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tNdkLHb0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Tnv7uCCX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tnxlQRN9</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$to4LygBC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tpQNsS8w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TQcTZKNu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TqTV6qmP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TSd8NoWs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TsX6aMYn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TtYteaAV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tuowA73X</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TUvS1Ywi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TW4uEYBu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$twaiyJAc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$tXdaod4r</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$TyYBaLD0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$u1KM2fQL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$u4zaDTpb</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$U63xCACF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$u65ocn0w</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$U8BruVB2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$u9hmNG2E</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UA7nCDoy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uaD5jh1E</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UAwO7jwp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uBZ5a2SJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uC1iMoN1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UeTAMH0z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UH1H7JYL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UHa4qvY8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ui4lukT5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UiB7eImF</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uIZWwtYN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UJ3lVIUk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uK66EoNR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ukS78CvB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UlwS84Uf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UlyRwQAk</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UNbsmjVi</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UnheTPIR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UnHUPbcC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uQEfLUxT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uQeiDTSP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$urZxFiLl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$usfLTcDn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uSLUrTZN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uTLV04Fm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uTMWy6pQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uUQzpMDx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uVWFBrgZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uWcZZgHm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UWWr4TQf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UXgvUXyC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UXlWCe8D</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$uYrpMaGq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$UZEtUHKs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$V2a4mzr5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$V3EMRlEm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$v6itdfJl</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$v6qTjy2a</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$V7XIUTMX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vaYKMeMX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vboQj1rv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vcBwdH3j</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vcbxx67s</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vdjYJvkC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VDtlDUHz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vFX7S5EK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VI3e75hK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vibidHzO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VKHeD0i8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Vm512XfL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VMmad4Fx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vMmihZWX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VmQLmEHC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VmZyVI9V</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VnfbEgZp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Vob8qPBj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Vp1G0Gn6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vpJHU9bt</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VpOUp5Vh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vR8Yj2sR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vRV1wphh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vSAgFpfI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Vto190ni</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vUcMvaTG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vvaBo8Vq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VvG8zy1G</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vXhx9rOM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$VxVp2cRU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vYKUx7O4</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$vzhbg5zY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$w15pdcuN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$w345g0jH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$w4GAHlgh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$W5UUBXYq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$w6xbDu9X</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wB5NEfgJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Wbdl6jiO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WbGFbI8R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WcMiFIK0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wd5Roius</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WDIJFjFd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WdjfoUfA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wdpFHKJz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WEmmHnNq</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wEN60mko</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WGqd0buU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wGqjWzZI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WhMt64gx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$whpT6HJG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wIPEvj56</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WK6SQYT6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WK9E8LOS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wL74VIIP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wLbXx14Y</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WpVPrgLp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wRrADnMn</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WtEShlxY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WTGVmpd7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wUiEfRVP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Wv42yCMA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WV4nRXsN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WXzBkEal</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WYbAOFRD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$wyPlTnHx</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WZ05BHqA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$WznVziTU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$x0AQOmLr</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X0CnBXFP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X0idWpm8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X3VKa0ww</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X416Dys2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X4KjNdsg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X6j4cCo7</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$x7ms6Y4D</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X7Nyh1lo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$X7YDv6lK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XauQjiDM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xB2Ql2py</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XbdPrWmJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xbKQCKGd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xc7zt9tQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XdNKJNvC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xdzRxfUy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xE4MMVje</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xE4mqBRv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XecHJ8T6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xEG6nY4s</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Xep2pdLR</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XeQwgwbG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XfBY2UxG</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xFivKwUM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xgdVkILK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XH74U7zJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xHLuMcAM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xIIhWVbg</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xjKilprI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xjW7VHpN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xk0LU8IE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XkHPfh1Z</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xKOqMl2N</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xlyuRjrB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XmgHD6S3</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xMXXmUn5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Xn4AIUT1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xNLTiVrU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XnWJ01VP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xpTPdqe8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XpVkaBqo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XqiSawVO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Xr6ppBGj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xRD6YP2m</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xSWnChFD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xTDYCTIC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XTeLmVk5</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XticERaV</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xtRUN5TA</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xu2WJQB1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xvdRQ6Wa</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xVhSEQu6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$xWgWHitu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XxUsG7PU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$XYxKjXuD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$y1nKmEAW</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$y31nNW8W</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$y5u7UsAe</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$y5xHZFlj</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Y8JoOLQa</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$y8sKa5hd</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Y9EPEkER</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$y9tcfDkf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YBO3W1NX</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Yc7tJ0XU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yCCVEuXo</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ye5Ohgi8</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yEuiA3JH</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yFpecWIP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Yfrsb3g6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YH6qFvDB</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YHXiSHGI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Yi5MCNJL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YJPep3AP</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YkeWSu9O</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YKlGHJTK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yKtUbbhC</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yKvhUudM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ymd5oNvz</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YmdrNuxL</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YnaBH5ZZ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Yp6RsaXp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ypXnJlo1</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YPznDi5D</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yrkzLFh6</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Ys9uMUQc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ySLNVx8q</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YT2I2WyD</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yTAMhuLv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yTiC9fKy</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YvapP8Mh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yVffn5bS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YvnySZpu</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$YVudC4Zh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yw6fEd3R</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ywmHbxGc</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$yYZIsN36</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$z0VxMsap</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$z17Xv5Eh</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$z1GmNw33</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$z2WnK2fp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Z45qmkSp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$z4fGlqlK</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Z8KkvdnN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$z9eCY3lI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZabtoK1B</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zCG6LDhm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zDCvBtNs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZezkwpvN</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zFi4ChVv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZfnCpBmf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zG2LF9rv</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZgEhpBcm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZI1UatDp</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Zi3kxTg0</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZjeslPUS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Zl5mrgKE</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$Zlm0z6FI</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZlsGHiix</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zMT8kK2K</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZnfJATZm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZnkF7GLS</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zO4kkOiT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zoxDzRRm</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zP5pT5IY</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zq9d2LXQ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zqDc3kFJ</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZR3Glib2</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZrAaSOgU</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zsWOqYpT</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZwbP9Jly</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZXC2lEUO</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zXf9zEAf</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZyqjYjot</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZyTbaMGM</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$ZzQG5RBs</td>
  </tr>
  <tr>
    <td class="name">Mech$MockitoMock$953476439$auxiliary$zZyH9Tot</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    19,7%
  </span>
  <span class="absValue">
    (60/304)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    12,6%
  </span>
  <span class="absValue">
    (578/4601)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp;* MegaMek -
&nbsp;* Copyright (C) 2000, 2001, 2002, 2003, 2004, 2005 Ben Mazur (bmazur@sev.org)
&nbsp;* Copyright (C) 2018 The MegaMek Team
&nbsp;*
&nbsp;* This program is free software; you can redistribute it and/or modify it under
&nbsp;* the terms of the GNU General Public License as published by the Free Software
&nbsp;* Foundation; either version 2 of the License, or (at your option) any later
&nbsp;* version.
&nbsp;*
&nbsp;* This program is distributed in the hope that it will be useful, but WITHOUT
&nbsp;* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
&nbsp;* FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
&nbsp;* details.
&nbsp;*/
&nbsp;
&nbsp;package megamek.common;
&nbsp;
&nbsp;import java.io.PrintWriter;
&nbsp;import java.math.BigInteger;
&nbsp;import java.text.NumberFormat;
&nbsp;import java.util.*;
&nbsp;
&nbsp;import megamek.MegaMek;
&nbsp;import megamek.common.loaders.MtfFile;
&nbsp;import megamek.common.options.OptionsConstants;
&nbsp;import megamek.common.preference.PreferenceManager;
&nbsp;import megamek.common.weapons.autocannons.ACWeapon;
&nbsp;import megamek.common.weapons.autocannons.HVACWeapon;
&nbsp;import megamek.common.weapons.autocannons.LBXACWeapon;
&nbsp;import megamek.common.weapons.autocannons.UACWeapon;
&nbsp;import megamek.common.weapons.gaussrifles.GaussWeapon;
&nbsp;import megamek.common.weapons.lasers.CLImprovedHeavyLaserLarge;
&nbsp;import megamek.common.weapons.lasers.CLImprovedHeavyLaserMedium;
&nbsp;import megamek.common.weapons.lasers.CLImprovedHeavyLaserSmall;
&nbsp;import megamek.common.weapons.lasers.ISRISCHyperLaser;
&nbsp;import megamek.common.weapons.other.ISMekTaser;
&nbsp;import megamek.common.weapons.other.TSEMPWeapon;
&nbsp;import megamek.common.weapons.ppc.PPCWeapon;
&nbsp;import megamek.common.weapons.prototypes.*;
&nbsp;
&nbsp;/**
&nbsp; * You know what mechs are, silly.
&nbsp; */
&nbsp;public abstract class Mech extends Entity {
&nbsp;    /**
&nbsp;     *
&nbsp;     */
&nbsp;    private static final long serialVersionUID = -1929593228891136561L;
&nbsp;
&nbsp;    // system designators for critical hits
&nbsp;    public static final int SYSTEM_LIFE_SUPPORT = 0;
&nbsp;
&nbsp;    public static final int SYSTEM_SENSORS = 1;
&nbsp;
&nbsp;    public static final int SYSTEM_COCKPIT = 2;
&nbsp;
&nbsp;    public static final int SYSTEM_ENGINE = 3;
&nbsp;
&nbsp;    public static final int SYSTEM_GYRO = 4;
&nbsp;
&nbsp;    // actuators are systems too, for now
&nbsp;    public static final int ACTUATOR_SHOULDER = 7;
&nbsp;
&nbsp;    public static final int ACTUATOR_UPPER_ARM = 8;
&nbsp;
&nbsp;    public static final int ACTUATOR_LOWER_ARM = 9;
&nbsp;
&nbsp;    public static final int ACTUATOR_HAND = 10;
&nbsp;
&nbsp;    public static final int ACTUATOR_HIP = 11;
&nbsp;
&nbsp;    public static final int ACTUATOR_UPPER_LEG = 12;
&nbsp;
&nbsp;    public static final int ACTUATOR_LOWER_LEG = 13;
&nbsp;
&nbsp;    public static final int ACTUATOR_FOOT = 14;
&nbsp;
<b class="fc">&nbsp;    public static final String systemNames[] = { &quot;Life Support&quot;, &quot;Sensors&quot;,</b>
&nbsp;            &quot;Cockpit&quot;, &quot;Engine&quot;, &quot;Gyro&quot;, null, null, &quot;Shoulder&quot;, &quot;Upper Arm&quot;,
&nbsp;            &quot;Lower Arm&quot;, &quot;Hand&quot;, &quot;Hip&quot;, &quot;Upper Leg&quot;, &quot;Lower Leg&quot;, &quot;Foot&quot;};
&nbsp;
&nbsp;    // locations
&nbsp;    public static final int LOC_HEAD = 0;
&nbsp;
&nbsp;    public static final int LOC_CT = 1;
&nbsp;
&nbsp;    public static final int LOC_RT = 2;
&nbsp;
&nbsp;    public static final int LOC_LT = 3;
&nbsp;
&nbsp;    public static final int LOC_RARM = 4;
&nbsp;
&nbsp;    public static final int LOC_LARM = 5;
&nbsp;
&nbsp;    public static final int LOC_RLEG = 6;
&nbsp;
&nbsp;    public static final int LOC_LLEG = 7;
&nbsp;
&nbsp;    // center leg, for tripods
&nbsp;    public static final int LOC_CLEG = 8;
&nbsp;
&nbsp;    // cockpit status
&nbsp;    public static final int COCKPIT_OFF = 0;
&nbsp;
&nbsp;    public static final int COCKPIT_ON = 1;
&nbsp;
&nbsp;    public static final int COCKPIT_AIMED_SHOT = 2;
&nbsp;
&nbsp;    // gyro types
&nbsp;    public static final int GYRO_UNKNOWN = -1;
&nbsp;
&nbsp;    public static final int GYRO_STANDARD = 0;
&nbsp;
&nbsp;    public static final int GYRO_XL = 1;
&nbsp;
&nbsp;    public static final int GYRO_COMPACT = 2;
&nbsp;
&nbsp;    public static final int GYRO_HEAVY_DUTY = 3;
&nbsp;
&nbsp;    public static final int GYRO_NONE = 4;
&nbsp;
&nbsp;    public static final int GYRO_SUPERHEAVY = 5;
&nbsp;
<b class="fc">&nbsp;    public static final String[] GYRO_STRING = { &quot;Standard Gyro&quot;, &quot;XL Gyro&quot;,</b>
&nbsp;            &quot;Compact Gyro&quot;, &quot;Heavy Duty Gyro&quot;, &quot;None&quot;, &quot;Superheavy Gyro&quot; };
&nbsp;
<b class="fc">&nbsp;    public static final String[] GYRO_SHORT_STRING = { &quot;Standard&quot;, &quot;XL&quot;,</b>
&nbsp;            &quot;Compact&quot;, &quot;Heavy Duty&quot;, &quot;None&quot;, &quot;Superheavy&quot; };
&nbsp;
&nbsp;    // cockpit types
&nbsp;    public static final int COCKPIT_UNKNOWN = -1;
&nbsp;
&nbsp;    public static final int COCKPIT_STANDARD = 0;
&nbsp;
&nbsp;    public static final int COCKPIT_SMALL = 1;
&nbsp;
&nbsp;    public static final int COCKPIT_COMMAND_CONSOLE = 2;
&nbsp;
&nbsp;    public static final int COCKPIT_TORSO_MOUNTED = 3;
&nbsp;
&nbsp;    public static final int COCKPIT_DUAL = 4;
&nbsp;
&nbsp;    public static final int COCKPIT_INDUSTRIAL = 5;
&nbsp;
&nbsp;    public static final int COCKPIT_PRIMITIVE = 6;
&nbsp;
&nbsp;    public static final int COCKPIT_PRIMITIVE_INDUSTRIAL = 7;
&nbsp;
&nbsp;    public static final int COCKPIT_SUPERHEAVY = 8;
&nbsp;
&nbsp;    public static final int COCKPIT_SUPERHEAVY_TRIPOD = 9;
&nbsp;
&nbsp;    public static final int COCKPIT_TRIPOD = 10;
&nbsp;
&nbsp;    public static final int COCKPIT_INTERFACE = 11;
&nbsp;
&nbsp;    public static final int COCKPIT_VRRP = 12;
&nbsp;
&nbsp;    public static final int COCKPIT_QUADVEE = 13;
&nbsp;
&nbsp;    public static final int COCKPIT_SUPERHEAVY_INDUSTRIAL = 14;
&nbsp;    
&nbsp;    public static final int COCKPIT_SUPERHEAVY_COMMAND_CONSOLE = 15;
&nbsp;    
&nbsp;    public static final int COCKPIT_SMALL_COMMAND_CONSOLE = 16;
&nbsp;
<b class="fc">&nbsp;    public static final String[] COCKPIT_STRING = { &quot;Standard Cockpit&quot;,</b>
&nbsp;            &quot;Small Cockpit&quot;, &quot;Command Console&quot;, &quot;Torso-Mounted Cockpit&quot;,
&nbsp;            &quot;Dual Cockpit&quot;, &quot;Industrial Cockpit&quot;, &quot;Primitive Cockpit&quot;,
&nbsp;            &quot;Primitive Industrial Cockpit&quot;, &quot;Superheavy Cockpit&quot;,
&nbsp;            &quot;Superheavy Tripod Cockpit&quot;, &quot;Tripod Cockpit&quot;, &quot;Interface Cockpit&quot;,
&nbsp;            &quot;Virtual Reality Piloting Pod&quot;, &quot;QuadVee Cockpit&quot;,
&nbsp;            &quot;Superheavy Industrial Cockpit&quot;, &quot;Superheavy Command Console&quot;, 
&nbsp;	    &quot;Small Command Console&quot;};
&nbsp;
<b class="fc">&nbsp;    public static final String[] COCKPIT_SHORT_STRING = { &quot;Standard&quot;, &quot;Small&quot;,</b>
&nbsp;            &quot;Command Console&quot;, &quot;Torso Mounted&quot;, &quot;Dual&quot;, &quot;Industrial&quot;,
&nbsp;            &quot;Primitive&quot;, &quot;Primitive Industrial&quot;, &quot;Superheavy&quot;,
&nbsp;            &quot;Superheavy Tripod&quot;, &quot;Tripod&quot;, &quot;Interface&quot;, &quot;VRRP&quot;, &quot;Quadvee&quot;,
&nbsp;            &quot;Superheavy Industrial&quot;, &quot;Superheavy Command&quot;, 
&nbsp;            &quot;Small Command&quot;};
&nbsp;
&nbsp;    public static final String FULL_HEAD_EJECT_STRING = &quot;Full Head Ejection System&quot;;
&nbsp;
&nbsp;    // jump types
&nbsp;    public static final int JUMP_UNKNOWN = -1;
&nbsp;    public static final int JUMP_NONE = 0;
&nbsp;    public static final int JUMP_STANDARD = 1;
&nbsp;    public static final int JUMP_IMPROVED = 2;
&nbsp;    public static final int JUMP_PROTOTYPE = 3;
&nbsp;    public static final int JUMP_BOOSTER = 4;
&nbsp;    public static final int JUMP_DISPOSABLE = 5;
&nbsp;    // Type for Improved Jumpjet Prototype
&nbsp;    public static final int JUMP_PROTOTYPE_IMPROVED = 6;
&nbsp;
&nbsp;    // Some &quot;has&quot; items only need be determined once
&nbsp;    public static final int HAS_FALSE = -1;
&nbsp;
&nbsp;    public static final int HAS_UNKNOWN = 0;
&nbsp;
&nbsp;    public static final int HAS_TRUE = 1;
&nbsp;    // rear armor
&nbsp;    private int[] rearArmor;
&nbsp;
&nbsp;    private int[] orig_rearArmor;
&nbsp;
&nbsp;    private boolean[] rearHardenedArmorDamaged;
&nbsp;
&nbsp;    // for Harjel II/III
&nbsp;    private boolean[] armorDamagedThisTurn;
&nbsp;
<b class="fc">&nbsp;    private int sinksOn = -1;</b>
&nbsp;
<b class="fc">&nbsp;    private int sinksOnNextRound = -1;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean autoEject = true;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean condEjectAmmo = true;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean condEjectEngine = true;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean condEjectCTDest = true;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean condEjectHeadshot = true;</b>
&nbsp;
<b class="fc">&nbsp;    private int cockpitStatus = COCKPIT_ON;</b>
&nbsp;
<b class="fc">&nbsp;    private int cockpitStatusNextRound = COCKPIT_ON;</b>
&nbsp;
<b class="fc">&nbsp;    private int jumpType = JUMP_UNKNOWN;</b>
&nbsp;
<b class="fc">&nbsp;    protected int gyroType = GYRO_STANDARD;</b>
&nbsp;
<b class="fc">&nbsp;    protected int cockpitType = COCKPIT_STANDARD;</b>
&nbsp;
<b class="fc">&nbsp;    private int cowlArmor = 3;</b>
&nbsp;
<b class="fc">&nbsp;    private int hasLaserHeatSinks = HAS_UNKNOWN;</b>
&nbsp;
&nbsp;    // For grapple attacks
<b class="fc">&nbsp;    private int grappled_id = Entity.NONE;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean isGrappleAttacker = false;</b>
&nbsp;
<b class="fc">&nbsp;    private int grappledSide = Entity.GRAPPLE_BOTH;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean grappledThisRound = false;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean shouldDieAtEndOfTurnBecauseOfWater = false;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean justMovedIntoIndustrialKillingWater = false;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean stalled = false;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean stalledThisTurn = false;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean checkForCrit = false;</b>
&nbsp;
<b class="fc">&nbsp;    private int levelsFallen = 0;</b>
&nbsp;
<b class="fc">&nbsp;    private boolean fullHeadEject = false;</b>
&nbsp;
<b class="fc">&nbsp;    protected static int[] EMERGENCY_COOLANT_SYSTEM_FAILURE = {3, 5, 7, 10, 13, 13, 13};</b>
&nbsp;
&nbsp;    // nCoolantSystemLevel is the # of turns RISC emergency coolant system has been used previously
<b class="fc">&nbsp;    protected int nCoolantSystemLevel = 0;</b>
&nbsp;
<b class="fc">&nbsp;    protected boolean bCoolantWentUp = false;</b>
&nbsp;
<b class="fc">&nbsp;    protected boolean bUsedCoolantSystem = false; // Has emergency coolant system been used?</b>
&nbsp;
<b class="fc">&nbsp;    protected boolean bDamagedCoolantSystem = false; // is the emergency coolant system damaged?</b>
&nbsp;
<b class="fc">&nbsp;    protected int nCoolantSystemMOS = 0;</b>
&nbsp;
&nbsp;    // Cooling System Flaws quirk
<b class="fc">&nbsp;    private boolean coolingFlawActive = false;</b>
&nbsp;
&nbsp;    // QuadVees, LAMs, and tracked &#39;Mechs can change movement mode.
<b class="fc">&nbsp;    protected EntityMovementMode originalMovementMode = EntityMovementMode.BIPED;</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Construct a new, blank, mech.
&nbsp;     */
&nbsp;    public Mech() {
<b class="nc">&nbsp;        this(Mech.GYRO_STANDARD, Mech.COCKPIT_STANDARD);</b>
&nbsp;    }
&nbsp;
&nbsp;    public Mech(int inGyroType, int inCockpitType) {
<b class="fc">&nbsp;        super();</b>
&nbsp;
<b class="fc">&nbsp;        gyroType = inGyroType;</b>
<b class="fc">&nbsp;        cockpitType = inCockpitType;</b>
&nbsp;
<b class="fc">&nbsp;        rearArmor = new int[locations()];</b>
<b class="fc">&nbsp;        orig_rearArmor = new int[locations()];</b>
<b class="fc">&nbsp;        rearHardenedArmorDamaged = new boolean[locations()];</b>
<b class="fc">&nbsp;        armorDamagedThisTurn = new boolean[locations()];</b>
&nbsp;
<b class="fc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="fc">&nbsp;            if (!hasRearArmor(i)) {</b>
<b class="fc">&nbsp;                initializeRearArmor(IArmorState.ARMOR_NA, i);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Standard leg crits
<b class="fc">&nbsp;        setCritical(LOC_RLEG, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_HIP));
<b class="fc">&nbsp;        setCritical(LOC_RLEG, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_UPPER_LEG));
<b class="fc">&nbsp;        setCritical(LOC_RLEG, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_LOWER_LEG));
<b class="fc">&nbsp;        setCritical(LOC_RLEG, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_FOOT));
&nbsp;
<b class="fc">&nbsp;        setCritical(LOC_LLEG, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_HIP));
<b class="fc">&nbsp;        setCritical(LOC_LLEG, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_UPPER_LEG));
<b class="fc">&nbsp;        setCritical(LOC_LLEG, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_LOWER_LEG));
<b class="fc">&nbsp;        setCritical(LOC_LLEG, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                ACTUATOR_FOOT));
&nbsp;
&nbsp;        // Player setting specify whether their Meks&#39; automatic
&nbsp;        // ejection systems are disabled by default or not.
<b class="fc">&nbsp;        autoEject = !PreferenceManager.getClientPreferences()</b>
<b class="fc">&nbsp;                .defaultAutoejectDisabled();</b>
&nbsp;
<b class="fc">&nbsp;        switch (inCockpitType) {</b>
&nbsp;        case COCKPIT_TRIPOD:
<b class="nc">&nbsp;            setCrew(new Crew(CrewType.TRIPOD));</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case COCKPIT_SUPERHEAVY_TRIPOD:
<b class="nc">&nbsp;            setCrew(new Crew(CrewType.SUPERHEAVY_TRIPOD));</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case COCKPIT_DUAL:
<b class="nc">&nbsp;            setCrew(new Crew(CrewType.DUAL));</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case COCKPIT_COMMAND_CONSOLE:
&nbsp;	case COCKPIT_SUPERHEAVY_COMMAND_CONSOLE:
&nbsp;	case COCKPIT_SMALL_COMMAND_CONSOLE:
<b class="nc">&nbsp;            setCrew(new Crew(CrewType.COMMAND_CONSOLE));</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case COCKPIT_QUADVEE:
<b class="nc">&nbsp;            setCrew(new Crew(CrewType.QUADVEE));</b>
&nbsp;            break;
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getUnitType() {
<b class="nc">&nbsp;        return UnitType.MEK;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return if this mech cannot stand up from hulldown
&nbsp;     */
&nbsp;    public abstract boolean cannotStandUpFromHullDown();
&nbsp;
&nbsp;    public int getCowlArmor() {
<b class="nc">&nbsp;        if (hasCowl()) {</b>
<b class="nc">&nbsp;            return cowlArmor;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasCowl() {
<b class="nc">&nbsp;        return hasQuirk(OptionsConstants.QUIRK_POS_COWL);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Damage the cowl. Returns amount of excess damage
&nbsp;     *
&nbsp;     * @param amount
&nbsp;     * @return
&nbsp;     */
&nbsp;    public int damageCowl(int amount) {
<b class="nc">&nbsp;        if (hasCowl()) {</b>
<b class="nc">&nbsp;            if (amount &lt; cowlArmor) {</b>
<b class="nc">&nbsp;                cowlArmor -= amount;</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="nc">&nbsp;            amount -= cowlArmor;</b>
<b class="nc">&nbsp;            cowlArmor = 0;</b>
<b class="nc">&nbsp;            return amount;</b>
&nbsp;        }
<b class="nc">&nbsp;        return amount; // No cowl - return full damage</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the location that transferred damage or crits will go to from a
&nbsp;     * given location.
&nbsp;     */
&nbsp;    public static int getInnerLocation(int location) {
<b class="nc">&nbsp;        switch (location) {</b>
&nbsp;            case Mech.LOC_RT:
&nbsp;            case Mech.LOC_LT:
&nbsp;            case Mech.LOC_CLEG:
<b class="nc">&nbsp;                return Mech.LOC_CT;</b>
&nbsp;            case Mech.LOC_LLEG:
&nbsp;            case Mech.LOC_LARM:
<b class="nc">&nbsp;                return Mech.LOC_LT;</b>
&nbsp;            case Mech.LOC_RLEG:
&nbsp;            case Mech.LOC_RARM:
<b class="nc">&nbsp;                return Mech.LOC_RT;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return location;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the location with the most restrictive firing arc for a weapon.
&nbsp;     */
&nbsp;    public static int mostRestrictiveLoc(int location1, int location2) {
<b class="nc">&nbsp;        if (location1 == location2) {</b>
<b class="nc">&nbsp;            return location1;</b>
<b class="nc">&nbsp;        } else if (Mech.restrictScore(location1) &gt;= Mech</b>
<b class="nc">&nbsp;                .restrictScore(location2)) {</b>
<b class="nc">&nbsp;            return location1;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return location2;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * find the least restrictive location of the two locations passed in
&nbsp;     *
&nbsp;     * @param location1
&nbsp;     * @param location2
&nbsp;     * @return
&nbsp;     */
&nbsp;    public static int leastRestrictiveLoc(int location1, int location2) {
<b class="nc">&nbsp;        if (location1 == location2) {</b>
<b class="nc">&nbsp;            return location2;</b>
<b class="nc">&nbsp;        } else if (Mech.restrictScore(location1) &gt;= Mech</b>
<b class="nc">&nbsp;                .restrictScore(location2)) {</b>
<b class="nc">&nbsp;            return location2;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return location1;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Helper function designed to give relative restrictiveness of locations.
&nbsp;     * Used for finding the most restrictive firing arc for a weapon.
&nbsp;     */
&nbsp;    public static int restrictScore(int location) {
<b class="nc">&nbsp;        switch (location) {</b>
&nbsp;            case Mech.LOC_RARM:
&nbsp;            case Mech.LOC_LARM:
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            case Mech.LOC_RT:
&nbsp;            case Mech.LOC_LT:
<b class="nc">&nbsp;                return 1;</b>
&nbsp;            case Mech.LOC_CT:
<b class="nc">&nbsp;                return 2;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return 3;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * OmniMechs have handles for Battle Armor squads to latch onto. Please
&nbsp;     * note, this method should only be called during this Mech&#39;s construction.
&nbsp;     * &lt;p/&gt;
&nbsp;     * Overrides &lt;code&gt;Entity#setOmni(boolean)&lt;/code&gt;
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void setOmni(boolean omni) {
&nbsp;
&nbsp;        // Perform the superclass&#39; action.
<b class="fc">&nbsp;        super.setOmni(omni);</b>
&nbsp;
&nbsp;        // Add BattleArmorHandles to OmniMechs.
<b class="fc">&nbsp;        if (omni &amp;&amp; !hasBattleArmorHandles()) {</b>
<b class="nc">&nbsp;            addTransporter(new BattleArmorHandles());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    // Set whether a non-omni should have BA Grab Bars.
&nbsp;    public void setBAGrabBars() {
<b class="nc">&nbsp;        if (isOmni()) {</b>
&nbsp;            return;
&nbsp;        }
&nbsp;        // TODO: I really hate this optional rule - what if some units are
&nbsp;        // already loaded?
&nbsp;        // if ba_grab_bars is on, then we need to add battlearmor handles,
&nbsp;        // otherwise clamp mounts
&nbsp;        // but first clear out whatever we have
&nbsp;        // Removed the removal of transporters so that loaded units don&#39;t get ditched
&nbsp;        // This is an unofficial rule and it doesn&#39;t work well anyway as changing the option
&nbsp;        // does not affect units that are in the game
<b class="nc">&nbsp;        if (game.getOptions().booleanOption(OptionsConstants.ADVANCED_BA_GRAB_BARS)) {</b>
<b class="nc">&nbsp;            addTransporter(new BattleArmorHandles());</b>
&nbsp;        } else {
<b class="nc">&nbsp;            addTransporter(new ClampMountMech());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void setProtomechClampMounts() {
<b class="nc">&nbsp;        boolean front = false;</b>
<b class="nc">&nbsp;        boolean rear = false;</b>
<b class="nc">&nbsp;        for (Transporter t: getTransports()) {</b>
<b class="nc">&nbsp;            if (t instanceof ProtomechClampMount) {</b>
<b class="nc">&nbsp;                front |= !((ProtomechClampMount) t).isRear();</b>
<b class="nc">&nbsp;                rear |= ((ProtomechClampMount) t).isRear();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (!front) {</b>
<b class="nc">&nbsp;            addTransporter(new ProtomechClampMount(false));</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!rear) {</b>
<b class="nc">&nbsp;            addTransporter(new ProtomechClampMount(true));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void load(Entity unit, boolean checkElev, int bayNumber) {
<b class="nc">&nbsp;        if (unit.hasETypeFlag(Entity.ETYPE_PROTOMECH)) {</b>
<b class="nc">&nbsp;            boolean rear = bayNumber &gt; 0;</b>
<b class="nc">&nbsp;            for (Transporter t : getTransports()) {</b>
<b class="nc">&nbsp;                if ((t instanceof ProtomechClampMount)</b>
<b class="nc">&nbsp;                        &amp;&amp; t.canLoad(unit)</b>
<b class="nc">&nbsp;                        &amp;&amp; (!checkElev || (unit.getElevation() == getElevation()))</b>
<b class="nc">&nbsp;                        &amp;&amp; (((ProtomechClampMount) t).isRear() == rear)) {</b>
<b class="nc">&nbsp;                    t.load(unit);</b>
<b class="nc">&nbsp;                    unit.setTargetBay(-1);</b>
&nbsp;                    return;
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        super.load(unit, checkElev, bayNumber);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of locations in the entity
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int locations() {
<b class="fc">&nbsp;        return 8;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#newRound(int)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void newRound(int roundNumber) {
&nbsp;        // Walk through the Mech&#39;s miscellaneous equipment before
&nbsp;        // we apply our parent class&#39; newRound() functionality
&nbsp;        // because Mek Stealth is set by the Entity#newRound() method.
<b class="fc">&nbsp;        for (Mounted m : getMisc()) {</b>
<b class="fc">&nbsp;            MiscType mtype = (MiscType) m.getType();</b>
&nbsp;
&nbsp;            // Stealth can not be turned on if it&#39;s ECM is destroyed.
<b class="fc">&nbsp;            if (mtype.hasFlag(MiscType.F_STEALTH)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getLinked().isDestroyed()</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getLinked().isBreached()) {</b>
<b class="nc">&nbsp;                m.setMode(&quot;Off&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;        } // Check the next piece of equipment.</b>
&nbsp;
<b class="fc">&nbsp;        super.newRound(roundNumber);</b>
&nbsp;        // If MASC was used last turn, increment the counter,
&nbsp;        // otherwise decrement. Then, clear the counter
<b class="fc">&nbsp;        if (usedMASC) {</b>
<b class="nc">&nbsp;            nMASCLevel++;</b>
<b class="nc">&nbsp;            bMASCWentUp = true;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            nMASCLevel = Math.max(0, nMASCLevel - 1);</b>
<b class="fc">&nbsp;            if (bMASCWentUp) {</b>
<b class="nc">&nbsp;                nMASCLevel = Math.max(0, nMASCLevel - 1);</b>
<b class="nc">&nbsp;                bMASCWentUp = false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Clear the MASC flag
<b class="fc">&nbsp;        usedMASC = false;</b>
&nbsp;
&nbsp;        // If emergency cooling system was used last turn, increment the counter,
&nbsp;        // otherwise decrement. Then, clear the counter
<b class="fc">&nbsp;        if (bUsedCoolantSystem) {</b>
<b class="nc">&nbsp;            nCoolantSystemLevel++;</b>
<b class="nc">&nbsp;            bCoolantWentUp = true;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            nCoolantSystemLevel = Math.max(0, nCoolantSystemLevel - 1);</b>
<b class="fc">&nbsp;            if (bCoolantWentUp) {</b>
<b class="nc">&nbsp;                nCoolantSystemLevel = Math.max(0, nCoolantSystemLevel - 1);</b>
<b class="nc">&nbsp;                bCoolantWentUp = false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Clear the coolant system flag
<b class="fc">&nbsp;        bUsedCoolantSystem = false;</b>
&nbsp;
&nbsp;
<b class="fc">&nbsp;        setSecondaryFacing(getFacing());</b>
&nbsp;
&nbsp;        // set heat sinks
<b class="fc">&nbsp;        sinksOn = sinksOnNextRound;</b>
&nbsp;
&nbsp;        // update cockpit status
<b class="fc">&nbsp;        cockpitStatus = cockpitStatusNextRound;</b>
&nbsp;
<b class="fc">&nbsp;        if (isJustMovedIntoIndustrialKillingWater()) {</b>
<b class="nc">&nbsp;            shouldDieAtEndOfTurnBecauseOfWater = true;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            shouldDieAtEndOfTurnBecauseOfWater = false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (stalledThisTurn) {</b>
<b class="nc">&nbsp;            stalledThisTurn = false;</b>
&nbsp;        }
<b class="fc">&nbsp;        levelsFallen = 0;</b>
<b class="fc">&nbsp;        checkForCrit = false;</b>
&nbsp;
<b class="fc">&nbsp;        grappledThisRound = false;</b>
&nbsp;
&nbsp;        // clear HarJel &quot;took damage this turn&quot; flags
<b class="fc">&nbsp;        for (int loc = 0; loc &lt; locations(); ++loc) {</b>
<b class="fc">&nbsp;            setArmorDamagedThisTurn(loc, false);</b>
&nbsp;        }
&nbsp;    } // End public void newRound()
&nbsp;
&nbsp;    /**
&nbsp;     * Returns true if the location in question is a torso location
&nbsp;     */
&nbsp;    public boolean locationIsTorso(int loc) {
<b class="nc">&nbsp;        return (loc == LOC_CT) || (loc == LOC_RT) || (loc == LOC_LT);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns true if the location in question is a leg
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean locationIsLeg(int loc) {
<b class="fc">&nbsp;        return (loc == LOC_LLEG) || (loc == LOC_RLEG);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Count the number of destroyed or breached legs on the mech
&nbsp;     */
&nbsp;    public int countBadLegs() {
<b class="fc">&nbsp;        int badLegs = 0;</b>
&nbsp;
<b class="fc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="fc">&nbsp;            badLegs += (locationIsLeg(i) &amp;&amp; isLocationBad(i)) ? 1 : 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return badLegs;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns true if the entity has a hip crit.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean hasHipCrit() {
<b class="nc">&nbsp;        for (int loc = 0; loc &lt; locations(); loc++) {</b>
<b class="nc">&nbsp;            if (legHasHipCrit(loc)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Return true is the location is a leg and has a hip crit
&nbsp;     */
&nbsp;    public boolean legHasHipCrit(int loc) {
<b class="fc">&nbsp;        if (isLocationBad(loc)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (locationIsLeg(loc)) {</b>
<b class="fc">&nbsp;            return (getGoodCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.ACTUATOR_HIP, loc) == 0);
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This function returns true iff the system is in perfect condition.
&nbsp;     *
&nbsp;     * @param system
&nbsp;     *            the system to check
&nbsp;     * @return false if the system is damaged.
&nbsp;     */
&nbsp;    public boolean isSystemIntact(int system) {
<b class="nc">&nbsp;        for (int loc = 0; loc &lt; locations(); loc++) {</b>
<b class="nc">&nbsp;            int numCrits = getNumberOfCriticals(loc);</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; numCrits; i++) {</b>
<b class="nc">&nbsp;                CriticalSlot ccs = getCritical(loc, i);</b>
&nbsp;
<b class="nc">&nbsp;                if ((ccs != null)</b>
<b class="nc">&nbsp;                        &amp;&amp; (ccs.getType() == CriticalSlot.TYPE_SYSTEM)</b>
<b class="nc">&nbsp;                        &amp;&amp; (ccs.getIndex() == system)) {</b>
<b class="nc">&nbsp;                    if (ccs.isDamaged() || ccs.isBreached()) {</b>
<b class="nc">&nbsp;                        return false;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Count non-hip leg actuator crits
&nbsp;     */
&nbsp;    public int countLegActuatorCrits(int loc) {
<b class="fc">&nbsp;        if (isLocationBad(loc)) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int legCrits = 0;</b>
&nbsp;
<b class="fc">&nbsp;        if (locationIsLeg(loc)) {</b>
<b class="fc">&nbsp;            if (getGoodCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.ACTUATOR_UPPER_LEG, loc) == 0) {
<b class="nc">&nbsp;                legCrits++;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (getGoodCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.ACTUATOR_LOWER_LEG, loc) == 0) {
<b class="nc">&nbsp;                legCrits++;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (getGoodCriticals(CriticalSlot.TYPE_SYSTEM, Mech.ACTUATOR_FOOT,</b>
&nbsp;                    loc) == 0) {
<b class="nc">&nbsp;                legCrits++;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return legCrits;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have composite internal structure?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasCompositeStructure() {
<b class="nc">&nbsp;        return (getStructureType() == EquipmentType.T_STRUCTURE_COMPOSITE);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have reinforced internal structure?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasReinforcedStructure() {
<b class="nc">&nbsp;        return (getStructureType() == EquipmentType.T_STRUCTURE_REINFORCED);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech mount MASC?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasMASC() {
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_MASC) &amp;&amp; !mEquip.isInoperable()) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * checks if a mech has both a normal MASC system and a supercharger,
&nbsp;     * regardless of arming status
&nbsp;     */
&nbsp;    public boolean hasMASCAndSuperCharger() {
<b class="nc">&nbsp;        boolean hasMASC = false;</b>
<b class="nc">&nbsp;        boolean hasSuperCharger = false;</b>
<b class="nc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="nc">&nbsp;            if (!m.isInoperable() &amp;&amp; (m.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_MASC)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getType().hasSubType(MiscType.S_SUPERCHARGER)) {</b>
<b class="nc">&nbsp;                hasSuperCharger = true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (!m.isInoperable() &amp;&amp; (m.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_MASC)</b>
<b class="nc">&nbsp;                    &amp;&amp; !m.getType().hasSubType(MiscType.S_SUPERCHARGER)) {</b>
<b class="nc">&nbsp;                hasMASC = true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return hasMASC &amp;&amp; hasSuperCharger;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have working jump boosters?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasJumpBoosters() {
<b class="nc">&nbsp;        boolean jumpBoosters = false;</b>
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_JUMP_BOOSTER)) {</b>
&nbsp;
&nbsp;                // one crit destroyed they all all screwed
&nbsp;                // --Torren
<b class="nc">&nbsp;                if (mEquip.isBreached() || mEquip.isDestroyed()</b>
<b class="nc">&nbsp;                        || mEquip.isMissing()) {</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
<b class="nc">&nbsp;                jumpBoosters = true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return jumpBoosters;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Checks if a mech has an armed MASC system. Note that the mech will have
&nbsp;     * to exceed its normal run to actually engage the MASC system
&nbsp;     */
&nbsp;    public boolean hasArmedMASC() {
<b class="fc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="fc">&nbsp;            if (!m.isDestroyed() &amp;&amp; !m.isBreached()</b>
<b class="fc">&nbsp;                    &amp;&amp; (m.getType() instanceof MiscType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_MASC)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.curMode().equals(&quot;Armed&quot;)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * checks if a mech has both a normal armed MASC system and a armed super-
&nbsp;     * charger.
&nbsp;     */
&nbsp;    public boolean hasArmedMASCAndSuperCharger() {
<b class="fc">&nbsp;        boolean hasMASC = false;</b>
<b class="fc">&nbsp;        boolean hasSuperCharger = false;</b>
<b class="fc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="fc">&nbsp;            if (!m.isDestroyed() &amp;&amp; !m.isBreached()</b>
<b class="fc">&nbsp;                    &amp;&amp; (m.getType() instanceof MiscType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_MASC)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.curMode().equals(&quot;Armed&quot;)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getType().hasSubType(MiscType.S_SUPERCHARGER)) {</b>
<b class="nc">&nbsp;                hasSuperCharger = true;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (!m.isDestroyed() &amp;&amp; !m.isBreached()</b>
<b class="fc">&nbsp;                    &amp;&amp; (m.getType() instanceof MiscType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_MASC)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.curMode().equals(&quot;Armed&quot;)</b>
<b class="nc">&nbsp;                    &amp;&amp; !m.getType().hasSubType(MiscType.S_SUPERCHARGER)) {</b>
<b class="nc">&nbsp;                hasMASC = true;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return hasMASC &amp;&amp; hasSuperCharger;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does this mech have an extended retractable blade in working condition?
&nbsp;     */
&nbsp;    public boolean hasExtendedRetractableBlade() {
<b class="nc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="nc">&nbsp;            if (!m.isInoperable() &amp;&amp; (m.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_CLUB)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.getType().hasSubType(MiscType.S_RETRACTABLE_BLADE)</b>
<b class="nc">&nbsp;                    &amp;&amp; m.curMode().equals(&quot;extended&quot;)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does the entity have a retracted blade in the given location? Only true
&nbsp;     * for biped mechs
&nbsp;     */
&nbsp;    public boolean hasRetractedBlade(int loc) {
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have TSM?
&nbsp;     */
&nbsp;    public boolean hasTSM() {
<b class="fc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="fc">&nbsp;            if ((m.getType() instanceof MiscType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_TSM)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have SCM?
&nbsp;     */
&nbsp;    public boolean hasSCM() {
<b class="fc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="fc">&nbsp;            if ((m.getType() instanceof MiscType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_SCM)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have industrial TSM=
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasIndustrialTSM() {
<b class="fc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="fc">&nbsp;            if ((m.getType() instanceof MiscType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(MiscType.F_INDUSTRIAL_TSM)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have a null-sig-system?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasNullSig() {
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_NULLSIG)) {</b>
&nbsp;                // The Mek has Null-Sig
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have a void-sig-system?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasVoidSig() {
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_VOIDSIG)) {</b>
&nbsp;                // The Mek has Void-Sig
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does this mech have tracks? Used for tracks as industrial equipment; QuadVees return false.
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasTracks() {
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_TRACKS)) {</b>
&nbsp;                // The Mek has tracks
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * does this mech have a chameleon light polarization shield?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean hasChameleonShield() {
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_CHAMELEON_SHIELD)) {</b>
&nbsp;                // The Mek has Chameleon Light Polarization Field
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getStandingHeat()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getStandingHeat() {
<b class="nc">&nbsp;        return hasEngine() ? getEngine().getStandingHeat() : 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * set this mech&#39;s &lt;code&gt;Engine&lt;/code&gt;
&nbsp;     *
&nbsp;     * @param e
&nbsp;     *            the &lt;code&gt;Engine&lt;/code&gt; to set
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void setEngine(Engine e) {
<b class="fc">&nbsp;        super.setEngine(e);</b>
<b class="fc">&nbsp;        if(hasEngine() &amp;&amp; getEngine().engineValid) {</b>
<b class="fc">&nbsp;            setOriginalWalkMP(calculateWalk());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Used to set this Mech&#39;s original walk mp
&nbsp;     *
&nbsp;     * @return this units calculated walking speed, dependent on engine rating
&nbsp;     *         and weight
&nbsp;     */
&nbsp;    protected int calculateWalk() {
<b class="fc">&nbsp;        if(!hasEngine()) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (isPrimitive()) {</b>
<b class="nc">&nbsp;            double rating = getEngine().getRating();</b>
<b class="nc">&nbsp;            rating /= 1.2;</b>
<b class="nc">&nbsp;            if ((rating % 5) != 0) {</b>
<b class="nc">&nbsp;                return (int) ((rating - (rating % 5)) + 5) / (int) weight;</b>
&nbsp;            }
<b class="nc">&nbsp;            return (int) (rating / (int) weight);</b>
&nbsp;
&nbsp;        }
<b class="fc">&nbsp;        return getEngine().getRating() / (int) weight;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getWalkHeat()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getWalkHeat() {
<b class="nc">&nbsp;        int extra = bDamagedCoolantSystem?1:0;</b>
<b class="nc">&nbsp;        return extra + (hasEngine() ? getEngine().getWalkHeat(this) : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns whether this mech should use conditional ejection
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    /*
&nbsp;     * public boolean shouldUseConditionalEject() { if (game !=null &amp;&amp;
&nbsp;     * game.getOptions().booleanOption(OptionsConstants.RPG_CONDITIONAL_EJECTION)) { return true; }
&nbsp;     *
&nbsp;     * return false; }
&nbsp;     */
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getRunMP(boolean, boolean, boolean)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getRunMP(boolean gravity, boolean ignoreheat,
&nbsp;            boolean ignoremodulararmor) {
<b class="fc">&nbsp;        if (hasArmedMASCAndSuperCharger()) {</b>
<b class="nc">&nbsp;            return ((int) Math.ceil(getWalkMP(gravity, ignoreheat,</b>
&nbsp;                    ignoremodulararmor) * 2.5))
<b class="nc">&nbsp;                    - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;        }
<b class="fc">&nbsp;        if (hasArmedMASC()) {</b>
<b class="nc">&nbsp;            return (getWalkMP(gravity, ignoreheat, ignoremodulararmor) * 2)</b>
<b class="nc">&nbsp;                    - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;        }
<b class="fc">&nbsp;        return Math.max(0, super.getRunMP(gravity, ignoreheat, ignoremodulararmor)</b>
<b class="fc">&nbsp;                - (hasMPReducingHardenedArmor() ? 1 : 0));</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getRunMPwithoutMASC(boolean, boolean, boolean)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getRunMPwithoutMASC(boolean gravity, boolean ignoreheat,
&nbsp;            boolean ignoremodulararmor) {
<b class="nc">&nbsp;        return super.getRunMP(gravity, ignoreheat, ignoremodulararmor)</b>
<b class="nc">&nbsp;                - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return The mech&#39;s run MP without MASC or supercharger, but with any reduction
&nbsp;     *         due to hardened armor.
&nbsp;     */
&nbsp;    public int getOriginalRunMPwithoutMASC() {
<b class="nc">&nbsp;        return super.getOriginalRunMP()</b>
<b class="nc">&nbsp;                - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns this entity&#39;s running/flank mp as a string.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public String getRunMPasString() {
<b class="nc">&nbsp;        if (hasArmedMASC()) {</b>
<b class="nc">&nbsp;            return getRunMPwithoutMASC() + &quot;(&quot; + getRunMP() + &quot;)&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return Integer.toString(getRunMP());</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Depends on engine type
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getRunHeat() {
<b class="nc">&nbsp;        int extra = bDamagedCoolantSystem?1:0;</b>
<b class="nc">&nbsp;        return extra + (hasEngine() ? getEngine().getRunHeat(this) : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getSprintMP()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getSprintMP() {
<b class="nc">&nbsp;        if (hasHipCrit()) {</b>
<b class="nc">&nbsp;            return getRunMP();</b>
&nbsp;        }
<b class="nc">&nbsp;        return getSprintMP(true, false, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getSprintMP(boolean, boolean, boolean)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getSprintMP(boolean gravity, boolean ignoreheat,
&nbsp;            boolean ignoremodulararmor) {
<b class="nc">&nbsp;        if (hasHipCrit()) {</b>
<b class="nc">&nbsp;            return getRunMP(gravity, ignoreheat, ignoremodulararmor);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasArmedMASCAndSuperCharger()) {</b>
<b class="nc">&nbsp;            return ((int) Math.ceil(getWalkMP(gravity, ignoreheat,</b>
&nbsp;                    ignoremodulararmor) * 3.0))
<b class="nc">&nbsp;                    - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasArmedMASC()) {</b>
<b class="nc">&nbsp;            return ((int) Math.ceil(getWalkMP(gravity, ignoreheat,</b>
&nbsp;                    ignoremodulararmor) * 2.5))
<b class="nc">&nbsp;                    - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;        }
<b class="nc">&nbsp;        return getSprintMPwithoutMASC(gravity, ignoreheat, ignoremodulararmor);</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getSprintMPwithoutMASC(boolean, boolean)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getSprintMPwithoutMASC() {
<b class="nc">&nbsp;        return getSprintMPwithoutMASC(true, false, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getSprintMPwithoutMASC(boolean, boolean,
&nbsp;     * boolean)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getSprintMPwithoutMASC(boolean gravity, boolean ignoreheat,
&nbsp;            boolean ignoremodulararmor) {
<b class="nc">&nbsp;        if (hasHipCrit()) {</b>
<b class="nc">&nbsp;            return getRunMPwithoutMASC(gravity, ignoreheat, ignoremodulararmor);</b>
&nbsp;        }
<b class="nc">&nbsp;        return ((int) Math.ceil(getWalkMP(gravity, ignoreheat,</b>
&nbsp;                ignoremodulararmor) * 2.0))
<b class="nc">&nbsp;                - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getOriginalSprintMPwithoutMASC() {
<b class="nc">&nbsp;        return ((int) Math.ceil(getOriginalWalkMP() * 2.0)) - (hasMPReducingHardenedArmor() ? 1 : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns this entity&#39;s Sprint mp as a string.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public String getSprintMPasString() {
<b class="nc">&nbsp;        if (hasArmedMASC()) {</b>
<b class="nc">&nbsp;            return getRunMPwithoutMASC() + &quot;(&quot; + getSprintMP() + &quot;)&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return Integer.toString(getSprintMP());</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getRunningGravityLimit()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getRunningGravityLimit() {
<b class="nc">&nbsp;        if (game.getOptions().booleanOption(OptionsConstants.ADVGRNDMOV_TACOPS_SPRINT)) {</b>
<b class="nc">&nbsp;            return getSprintMP(false, false, false);</b>
&nbsp;        }
<b class="nc">&nbsp;        return getRunMP(false, false, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Depends on engine type
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getSprintHeat() {
<b class="nc">&nbsp;        int extra = bDamagedCoolantSystem?1:0;</b>
<b class="nc">&nbsp;        return extra + (hasEngine() ? getEngine().getSprintHeat() : 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This mech&#39;s jumping MP modified for missing jump jets and gravity
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getJumpMP() {
<b class="nc">&nbsp;        return getJumpMP(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This mech&#39;s jumping MP modified for missing jump jets and possibly
&nbsp;     * gravity
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getJumpMP(boolean gravity) {
<b class="nc">&nbsp;        return getJumpMP(gravity, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getJumpMP(boolean gravity, boolean ignoremodulararmor) {
<b class="nc">&nbsp;        int jump = 0;</b>
&nbsp;
<b class="nc">&nbsp;        if (hasShield() &amp;&amp; (getNumberOfShields(MiscType.S_SHIELD_LARGE) &gt; 0)) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if (mounted.getType().hasFlag(MiscType.F_JUMP_JET)</b>
<b class="nc">&nbsp;                    &amp;&amp; !mounted.isDestroyed() &amp;&amp; !mounted.isBreached()) {</b>
<b class="nc">&nbsp;                jump++;</b>
<b class="nc">&nbsp;            } else if (mounted.getType().hasFlag(MiscType.F_JUMP_BOOSTER)</b>
<b class="nc">&nbsp;                    &amp;&amp; !mounted.isDestroyed() &amp;&amp; !mounted.isBreached()) {</b>
<b class="nc">&nbsp;                jump = getOriginalJumpMP();</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // apply Partial Wing bonus if we have the ability to jump
<b class="nc">&nbsp;        if (jump &gt; 0) {</b>
<b class="nc">&nbsp;            for (Mounted mount : getMisc()) {</b>
<b class="nc">&nbsp;                if (mount.getType().hasFlag(MiscType.F_PARTIAL_WING)) {</b>
<b class="nc">&nbsp;                    jump += getPartialWingJumpBonus(mount);</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;        // Medium shield reduces jump mp by 1/shield
<b class="nc">&nbsp;        jump -= getNumberOfShields(MiscType.S_SHIELD_MEDIUM);</b>
&nbsp;
<b class="nc">&nbsp;        if (hasModularArmor() &amp;&amp; !ignoremodulararmor) {</b>
<b class="nc">&nbsp;            jump--;</b>
&nbsp;        }
&nbsp;        
<b class="nc">&nbsp;        if (gravity) {</b>
<b class="nc">&nbsp;            return Math.max(applyGravityEffectsOnMP(jump), 0);</b>
&nbsp;        }
<b class="nc">&nbsp;        return Math.max(jump, 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gives the bonus to Jump MP conferred by a mech partial wing.
&nbsp;     *
&nbsp;     * @param mount
&nbsp;     *            The mounted location of the Wing
&nbsp;     * @return The Jump MP bonus conferred by the wing
&nbsp;     */
&nbsp;    public int getPartialWingJumpBonus(Mounted mount) {
<b class="nc">&nbsp;        int bonus = 0;</b>
<b class="nc">&nbsp;        if (game != null) {</b>
<b class="nc">&nbsp;            if ((getWeightClass() &lt;= EntityWeightClass.WEIGHT_MEDIUM)) {</b>
<b class="nc">&nbsp;                switch (game.getPlanetaryConditions().getAtmosphere()) {</b>
&nbsp;                    case PlanetaryConditions.ATMO_VACUUM:
<b class="nc">&nbsp;                        bonus = 0;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_TRACE:
<b class="nc">&nbsp;                        bonus = 0;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_THIN:
<b class="nc">&nbsp;                        bonus = 1;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_STANDARD:
<b class="nc">&nbsp;                        bonus = 2;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_HIGH:
<b class="nc">&nbsp;                        bonus = 2;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;
&nbsp;                    case PlanetaryConditions.ATMO_VHIGH:
<b class="nc">&nbsp;                        bonus = 3;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    default:
<b class="nc">&nbsp;                        bonus = 2;</b>
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                switch (game.getPlanetaryConditions().getAtmosphere()) {</b>
&nbsp;                    case PlanetaryConditions.ATMO_VACUUM:
<b class="nc">&nbsp;                        bonus = 0;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_TRACE:
<b class="nc">&nbsp;                        bonus = 0;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_THIN:
<b class="nc">&nbsp;                        bonus = 0;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_STANDARD:
<b class="nc">&nbsp;                        bonus = 1;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_HIGH:
<b class="nc">&nbsp;                        bonus = 2;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case PlanetaryConditions.ATMO_VHIGH:
<b class="nc">&nbsp;                        bonus = 2;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    default:
<b class="nc">&nbsp;                        bonus = 1;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            if ((getWeightClass() &lt;= EntityWeightClass.WEIGHT_MEDIUM)) {</b>
<b class="nc">&nbsp;                bonus = 2;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                bonus = 1;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // subtract jumping bonus for damaged criticals
<b class="nc">&nbsp;        bonus -= getBadCriticals(CriticalSlot.TYPE_EQUIPMENT,</b>
<b class="nc">&nbsp;                getEquipmentNum(mount), Mech.LOC_RT);</b>
<b class="nc">&nbsp;        bonus -= getBadCriticals(CriticalSlot.TYPE_EQUIPMENT,</b>
<b class="nc">&nbsp;                getEquipmentNum(mount), Mech.LOC_LT);</b>
&nbsp;
<b class="nc">&nbsp;        return bonus &gt; 0 ? bonus : 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gives the heat capacity bonus conferred by a mech partial wing.
&nbsp;     *
&nbsp;     * @return the heat capacity bonus provided by the wing
&nbsp;     */
&nbsp;    private int getPartialWingHeatBonus() {
<b class="nc">&nbsp;        int bonus = 0;</b>
<b class="nc">&nbsp;        if (game != null) {</b>
<b class="nc">&nbsp;            switch (game.getPlanetaryConditions().getAtmosphere()) {</b>
&nbsp;                case PlanetaryConditions.ATMO_VACUUM:
<b class="nc">&nbsp;                    bonus = 0;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case PlanetaryConditions.ATMO_TRACE:
<b class="nc">&nbsp;                    bonus = 1;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case PlanetaryConditions.ATMO_THIN:
<b class="nc">&nbsp;                    bonus = 2;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case PlanetaryConditions.ATMO_STANDARD:
<b class="nc">&nbsp;                    bonus = 3;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case PlanetaryConditions.ATMO_HIGH:
<b class="nc">&nbsp;                    bonus = 3;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case PlanetaryConditions.ATMO_VHIGH:
<b class="nc">&nbsp;                    bonus = 3;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                default:
<b class="nc">&nbsp;                    bonus = 3;</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            bonus = 3;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return bonus;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the type of jump jet system the mech has.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getJumpType() {
<b class="nc">&nbsp;        jumpType = JUMP_NONE;</b>
<b class="nc">&nbsp;        for (Mounted m : miscList) {</b>
<b class="nc">&nbsp;            if (m.getType().hasFlag(MiscType.F_JUMP_JET)) {</b>
<b class="nc">&nbsp;                if (m.getType().hasSubType(MiscType.S_IMPROVED)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.getType().hasSubType(MiscType.S_PROTOTYPE)) {</b>
<b class="nc">&nbsp;                    jumpType = JUMP_PROTOTYPE_IMPROVED;</b>
<b class="nc">&nbsp;                } else if (m.getType().hasSubType(MiscType.S_IMPROVED)) {</b>
<b class="nc">&nbsp;                    jumpType = JUMP_IMPROVED;</b>
<b class="nc">&nbsp;                } else if (m.getType().hasSubType(MiscType.S_PROTOTYPE)) {</b>
<b class="nc">&nbsp;                    jumpType = JUMP_PROTOTYPE;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    jumpType = JUMP_STANDARD;</b>
&nbsp;                }
<b class="nc">&nbsp;                break;</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_JUMP_BOOSTER)) {</b>
<b class="nc">&nbsp;                jumpType = JUMP_BOOSTER;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return jumpType;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getJumpHeat(int)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getJumpHeat(int movedMP) {
&nbsp;
<b class="nc">&nbsp;        int extra = bDamagedCoolantSystem?1:0;</b>
&nbsp;
&nbsp;        // don&#39;t count movement granted by Partial Wing
<b class="nc">&nbsp;        for (Mounted mount : getMisc()) {</b>
<b class="nc">&nbsp;            if (mount.getType().hasFlag(MiscType.F_PARTIAL_WING)) {</b>
<b class="nc">&nbsp;                movedMP -= getPartialWingJumpBonus(mount);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        switch (getJumpType()) {</b>
&nbsp;            case JUMP_IMPROVED:
<b class="nc">&nbsp;                return extra + (hasEngine() ? getEngine().getJumpHeat((movedMP / 2) + (movedMP % 2)) : 0);</b>
&nbsp;            case JUMP_PROTOTYPE_IMPROVED:
&nbsp;                // min 6 heat, otherwise 2xJumpMp, XTRO:Succession Wars pg17
<b class="nc">&nbsp;                return extra + (hasEngine() ? Math.max(6, getEngine().getJumpHeat(movedMP * 2)) : 0);</b>
&nbsp;            case JUMP_BOOSTER:
&nbsp;            case JUMP_DISPOSABLE:
<b class="nc">&nbsp;                return extra;</b>
&nbsp;            case JUMP_NONE:
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return extra + (hasEngine() ? getEngine().getJumpHeat(movedMP) : 0);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns this mech&#39;s jumping MP, modified for missing &amp; underwater jets
&nbsp;     * and gravity.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getJumpMPWithTerrain() {
<b class="nc">&nbsp;        if ((getPosition() == null) || (game.getBoard().getHex(getPosition()) == null) || (getJumpType() == JUMP_BOOSTER)) {</b>
<b class="nc">&nbsp;            return getJumpMP();</b>
&nbsp;        }
<b class="nc">&nbsp;        int waterLevel = 0;</b>
<b class="nc">&nbsp;        if (!isOffBoard()) {</b>
<b class="nc">&nbsp;            waterLevel = game.getBoard().getHex(getPosition())</b>
<b class="nc">&nbsp;                    .terrainLevel(Terrains.WATER);</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((waterLevel &lt;= 0) || (getElevation() &gt;= 0)) {</b>
<b class="nc">&nbsp;            return getJumpMP();</b>
<b class="nc">&nbsp;        } else if (waterLevel &gt; 1) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        } else { // waterLevel == 1
<b class="nc">&nbsp;            return applyGravityEffectsOnMP(torsoJumpJets());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of (working) jump jets mounted in the torsos.
&nbsp;     */
&nbsp;    public int torsoJumpJets() {
<b class="nc">&nbsp;        int jump = 0;</b>
&nbsp;
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if (mounted.getType().hasFlag(MiscType.F_JUMP_JET)</b>
<b class="nc">&nbsp;                    &amp;&amp; !mounted.isDestroyed() &amp;&amp; !mounted.isBreached()</b>
<b class="nc">&nbsp;                    &amp;&amp; locationIsTorso(mounted.getLocation())) {</b>
<b class="nc">&nbsp;                jump++;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // apply Partial Wing bonus if we have the ability to jump
<b class="nc">&nbsp;        if (jump &gt; 0) {</b>
<b class="nc">&nbsp;            for (Mounted mount : getMisc()) {</b>
<b class="nc">&nbsp;                if (mount.getType().hasFlag(MiscType.F_PARTIAL_WING)) {</b>
<b class="nc">&nbsp;                    jump += getPartialWingJumpBonus(mount);</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return jump;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isEligibleForPavementBonus() {
&nbsp;        //eligible if using Mech tracks
<b class="nc">&nbsp;        return movementMode == EntityMovementMode.TRACKED;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public EntityMovementMode nextConversionMode(EntityMovementMode afterMode) {
<b class="nc">&nbsp;        if (hasTracks() &amp;&amp; afterMode != EntityMovementMode.TRACKED) {</b>
<b class="nc">&nbsp;            return EntityMovementMode.TRACKED;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return originalMovementMode;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * QuadVees and LAMs may not have to make PSRs to avoid falling depending on their mode,
&nbsp;     * and Mechs using tracks for movement do not have to make PSRs for damage to gyro or leg
&nbsp;     * actuators.
&nbsp;     *
&nbsp;     * @param gyroLegDamage Whether the PSR is due to damage to gyro or leg actuators
&nbsp;     * @return              true if the Mech can fall due to failed PSR.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean canFall(boolean gyroLegDamage) {
<b class="nc">&nbsp;        return !isProne() &amp;&amp; !(gyroLegDamage &amp;&amp; movementMode == EntityMovementMode.TRACKED);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Return the height of this mech above the terrain.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int height() {
<b class="nc">&nbsp;        return isProne() ? 0 : isSuperHeavy() ? 2 : 1;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds heat sinks to the engine. Uses clan/normal depending on the
&nbsp;     * currently set techLevel
&nbsp;     */
&nbsp;    public void addEngineSinks(int totalSinks, BigInteger heatSinkFlag) {
<b class="fc">&nbsp;        addEngineSinks(totalSinks, heatSinkFlag, isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds heat sinks to the engine. Adds either the engine capacity, or the
&nbsp;     * entire number of heat sinks, whichever is less
&nbsp;     */
&nbsp;    public void addEngineSinks(int totalSinks, BigInteger heatSinkFlag,
&nbsp;            boolean clan) {
<b class="fc">&nbsp;        if (heatSinkFlag == MiscType.F_DOUBLE_HEAT_SINK) {</b>
<b class="fc">&nbsp;            addEngineSinks(totalSinks, clan ? EquipmentTypeLookup.CLAN_DOUBLE_HS</b>
<b class="fc">&nbsp;                    : EquipmentTypeLookup.IS_DOUBLE_HS);</b>
<b class="fc">&nbsp;        } else if (heatSinkFlag == MiscType.F_COMPACT_HEAT_SINK) {</b>
<b class="nc">&nbsp;            addEngineSinks(totalSinks, EquipmentTypeLookup.COMPACT_HS_1);</b>
<b class="fc">&nbsp;        } else if (heatSinkFlag == MiscType.F_LASER_HEAT_SINK) {</b>
<b class="nc">&nbsp;            addEngineSinks(totalSinks, EquipmentTypeLookup.LASER_HS);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            addEngineSinks(totalSinks, EquipmentTypeLookup.SINGLE_HS);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * base for adding engine sinks. Newer method allows externals to say how
&nbsp;     * much are engine HS.
&nbsp;     *
&nbsp;     * @param totalSinks
&nbsp;     *            the amount of heatsinks to add to the engine
&nbsp;     * @param sinkName
&nbsp;     *            the &lt;code&gt;String&lt;/code&gt; determining the type of heatsink to
&nbsp;     *            add. must be a lookupname of a heatsinktype
&nbsp;     */
&nbsp;    public void addEngineSinks(int totalSinks, String sinkName) {
<b class="fc">&nbsp;        if(!hasEngine()) {</b>
&nbsp;            return;
&nbsp;        }
<b class="fc">&nbsp;        EquipmentType sinkType = EquipmentType.get(sinkName);</b>
&nbsp;
<b class="fc">&nbsp;        if (sinkType == null) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Mech: can&#39;t find heat sink to add to engine&quot;);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int toAllocate = Math.min(</b>
&nbsp;                totalSinks,
<b class="fc">&nbsp;                getEngine().integralHeatSinkCapacity(</b>
<b class="fc">&nbsp;                        sinkType.hasFlag(MiscType.F_COMPACT_HEAT_SINK)));</b>
<b class="fc">&nbsp;        addEngineSinks(sinkName, toAllocate);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * add heat sinks into the engine
&nbsp;     *
&nbsp;     * @param sinkName
&nbsp;     *            the &lt;code&gt;String&lt;/code&gt; determining the type of heatsink to
&nbsp;     *            add. must be a lookupname of a heatsinktype
&nbsp;     * @param toAllocate
&nbsp;     *            Number of hs to add to the Engine.
&nbsp;     */
&nbsp;    public void addEngineSinks(String sinkName, int toAllocate) {
&nbsp;        // this relies on these being the correct internalNames for these items
<b class="fc">&nbsp;        EquipmentType sinkType = EquipmentType.get(sinkName);</b>
&nbsp;
<b class="fc">&nbsp;        if (sinkType == null) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Mech: can&#39;t find heat sink to add to engine&quot;);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        for (int i = 0; i &lt; toAllocate; i++) {</b>
&nbsp;            try {
<b class="fc">&nbsp;                addEquipment(new Mounted(this, sinkType), Entity.LOC_NONE,</b>
&nbsp;                        false);
<b class="nc">&nbsp;            } catch (LocationFullException ex) {</b>
&nbsp;                // um, that&#39;s impossible.
<b class="fc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns extra heat generated by engine crits
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getEngineCritHeat() {
<b class="nc">&nbsp;        if(!hasEngine()) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        int engineCritHeat = 0;</b>
<b class="nc">&nbsp;        if (!isShutDown() &amp;&amp; getEngine().isFusion()) {</b>
<b class="nc">&nbsp;            engineCritHeat += 5 * getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.SYSTEM_ENGINE, Mech.LOC_CT);
<b class="nc">&nbsp;            engineCritHeat += 5 * getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.SYSTEM_ENGINE, Mech.LOC_LT);
<b class="nc">&nbsp;            engineCritHeat += 5 * getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.SYSTEM_ENGINE, Mech.LOC_RT);
&nbsp;        }
&nbsp;        // Partial Repairs of the engine cause additional heat
<b class="nc">&nbsp;        if (getPartialRepairs().booleanOption(&quot;mech_reactor_3_crit&quot;)) {</b>
<b class="nc">&nbsp;            engineCritHeat += 8;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getPartialRepairs().booleanOption(&quot;mech_reactor_2_crit&quot;)) {</b>
<b class="nc">&nbsp;            engineCritHeat += 5;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getPartialRepairs().booleanOption(&quot;mech_reactor_1_crit&quot;)) {</b>
<b class="nc">&nbsp;            engineCritHeat += 3;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getPartialRepairs().booleanOption(&quot;mech_engine_replace&quot;)) {</b>
<b class="nc">&nbsp;            engineCritHeat += 1;</b>
&nbsp;        }
&nbsp;
&nbsp;        // add the partial repair heat here.
<b class="nc">&nbsp;        return engineCritHeat;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of heat sinks, functional or not.
&nbsp;     */
&nbsp;    public int heatSinks() {
<b class="fc">&nbsp;        return heatSinks(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of heat sinks, functional or not.
&nbsp;     *
&nbsp;     * @param countPrototypes
&nbsp;     *            Set TRUE to include Prototype Heat Sinks in the total.
&nbsp;     */
&nbsp;    public int heatSinks(boolean countPrototypes) {
<b class="fc">&nbsp;        int sinks = 0;</b>
<b class="fc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="fc">&nbsp;            EquipmentType etype = mounted.getType();</b>
<b class="fc">&nbsp;            if (etype.hasFlag(MiscType.F_COMPACT_HEAT_SINK)</b>
<b class="nc">&nbsp;                    &amp;&amp; (etype.hasFlag(MiscType.F_DOUBLE_HEAT_SINK) || (etype</b>
<b class="nc">&nbsp;                            .hasFlag(MiscType.F_IS_DOUBLE_HEAT_SINK_PROTOTYPE) &amp;&amp; countPrototypes))) {</b>
<b class="nc">&nbsp;                sinks += 2;</b>
<b class="fc">&nbsp;            } else if (etype.hasFlag(MiscType.F_HEAT_SINK)</b>
<b class="fc">&nbsp;                    || etype.hasFlag(MiscType.F_DOUBLE_HEAT_SINK)</b>
<b class="fc">&nbsp;                    || (etype.hasFlag(MiscType.F_IS_DOUBLE_HEAT_SINK_PROTOTYPE) &amp;&amp; countPrototypes)) {</b>
<b class="fc">&nbsp;                sinks++;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return sinks;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of destroyed heat sinks.
&nbsp;     */
&nbsp;    public int damagedHeatSinks() {
<b class="nc">&nbsp;        int sinks = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            EquipmentType etype = mounted.getType();</b>
<b class="nc">&nbsp;            if (!mounted.isDestroyed()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (etype.hasFlag(MiscType.F_HEAT_SINK)</b>
<b class="nc">&nbsp;                    || etype.hasFlag(MiscType.F_DOUBLE_HEAT_SINK)</b>
<b class="nc">&nbsp;                    || etype.hasFlag(MiscType.F_IS_DOUBLE_HEAT_SINK_PROTOTYPE)) {</b>
<b class="nc">&nbsp;                sinks++;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return sinks;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the about of heat that the entity can sink each turn.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getHeatCapacity() {
<b class="nc">&nbsp;        return getHeatCapacity(true, true);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getHeatCapacity(boolean radicalHeatSink) {
<b class="nc">&nbsp;        return getHeatCapacity(true, radicalHeatSink);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the name of the heat sinks mounted on this &#39;mech.
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public String getHeatSinkTypeName() {
<b class="nc">&nbsp;        for (Mounted m : getMisc()) {</b>
&nbsp;            // The MiscType name for compact heat sinks is formatted differently
<b class="nc">&nbsp;            if (m.getType().hasFlag(MiscType.F_COMPACT_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                return &quot;Compact Heat Sink&quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (m.getType().hasFlag(MiscType.F_HEAT_SINK)</b>
<b class="nc">&nbsp;                    || m.getType().hasFlag(MiscType.F_DOUBLE_HEAT_SINK)</b>
<b class="nc">&nbsp;                    || m.getType().hasFlag(MiscType.F_LASER_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                return m.getName();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;        
&nbsp;        // if a mech has no heat sink equipment, we pretend like it has standard heat sinks.
<b class="nc">&nbsp;        return &quot;Heat Sink&quot;;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getHeatCapacity(boolean includePartialWing,
&nbsp;            boolean includeRadicalHeatSink) {
<b class="nc">&nbsp;        int capacity = 0;</b>
<b class="nc">&nbsp;        int activeCount = getActiveSinks();</b>
&nbsp;
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if (mounted.isDestroyed() || mounted.isBreached()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((activeCount &gt; 0)</b>
<b class="nc">&nbsp;                    &amp;&amp; mounted.getType().hasFlag(MiscType.F_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                capacity++;</b>
<b class="nc">&nbsp;                activeCount--;</b>
<b class="nc">&nbsp;            } else if ((activeCount &gt; 0)</b>
<b class="nc">&nbsp;                    &amp;&amp; mounted.getType().hasFlag(MiscType.F_DOUBLE_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                activeCount--;</b>
<b class="nc">&nbsp;                capacity += 2;</b>
<b class="nc">&nbsp;            } else if (mounted.getType().hasFlag(</b>
&nbsp;                    MiscType.F_IS_DOUBLE_HEAT_SINK_PROTOTYPE)) {
<b class="nc">&nbsp;                capacity += 2;</b>
<b class="nc">&nbsp;            } else if (includePartialWing</b>
<b class="nc">&nbsp;                    &amp;&amp; mounted.getType().hasFlag(MiscType.F_PARTIAL_WING)</b>
&nbsp;                    &amp;&amp; // unless
&nbsp;                       // all crits
&nbsp;                       // are
&nbsp;                       // destroyed,
&nbsp;                       // we get
&nbsp;                       // the bonus
<b class="nc">&nbsp;                    ((getGoodCriticals(CriticalSlot.TYPE_EQUIPMENT,</b>
<b class="nc">&nbsp;                            getEquipmentNum(mounted), Mech.LOC_RT) &gt; 0) || (getGoodCriticals(</b>
&nbsp;                            CriticalSlot.TYPE_EQUIPMENT,
<b class="nc">&nbsp;                            getEquipmentNum(mounted), Mech.LOC_LT) &gt; 0))) {</b>
<b class="nc">&nbsp;                capacity += getPartialWingHeatBonus();</b>
<b class="nc">&nbsp;                includePartialWing = false; // Only count the partial wing bonus</b>
&nbsp;                                            // once.
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;        // AirMech mode for LAMs confers the same heat benefits as a partial wing.
<b class="nc">&nbsp;        if (includePartialWing &amp;&amp; movementMode == EntityMovementMode.WIGE) {</b>
<b class="nc">&nbsp;            capacity += getPartialWingHeatBonus();</b>
&nbsp;        }
<b class="nc">&nbsp;        if (includeRadicalHeatSink</b>
<b class="nc">&nbsp;                &amp;&amp; hasWorkingMisc(MiscType.F_RADICAL_HEATSINK)) {</b>
<b class="nc">&nbsp;            capacity += Math.ceil(getActiveSinks() * 0.4);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return capacity;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the about of heat that the entity can sink each turn, factoring
&nbsp;     * for water.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getHeatCapacityWithWater() {
<b class="nc">&nbsp;        if (hasLaserHeatSinks()) {</b>
<b class="nc">&nbsp;            return getHeatCapacity(true, false);</b>
&nbsp;        }
<b class="nc">&nbsp;        return getHeatCapacity(true, false) + Math.min(sinksUnderwater(), 6);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the number of heat sinks that are underwater.
&nbsp;     */
&nbsp;    private int sinksUnderwater() {
<b class="nc">&nbsp;        if ((getPosition() == null) || isOffBoard()) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        IHex curHex = game.getBoard().getHex(getPosition());</b>
&nbsp;        // are we even in water? is it depth 1+
<b class="nc">&nbsp;        if ((curHex.terrainLevel(Terrains.WATER) &lt;= 0) || (getElevation() &gt;= 0)) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
&nbsp;        // are we entirely underwater?
<b class="nc">&nbsp;        if (isProne() || (curHex.terrainLevel(Terrains.WATER) &gt;= 2)) {</b>
<b class="nc">&nbsp;            return getHeatCapacity();</b>
&nbsp;        }
&nbsp;
&nbsp;        // okay, count leg sinks
<b class="nc">&nbsp;        int sinksUnderwater = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if (mounted.isDestroyed() || mounted.isBreached()</b>
<b class="nc">&nbsp;                    || !locationIsLeg(mounted.getLocation())) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (mounted.getType().hasFlag(MiscType.F_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                sinksUnderwater++;</b>
<b class="nc">&nbsp;            } else if (mounted.getType().hasFlag(MiscType.F_DOUBLE_HEAT_SINK)</b>
<b class="nc">&nbsp;                    || mounted.getType().hasFlag(</b>
&nbsp;                            MiscType.F_IS_DOUBLE_HEAT_SINK_PROTOTYPE)) {
<b class="nc">&nbsp;                sinksUnderwater += 2;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return sinksUnderwater;</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public boolean tracksHeat() {
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the name of the type of movement used. This is mech-specific.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public String getMovementString(EntityMovementType mtype) {
<b class="nc">&nbsp;        switch (mtype) {</b>
&nbsp;            case MOVE_SKID:
<b class="nc">&nbsp;                return &quot;Skidded&quot;;</b>
&nbsp;            case MOVE_NONE:
&nbsp;            case MOVE_CAREFUL_STAND:
<b class="nc">&nbsp;                return &quot;None&quot;;</b>
&nbsp;            case MOVE_WALK:
<b class="nc">&nbsp;                return &quot;Walked&quot;;</b>
&nbsp;            case MOVE_RUN:
<b class="nc">&nbsp;                return &quot;Ran&quot;;</b>
&nbsp;            case MOVE_JUMP:
<b class="nc">&nbsp;                return &quot;Jumped&quot;;</b>
&nbsp;            case MOVE_SPRINT:
<b class="nc">&nbsp;                return &quot;Sprinted&quot;;</b>
&nbsp;            //LAM AirMech modes
&nbsp;            case MOVE_VTOL_WALK:
<b class="nc">&nbsp;                return &quot;Cruised&quot;;</b>
&nbsp;            case MOVE_VTOL_RUN:
<b class="nc">&nbsp;                return &quot;Flanked&quot;;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return &quot;Unknown!&quot;;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the name of the type of movement used. This is mech-specific.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public String getMovementAbbr(EntityMovementType mtype) {
<b class="nc">&nbsp;        switch (mtype) {</b>
&nbsp;            case MOVE_SKID:
<b class="nc">&nbsp;                return &quot;S&quot;;</b>
&nbsp;            case MOVE_NONE:
<b class="nc">&nbsp;                return &quot;N&quot;;</b>
&nbsp;            case MOVE_WALK:
<b class="nc">&nbsp;                return &quot;W&quot;;</b>
&nbsp;            case MOVE_RUN:
<b class="nc">&nbsp;                return &quot;R&quot;;</b>
&nbsp;            case MOVE_JUMP:
<b class="nc">&nbsp;                return &quot;J&quot;;</b>
&nbsp;            case MOVE_SPRINT:
<b class="nc">&nbsp;                return &quot;Sp&quot;;</b>
&nbsp;            //LAM AirMech modes
&nbsp;            case MOVE_VTOL_WALK:
<b class="nc">&nbsp;                return &quot;C&quot;;</b>
&nbsp;            case MOVE_VTOL_RUN:
<b class="nc">&nbsp;                return &quot;F&quot;;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return &quot;?&quot;;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#canChangeSecondaryFacing()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean canChangeSecondaryFacing() {
<b class="nc">&nbsp;        if (hasQuirk(OptionsConstants.QUIRK_NEG_NO_TWIST)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        return !isProne();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Can this mech torso twist in the given direction?
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isValidSecondaryFacing(int dir) {
<b class="nc">&nbsp;        int rotate = dir - getFacing();</b>
<b class="nc">&nbsp;        if (canChangeSecondaryFacing()) {</b>
<b class="nc">&nbsp;            if (hasQuirk(OptionsConstants.QUIRK_POS_EXT_TWIST)) {</b>
<b class="nc">&nbsp;                return (rotate == 0) || (rotate == 1) || (rotate == 2)</b>
&nbsp;                        || (rotate == -1) || (rotate == -2) || (rotate == -5)
&nbsp;                        || (rotate == -4) || (rotate == 5) || (rotate == 4);
&nbsp;            }
<b class="nc">&nbsp;            return (rotate == 0) || (rotate == 1) || (rotate == -1)</b>
&nbsp;                    || (rotate == -5) || (rotate == 5);
&nbsp;        }
<b class="nc">&nbsp;        return rotate == 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Return the nearest valid direction to torso twist in
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int clipSecondaryFacing(int dir) {
<b class="nc">&nbsp;        if (isValidSecondaryFacing(dir)) {</b>
<b class="nc">&nbsp;            return dir;</b>
&nbsp;        }
&nbsp;        // can&#39;t twist while prone
<b class="nc">&nbsp;        if (!canChangeSecondaryFacing()) {</b>
<b class="nc">&nbsp;            return getFacing();</b>
&nbsp;        }
&nbsp;        // otherwise, twist once in the appropriate direction
<b class="nc">&nbsp;        final int rotate = (dir + (6 - getFacing())) % 6;</b>
<b class="nc">&nbsp;        if ((rotate == 3) &amp;&amp; hasQuirk(OptionsConstants.QUIRK_POS_EXT_TWIST)) {</b>
&nbsp;            // if the unit can do an extended torso twist and the area chosen
&nbsp;            // was directly behind them, then just rotate one way
<b class="nc">&nbsp;            return (getFacing() + 2) % 6;</b>
&nbsp;        }
<b class="nc">&nbsp;        return rotate &gt;= 3 ? (getFacing() + 5) % 6 : (getFacing() + 1) % 6;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#hasRearArmor(int)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean hasRearArmor(int loc) {
<b class="fc">&nbsp;        return (loc == LOC_CT) || (loc == LOC_RT) || (loc == LOC_LT);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the amount of armor in the location specified. Mech version,
&nbsp;     * handles rear armor.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getArmor(int loc, boolean rear) {
<b class="fc">&nbsp;        if (isLocationBlownOff(loc)) {</b>
<b class="nc">&nbsp;            return IArmorState.ARMOR_DESTROYED;</b>
&nbsp;        }
<b class="fc">&nbsp;        return getArmorForReal(loc, rear);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getArmorForReal(int loc, boolean rear) {
<b class="fc">&nbsp;        if (rear &amp;&amp; hasRearArmor(loc)) {</b>
<b class="fc">&nbsp;            return rearArmor[loc];</b>
&nbsp;        }
<b class="fc">&nbsp;        return super.getArmorForReal(loc, rear);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the original amount of armor in the location specified. Mech
&nbsp;     * version, handles rear armor.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getOArmor(int loc, boolean rear) {
<b class="fc">&nbsp;        if (rear &amp;&amp; hasRearArmor(loc)) {</b>
<b class="fc">&nbsp;            return orig_rearArmor[loc];</b>
&nbsp;        }
<b class="fc">&nbsp;        return super.getOArmor(loc, rear);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the amount of armor in the location specified. Mech version, handles
&nbsp;     * rear armor.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void setArmor(int val, int loc, boolean rear) {
<b class="fc">&nbsp;        if (rear &amp;&amp; hasRearArmor(loc)) {</b>
<b class="fc">&nbsp;            rearArmor[loc] = val;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            super.setArmor(val, loc, rear);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Initializes the rear armor on the mech. Sets the original and starting
&nbsp;     * point of the armor to the same number.
&nbsp;     */
&nbsp;    public void initializeRearArmor(int val, int loc) {
<b class="fc">&nbsp;        orig_rearArmor[loc] = val;</b>
<b class="fc">&nbsp;        setArmor(val, loc, true);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void setHardenedArmorDamaged(HitData hit, boolean damaged) {
<b class="nc">&nbsp;        if (hit.isRear() &amp;&amp; hasRearArmor(hit.getLocation())) {</b>
<b class="nc">&nbsp;            rearHardenedArmorDamaged[hit.getLocation()] = damaged;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            hardenedArmorDamaged[hit.getLocation()] = damaged;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isHardenedArmorDamaged(HitData hit) {
<b class="nc">&nbsp;        if (hit.isRear() &amp;&amp; hasRearArmor(hit.getLocation())) {</b>
<b class="nc">&nbsp;            return rearHardenedArmorDamaged[hit.getLocation()];</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return hardenedArmorDamaged[hit.getLocation()];</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * did the armor in this location take damage which did not destroy it
&nbsp;     * at least once this turn?
&nbsp;     * this is used to decide whether to trigger Harjel II/III
&nbsp;     */
&nbsp;    public void setArmorDamagedThisTurn(int loc, boolean tookdamage) {
<b class="fc">&nbsp;        armorDamagedThisTurn[loc] = tookdamage;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * did the armor in this location take damage which did not destroy it
&nbsp;     * at least once this turn?
&nbsp;     * this is used to decide whether to trigger Harjel II/III
&nbsp;     */
&nbsp;    public boolean isArmorDamagedThisTurn(int loc) {
<b class="nc">&nbsp;        return armorDamagedThisTurn[loc];</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the Compute.ARC that the weapon fires into.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getWeaponArc(int wn) {
<b class="nc">&nbsp;        final Mounted mounted = getEquipment(wn);</b>
&nbsp;
&nbsp;        // B-Pods need to be special-cased, the have 360 firing arc
<b class="nc">&nbsp;        if ((mounted.getType() instanceof WeaponType)</b>
<b class="nc">&nbsp;                &amp;&amp; mounted.getType().hasFlag(WeaponType.F_B_POD)) {</b>
<b class="nc">&nbsp;            return Compute.ARC_360;</b>
&nbsp;        }
&nbsp;        // VGLs base arc on their facing
<b class="nc">&nbsp;        if (mounted.getType().hasFlag(WeaponType.F_VGL)) {</b>
<b class="nc">&nbsp;            return Compute.firingArcFromVGLFacing(mounted.getFacing());</b>
&nbsp;        }
&nbsp;        // rear mounted?
<b class="nc">&nbsp;        if (mounted.isRearMounted()) {</b>
<b class="nc">&nbsp;            return Compute.ARC_REAR;</b>
&nbsp;        }
&nbsp;        // front mounted
<b class="nc">&nbsp;        switch (mounted.getLocation()) {</b>
&nbsp;            case LOC_HEAD:
&nbsp;            case LOC_CT:
&nbsp;            case LOC_RT:
&nbsp;            case LOC_LT:
&nbsp;            case LOC_RLEG:
&nbsp;            case LOC_LLEG:
<b class="nc">&nbsp;                return Compute.ARC_FORWARD;</b>
&nbsp;            case LOC_RARM:
<b class="nc">&nbsp;                return getArmsFlipped() ? Compute.ARC_REAR</b>
<b class="nc">&nbsp;                        : Compute.ARC_RIGHTARM;</b>
&nbsp;            case LOC_LARM:
<b class="nc">&nbsp;                return getArmsFlipped() ? Compute.ARC_REAR</b>
<b class="nc">&nbsp;                        : Compute.ARC_LEFTARM;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return Compute.ARC_360;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns true if this weapon fires into the secondary facing arc. If
&nbsp;     * false, assume it fires into the primary.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isSecondaryArcWeapon(int weaponId) {
&nbsp;        // leg-mounted weapons fire into the primary arc, always
<b class="nc">&nbsp;        if ((getEquipment(weaponId).getLocation() == LOC_RLEG)</b>
<b class="nc">&nbsp;                || (getEquipment(weaponId).getLocation() == LOC_LLEG)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;        // other weapons into the secondary
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#rollHitLocation(int, int)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public HitData rollHitLocation(int table, int side) {
<b class="nc">&nbsp;        return rollHitLocation(table, side, LOC_NONE,</b>
&nbsp;                IAimingModes.AIM_MODE_NONE, LosEffects.COVER_NONE);
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#rollHitLocation(int, int, int, int)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public HitData rollHitLocation(int table, int side, int aimedLocation,
&nbsp;            int aimingMode, int cover) {
<b class="nc">&nbsp;        int roll = -1;</b>
&nbsp;
<b class="nc">&nbsp;        if ((aimedLocation != LOC_NONE)</b>
&nbsp;                &amp;&amp; (aimingMode != IAimingModes.AIM_MODE_NONE)) {
&nbsp;
<b class="nc">&nbsp;            roll = Compute.d6(2);</b>
&nbsp;
<b class="nc">&nbsp;            if ((5 &lt; roll) &amp;&amp; (roll &lt; 9)) {</b>
<b class="nc">&nbsp;                return new HitData(aimedLocation, side == ToHitData.SIDE_REAR,</b>
&nbsp;                        true);
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((table == ToHitData.HIT_NORMAL)</b>
&nbsp;                || (table == ToHitData.HIT_PARTIAL_COVER)) {
<b class="nc">&nbsp;            roll = Compute.d6(2);</b>
&nbsp;            try {
<b class="nc">&nbsp;                PrintWriter pw = PreferenceManager.getClientPreferences()</b>
<b class="nc">&nbsp;                        .getMekHitLocLog();</b>
<b class="nc">&nbsp;                if (pw != null) {</b>
<b class="nc">&nbsp;                    pw.print(table);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.print(side);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.println(roll);</b>
&nbsp;                }
<b class="nc">&nbsp;            } catch (Throwable thrown) {</b>
<b class="nc">&nbsp;                thrown.printStackTrace();</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_FRONT) {</b>
&nbsp;                // normal front hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        if ((getCrew().hasEdgeRemaining() &amp;&amp; getCrew()</b>
<b class="nc">&nbsp;                                .getOptions().booleanOption(OptionsConstants.EDGE_WHEN_TAC))</b>
<b class="nc">&nbsp;                                &amp;&amp; !game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_NO_TAC)) {</b>
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(tac(table, side,</b>
&nbsp;                                    Mech.LOC_CT, cover, false));
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return tac(table, side, Mech.LOC_CT, cover, false);</b>
&nbsp;                    case 3:
&nbsp;                    case 4:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RARM);</b>
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RLEG);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RT);</b>
&nbsp;                    case 7:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT);</b>
&nbsp;                    case 8:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LT);</b>
&nbsp;                    case 9:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LLEG);</b>
&nbsp;                    case 10:
&nbsp;                    case 11:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LARM);</b>
&nbsp;                    case 12:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD));</b>
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD);</b>
&nbsp;                }
<b class="nc">&nbsp;            } else if (side == ToHitData.SIDE_LEFT) {</b>
&nbsp;                // normal left side hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        if ((getCrew().hasEdgeRemaining() &amp;&amp; getCrew()</b>
<b class="nc">&nbsp;                                .getOptions().booleanOption(OptionsConstants.EDGE_WHEN_TAC))</b>
<b class="nc">&nbsp;                                &amp;&amp; !game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_NO_TAC)) {</b>
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(tac(table, side,</b>
&nbsp;                                    Mech.LOC_LT, cover, false));
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return tac(table, side, Mech.LOC_LT, cover, false);</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LLEG);</b>
&nbsp;                    case 4:
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LARM);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LLEG);</b>
&nbsp;                    case 7:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LT);</b>
&nbsp;                    case 8:
<b class="nc">&nbsp;                        if (game.getOptions().booleanOption(</b>
&nbsp;                                OptionsConstants.ADVCOMBAT_TACOPS_ADVANCED_MECH_HIT_LOCATIONS)) {
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_CT, true);</b>
&nbsp;                        }
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT);</b>
&nbsp;                    case 9:
<b class="nc">&nbsp;                        if (game.getOptions().booleanOption(</b>
&nbsp;                                OptionsConstants.ADVCOMBAT_TACOPS_ADVANCED_MECH_HIT_LOCATIONS)) {
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RT, true);</b>
&nbsp;                        }
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RT);</b>
&nbsp;                    case 10:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RARM);</b>
&nbsp;                    case 11:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RLEG);</b>
&nbsp;                    case 12:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD));</b>
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD);</b>
&nbsp;                }
<b class="nc">&nbsp;            } else if (side == ToHitData.SIDE_RIGHT) {</b>
&nbsp;                // normal right side hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        if ((getCrew().hasEdgeRemaining() &amp;&amp; getCrew()</b>
<b class="nc">&nbsp;                                .getOptions().booleanOption(OptionsConstants.EDGE_WHEN_TAC))</b>
<b class="nc">&nbsp;                                &amp;&amp; !game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_NO_TAC)) {</b>
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(tac(table, side,</b>
&nbsp;                                    Mech.LOC_RT, cover, false));
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return tac(table, side, Mech.LOC_RT, cover, false);</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RLEG);</b>
&nbsp;                    case 4:
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RARM);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RLEG);</b>
&nbsp;                    case 7:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RT);</b>
&nbsp;                    case 8:
<b class="nc">&nbsp;                        if (game.getOptions().booleanOption(</b>
&nbsp;                                OptionsConstants.ADVCOMBAT_TACOPS_ADVANCED_MECH_HIT_LOCATIONS)) {
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_CT, true);</b>
&nbsp;                        }
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT);</b>
&nbsp;                    case 9:
<b class="nc">&nbsp;                        if (game.getOptions().booleanOption(</b>
&nbsp;                                OptionsConstants.ADVCOMBAT_TACOPS_ADVANCED_MECH_HIT_LOCATIONS)) {
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LT, true);</b>
&nbsp;                        }
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LT);</b>
&nbsp;                    case 10:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LARM);</b>
&nbsp;                    case 11:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LLEG);</b>
&nbsp;                    case 12:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD));</b>
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD);</b>
&nbsp;                }
<b class="nc">&nbsp;            } else if (side == ToHitData.SIDE_REAR) {</b>
&nbsp;                // normal rear hits
<b class="nc">&nbsp;                if (game.getOptions().booleanOption(</b>
&nbsp;                        OptionsConstants.ADVCOMBAT_TACOPS_ADVANCED_MECH_HIT_LOCATIONS)
<b class="nc">&nbsp;                        &amp;&amp; isProne()) {</b>
<b class="nc">&nbsp;                    switch (roll) {</b>
&nbsp;                        case 2:
<b class="nc">&nbsp;                            if ((getCrew().hasEdgeRemaining() &amp;&amp; getCrew()</b>
<b class="nc">&nbsp;                                    .getOptions()</b>
<b class="nc">&nbsp;                                    .booleanOption(OptionsConstants.EDGE_WHEN_TAC))</b>
<b class="nc">&nbsp;                                    &amp;&amp; !game.getOptions().booleanOption(</b>
&nbsp;                                            OptionsConstants.ADVCOMBAT_NO_TAC)) {
<b class="nc">&nbsp;                                getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                                HitData result = rollHitLocation(table, side,</b>
&nbsp;                                        aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                                result.setUndoneLocation(tac(table, side,</b>
&nbsp;                                        Mech.LOC_CT, cover, true));
<b class="nc">&nbsp;                                return result;</b>
&nbsp;                            } // if
<b class="nc">&nbsp;                            return tac(table, side, Mech.LOC_CT, cover, true);</b>
&nbsp;                        case 3:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RARM, true);</b>
&nbsp;                        case 4:
&nbsp;                        case 5:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RLEG, true);</b>
&nbsp;                        case 6:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RT, true);</b>
&nbsp;                        case 7:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_CT, true);</b>
&nbsp;                        case 8:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LT, true);</b>
&nbsp;                        case 9:
&nbsp;                        case 10:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LLEG, true);</b>
&nbsp;                        case 11:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LARM, true);</b>
&nbsp;                        case 12:
<b class="nc">&nbsp;                            if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                    &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                            OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                                getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                                HitData result = rollHitLocation(table, side,</b>
&nbsp;                                        aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                                result.setUndoneLocation(new HitData(</b>
&nbsp;                                        Mech.LOC_HEAD, true));
<b class="nc">&nbsp;                                return result;</b>
&nbsp;                            } // if
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_HEAD, true);</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    switch (roll) {</b>
&nbsp;                        case 2:
<b class="nc">&nbsp;                            if ((getCrew().hasEdgeRemaining() &amp;&amp; getCrew()</b>
<b class="nc">&nbsp;                                    .getOptions()</b>
<b class="nc">&nbsp;                                    .booleanOption(OptionsConstants.EDGE_WHEN_TAC))</b>
<b class="nc">&nbsp;                                    &amp;&amp; !game.getOptions().booleanOption(</b>
&nbsp;                                            OptionsConstants.ADVCOMBAT_NO_TAC)) {
<b class="nc">&nbsp;                                getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                                HitData result = rollHitLocation(table, side,</b>
&nbsp;                                        aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                                result.setUndoneLocation(tac(table, side,</b>
&nbsp;                                        Mech.LOC_CT, cover, true));
<b class="nc">&nbsp;                                return result;</b>
&nbsp;                            } // if
<b class="nc">&nbsp;                            return tac(table, side, Mech.LOC_CT, cover, true);</b>
&nbsp;                        case 3:
&nbsp;                        case 4:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RARM, true);</b>
&nbsp;                        case 5:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RLEG, true);</b>
&nbsp;                        case 6:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_RT, true);</b>
&nbsp;                        case 7:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_CT, true);</b>
&nbsp;                        case 8:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LT, true);</b>
&nbsp;                        case 9:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LLEG, true);</b>
&nbsp;                        case 10:
&nbsp;                        case 11:
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_LARM, true);</b>
&nbsp;                        case 12:
<b class="nc">&nbsp;                            if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                    &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                            OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                                getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                                HitData result = rollHitLocation(table, side,</b>
&nbsp;                                        aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                                result.setUndoneLocation(new HitData(</b>
&nbsp;                                        Mech.LOC_HEAD, true));
<b class="nc">&nbsp;                                return result;</b>
&nbsp;                            } // if
<b class="nc">&nbsp;                            return new HitData(Mech.LOC_HEAD, true);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (table == ToHitData.HIT_PUNCH) {</b>
<b class="nc">&nbsp;            roll = Compute.d6(1);</b>
&nbsp;            try {
<b class="nc">&nbsp;                PrintWriter pw = PreferenceManager.getClientPreferences()</b>
<b class="nc">&nbsp;                        .getMekHitLocLog();</b>
<b class="nc">&nbsp;                if (pw != null) {</b>
<b class="nc">&nbsp;                    pw.print(table);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.print(side);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.println(roll);</b>
&nbsp;                }
<b class="nc">&nbsp;            } catch (Throwable thrown) {</b>
<b class="nc">&nbsp;                thrown.printStackTrace();</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_FRONT) {</b>
&nbsp;                // front punch hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 1:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LARM);</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LT);</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT);</b>
&nbsp;                    case 4:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RT);</b>
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RARM);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD));</b>
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_LEFT) {</b>
&nbsp;                // left side punch hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 1:
&nbsp;                    case 2:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LT);</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT);</b>
&nbsp;                    case 4:
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LARM);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD));</b>
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_RIGHT) {</b>
&nbsp;                // right side punch hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 1:
&nbsp;                    case 2:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RT);</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT);</b>
&nbsp;                    case 4:
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RARM);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD));</b>
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_REAR) {</b>
&nbsp;                // rear punch hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 1:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LARM, true);</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LT, true);</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_CT, true);</b>
&nbsp;                    case 4:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RT, true);</b>
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RARM, true);</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                                &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                        OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                            getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                            HitData result = rollHitLocation(table, side,</b>
&nbsp;                                    aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                            result.setUndoneLocation(new HitData(Mech.LOC_HEAD,</b>
&nbsp;                                    true));
<b class="nc">&nbsp;                            return result;</b>
&nbsp;                        } // if
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_HEAD, true);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (table == ToHitData.HIT_KICK) {</b>
<b class="nc">&nbsp;            roll = Compute.d6(1);</b>
&nbsp;            try {
<b class="nc">&nbsp;                PrintWriter pw = PreferenceManager.getClientPreferences()</b>
<b class="nc">&nbsp;                        .getMekHitLocLog();</b>
<b class="nc">&nbsp;                if (pw != null) {</b>
<b class="nc">&nbsp;                    pw.print(table);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.print(side);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.println(roll);</b>
&nbsp;                }
<b class="nc">&nbsp;            } catch (Throwable thrown) {</b>
<b class="nc">&nbsp;                thrown.printStackTrace();</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if ((side == ToHitData.SIDE_FRONT) || (side == ToHitData.SIDE_REAR)) {</b>
&nbsp;                // front/rear kick hits
<b class="nc">&nbsp;                switch (roll) {</b>
&nbsp;                    case 1:
&nbsp;                    case 2:
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_RLEG,</b>
&nbsp;                                (side == ToHitData.SIDE_REAR));
&nbsp;                    case 4:
&nbsp;                    case 5:
&nbsp;                    case 6:
<b class="nc">&nbsp;                        return new HitData(Mech.LOC_LLEG,</b>
&nbsp;                                (side == ToHitData.SIDE_REAR));
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_LEFT) {</b>
&nbsp;                // left side kick hits
<b class="nc">&nbsp;                return new HitData(Mech.LOC_LLEG);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (side == ToHitData.SIDE_RIGHT) {</b>
&nbsp;                // right side kick hits
<b class="nc">&nbsp;                return new HitData(Mech.LOC_RLEG);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if ((table == ToHitData.HIT_SWARM)</b>
&nbsp;                || (table == ToHitData.HIT_SWARM_CONVENTIONAL)) {
<b class="nc">&nbsp;            roll = Compute.d6(2);</b>
&nbsp;            int effects;
<b class="nc">&nbsp;            if (table == ToHitData.HIT_SWARM_CONVENTIONAL) {</b>
<b class="nc">&nbsp;                effects = HitData.EFFECT_NONE;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                effects = HitData.EFFECT_CRITICAL;</b>
&nbsp;            }
&nbsp;            try {
<b class="nc">&nbsp;                PrintWriter pw = PreferenceManager.getClientPreferences()</b>
<b class="nc">&nbsp;                        .getMekHitLocLog();</b>
<b class="nc">&nbsp;                if (pw != null) {</b>
<b class="nc">&nbsp;                    pw.print(table);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.print(side);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.println(roll);</b>
&nbsp;                }
<b class="nc">&nbsp;            } catch (Throwable thrown) {</b>
<b class="nc">&nbsp;                thrown.printStackTrace();</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            // Swarm attack locations.
<b class="nc">&nbsp;            switch (roll) {</b>
&nbsp;                case 2:
<b class="nc">&nbsp;                    if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                            &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                    OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                        getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                        HitData result = rollHitLocation(table, side,</b>
&nbsp;                                aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                        result.setUndoneLocation(new HitData(Mech.LOC_HEAD,</b>
&nbsp;                                false, effects));
<b class="nc">&nbsp;                        return result;</b>
&nbsp;                    } // if
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_HEAD, false, effects);</b>
&nbsp;                case 3:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_CT, true, effects);</b>
&nbsp;                case 4:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RT, true, effects);</b>
&nbsp;                case 5:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RT, false, effects);</b>
&nbsp;                case 6:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RARM, false, effects);</b>
&nbsp;                case 7:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_CT, false, effects);</b>
&nbsp;                case 8:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LARM, false, effects);</b>
&nbsp;                case 9:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LT, false, effects);</b>
&nbsp;                case 10:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LT, true, effects);</b>
&nbsp;                case 11:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_CT, true, effects);</b>
&nbsp;                case 12:
<b class="nc">&nbsp;                    if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                            &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                    OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                        getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                        HitData result = rollHitLocation(table, side,</b>
&nbsp;                                aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                        result.setUndoneLocation(new HitData(Mech.LOC_HEAD,</b>
&nbsp;                                false, effects));
<b class="nc">&nbsp;                        return result;</b>
&nbsp;                    } // if
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_HEAD, false, effects);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (table == ToHitData.HIT_ABOVE) {</b>
<b class="nc">&nbsp;            roll = Compute.d6(1);</b>
&nbsp;            try {
<b class="nc">&nbsp;                PrintWriter pw = PreferenceManager.getClientPreferences()</b>
<b class="nc">&nbsp;                        .getMekHitLocLog();</b>
<b class="nc">&nbsp;                if (pw != null) {</b>
<b class="nc">&nbsp;                    pw.print(table);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.print(side);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.println(roll);</b>
&nbsp;                }
<b class="nc">&nbsp;            } catch (Throwable thrown) {</b>
<b class="nc">&nbsp;                thrown.printStackTrace();</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            // Hits from above.
<b class="nc">&nbsp;            switch (roll) {</b>
&nbsp;                case 1:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LARM,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 2:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LT,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 3:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_CT,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 4:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RT,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 5:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RARM,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 6:
<b class="nc">&nbsp;                    if (getCrew().hasEdgeRemaining()</b>
<b class="nc">&nbsp;                            &amp;&amp; getCrew().getOptions().booleanOption(</b>
&nbsp;                                    OptionsConstants.EDGE_WHEN_HEADHIT)) {
<b class="nc">&nbsp;                        getCrew().decreaseEdge();</b>
<b class="nc">&nbsp;                        HitData result = rollHitLocation(table, side,</b>
&nbsp;                                aimedLocation, aimingMode, cover);
<b class="nc">&nbsp;                        result.setUndoneLocation(new HitData(Mech.LOC_HEAD,</b>
&nbsp;                                (side == ToHitData.SIDE_REAR)));
<b class="nc">&nbsp;                        return result;</b>
&nbsp;                    } // if
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_HEAD,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (table == ToHitData.HIT_BELOW) {</b>
<b class="nc">&nbsp;            roll = Compute.d6(1);</b>
&nbsp;            try {
<b class="nc">&nbsp;                PrintWriter pw = PreferenceManager.getClientPreferences()</b>
<b class="nc">&nbsp;                        .getMekHitLocLog();</b>
<b class="nc">&nbsp;                if (pw != null) {</b>
<b class="nc">&nbsp;                    pw.print(table);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.print(side);</b>
<b class="nc">&nbsp;                    pw.print(&quot;\t&quot;);</b>
<b class="nc">&nbsp;                    pw.println(roll);</b>
&nbsp;                }
<b class="nc">&nbsp;            } catch (Throwable thrown) {</b>
<b class="nc">&nbsp;                thrown.printStackTrace();</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            // Hits from below.
<b class="nc">&nbsp;            switch (roll) {</b>
&nbsp;                case 1:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LLEG,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 2:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LLEG,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 3:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_LT,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 4:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RT,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 5:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RLEG,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;                case 6:
<b class="nc">&nbsp;                    return new HitData(Mech.LOC_RLEG,</b>
&nbsp;                            (side == ToHitData.SIDE_REAR));
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Called when a thru-armor-crit is rolled. Checks the game options and
&nbsp;     * either returns no critical hit, rolls a floating crit, or returns a TAC
&nbsp;     * in the specified location.
&nbsp;     */
&nbsp;    protected HitData tac(int table, int side, int location, int cover,
&nbsp;            boolean rear) {
<b class="nc">&nbsp;        if (game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_NO_TAC)) {</b>
<b class="nc">&nbsp;            return new HitData(location, rear);</b>
<b class="nc">&nbsp;        } else if (game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_FLOATING_CRITS)) {</b>
<b class="nc">&nbsp;            HitData hd = rollHitLocation(table, side);</b>
&nbsp;            // check for cover and keep rolling until you get something without
&nbsp;            // cover
<b class="nc">&nbsp;            int i = 0;</b>
<b class="nc">&nbsp;            while (removePartialCoverHits(hd.getLocation(), cover, side)</b>
&nbsp;                    &amp;&amp; (i &lt; 500)) {
<b class="nc">&nbsp;                hd = rollHitLocation(table, side);</b>
<b class="nc">&nbsp;                i++;</b>
&nbsp;            }
<b class="nc">&nbsp;            return new HitData(hd.getLocation(), hd.isRear(),</b>
&nbsp;                    HitData.EFFECT_CRITICAL);
&nbsp;        } else {
<b class="nc">&nbsp;            return new HitData(location, rear, HitData.EFFECT_CRITICAL);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the location that excess damage transfers to
&nbsp;     */
&nbsp;    @Override
&nbsp;    public HitData getTransferLocation(HitData hit) {
<b class="nc">&nbsp;        switch (hit.getLocation()) {</b>
&nbsp;            case LOC_RT:
&nbsp;            case LOC_LT:
&nbsp;            case LOC_CLEG:
<b class="nc">&nbsp;                return new HitData(LOC_CT, hit.isRear(), hit.getEffect(),</b>
<b class="nc">&nbsp;                        hit.hitAimedLocation(), hit.getSpecCritMod(),</b>
<b class="nc">&nbsp;                        hit.getSpecCrit(), hit.isFromFront(),</b>
<b class="nc">&nbsp;                        hit.getGeneralDamageType(), hit.glancingMod());</b>
&nbsp;            case LOC_LLEG:
&nbsp;            case LOC_LARM:
<b class="nc">&nbsp;                return new HitData(LOC_LT, hit.isRear(), hit.getEffect(),</b>
<b class="nc">&nbsp;                        hit.hitAimedLocation(), hit.getSpecCritMod(),</b>
<b class="nc">&nbsp;                        hit.getSpecCrit(), hit.isFromFront(),</b>
<b class="nc">&nbsp;                        hit.getGeneralDamageType(), hit.glancingMod());</b>
&nbsp;            case LOC_RLEG:
&nbsp;            case LOC_RARM:
<b class="nc">&nbsp;                return new HitData(LOC_RT, hit.isRear(), hit.getEffect(),</b>
<b class="nc">&nbsp;                        hit.hitAimedLocation(), hit.getSpecCritMod(),</b>
<b class="nc">&nbsp;                        hit.getSpecCrit(), hit.isFromFront(),</b>
<b class="nc">&nbsp;                        hit.getGeneralDamageType(), hit.glancingMod());</b>
&nbsp;            case LOC_HEAD:
<b class="nc">&nbsp;                if (getCockpitType() == COCKPIT_TORSO_MOUNTED) {</b>
<b class="nc">&nbsp;                    return new HitData(LOC_NONE); // not destroyed by head loss</b>
&nbsp;                }
<b class="nc">&nbsp;                return new HitData(LOC_DESTROYED);</b>
&nbsp;            case LOC_CT:
&nbsp;            default:
<b class="nc">&nbsp;                return new HitData(LOC_DESTROYED);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the location that is destroyed recursively
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getDependentLocation(int loc) {
<b class="nc">&nbsp;        switch (loc) {</b>
&nbsp;            case LOC_RT:
<b class="nc">&nbsp;                return LOC_RARM;</b>
&nbsp;            case LOC_LT:
<b class="nc">&nbsp;                return LOC_LARM;</b>
&nbsp;            case LOC_LLEG:
&nbsp;            case LOC_LARM:
&nbsp;            case LOC_RLEG:
&nbsp;            case LOC_RARM:
&nbsp;            case LOC_HEAD:
&nbsp;            case LOC_CT:
&nbsp;            default:
<b class="nc">&nbsp;                return LOC_NONE;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the internal structure for the mech.
&nbsp;     *
&nbsp;     * @param head
&nbsp;     *            head
&nbsp;     * @param ct
&nbsp;     *            center torso
&nbsp;     * @param t
&nbsp;     *            right/left torso
&nbsp;     * @param arm
&nbsp;     *            right/left arm
&nbsp;     * @param leg
&nbsp;     *            right/left leg
&nbsp;     */
&nbsp;    public abstract void setInternal(int head, int ct, int t, int arm, int leg);
&nbsp;
&nbsp;    /**
&nbsp;     * Set the internal structure to the appropriate value for the mech&#39;s weight
&nbsp;     * class
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void autoSetInternal() {
&nbsp;        // stupid irregular table... grr.
<b class="fc">&nbsp;        switch ((int) weight) {</b>
&nbsp;        // H, CT,TSO,ARM,LEG
&nbsp;            case 10:
<b class="nc">&nbsp;                setInternal(3, 4, 3, 1, 2);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 15:
<b class="nc">&nbsp;                setInternal(3, 5, 4, 2, 3);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 20:
<b class="fc">&nbsp;                setInternal(3, 6, 5, 3, 4);</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 25:
<b class="fc">&nbsp;                setInternal(3, 8, 6, 4, 6);</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 30:
<b class="nc">&nbsp;                setInternal(3, 10, 7, 5, 7);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 35:
<b class="fc">&nbsp;                setInternal(3, 11, 8, 6, 8);</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 40:
<b class="nc">&nbsp;                setInternal(3, 12, 10, 6, 10);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 45:
<b class="nc">&nbsp;                setInternal(3, 14, 11, 7, 11);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 50:
<b class="nc">&nbsp;                setInternal(3, 16, 12, 8, 12);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 55:
<b class="nc">&nbsp;                setInternal(3, 18, 13, 9, 13);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 60:
<b class="nc">&nbsp;                setInternal(3, 20, 14, 10, 14);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 65:
<b class="fc">&nbsp;                setInternal(3, 21, 15, 10, 15);</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 70:
<b class="fc">&nbsp;                setInternal(3, 22, 15, 11, 15);</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 75:
<b class="nc">&nbsp;                setInternal(3, 23, 16, 12, 16);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 80:
<b class="nc">&nbsp;                setInternal(3, 25, 17, 13, 17);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 85:
<b class="nc">&nbsp;                setInternal(3, 27, 18, 14, 18);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 90:
<b class="nc">&nbsp;                setInternal(3, 29, 19, 15, 19);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 95:
<b class="nc">&nbsp;                setInternal(3, 30, 20, 16, 20);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 100:
<b class="nc">&nbsp;                setInternal(3, 31, 21, 17, 21);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 105:
<b class="nc">&nbsp;                setInternal(4, 32, 22, 17, 22);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 110:
<b class="nc">&nbsp;                setInternal(4, 33, 23, 18, 23);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 115:
<b class="nc">&nbsp;                setInternal(4, 35, 24, 19, 24);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 120:
<b class="fc">&nbsp;                setInternal(4, 36, 25, 20, 25);</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 125:
<b class="nc">&nbsp;                setInternal(4, 38, 26, 21, 26);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 130:
<b class="nc">&nbsp;                setInternal(4, 39, 27, 21, 27);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 135:
<b class="nc">&nbsp;                setInternal(4, 41, 28, 22, 28);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 140:
<b class="nc">&nbsp;                setInternal(4, 42, 29, 23, 29);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 145:
<b class="nc">&nbsp;                setInternal(4, 44, 31, 24, 31);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 150:
<b class="nc">&nbsp;                setInternal(4, 45, 32, 25, 32);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 155:
<b class="nc">&nbsp;                setInternal(4, 47, 33, 26, 33);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 160:
<b class="nc">&nbsp;                setInternal(4, 48, 34, 26, 34);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 165:
<b class="nc">&nbsp;                setInternal(4, 50, 35, 27, 35);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 170:
<b class="nc">&nbsp;                setInternal(4, 51, 36, 28, 36);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 175:
<b class="nc">&nbsp;                setInternal(4, 53, 37, 29, 37);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 180:
<b class="nc">&nbsp;                setInternal(4, 54, 38, 30, 38);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 185:
<b class="nc">&nbsp;                setInternal(4, 56, 39, 31, 39);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 190:
<b class="nc">&nbsp;                setInternal(4, 57, 40, 31, 40);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 195:
<b class="nc">&nbsp;                setInternal(4, 59, 41, 32, 41);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 200:
<b class="nc">&nbsp;                setInternal(4, 60, 42, 33, 42);</b>
&nbsp;                break;
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds clan CASE in every location
&nbsp;     */
&nbsp;    public void addClanCase() {
<b class="nc">&nbsp;        boolean explosiveFound = false;</b>
<b class="nc">&nbsp;        EquipmentType clCase = EquipmentType.get(EquipmentTypeLookup.CLAN_CASE);</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="nc">&nbsp;            explosiveFound = false;</b>
<b class="nc">&nbsp;            for (Mounted m : getEquipment()) {</b>
<b class="nc">&nbsp;                if (m.getType().isExplosive(m) &amp;&amp; (m.getLocation() == i)) {</b>
<b class="nc">&nbsp;                    explosiveFound = true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (explosiveFound) {</b>
&nbsp;                try {
<b class="nc">&nbsp;                    addEquipment(new Mounted(this, clCase), i, false);</b>
<b class="nc">&nbsp;                } catch (LocationFullException ex) {</b>
&nbsp;                    // um, that&#39;s impossible.
<b class="nc">&nbsp;                }</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public Mounted addEquipment(EquipmentType etype, EquipmentType etype2,
&nbsp;            int loc,  boolean omniPod, boolean armored) throws LocationFullException {
<b class="fc">&nbsp;        Mounted mounted = new Mounted(this, etype);</b>
<b class="fc">&nbsp;        Mounted mounted2 = new Mounted(this, etype2);</b>
<b class="fc">&nbsp;        mounted.setOmniPodMounted(omniPod);</b>
<b class="fc">&nbsp;        mounted2.setOmniPodMounted(omniPod);</b>
<b class="fc">&nbsp;        mounted.setArmored(armored);</b>
<b class="fc">&nbsp;        mounted2.setArmored(armored);</b>
&nbsp;        // check criticals for space
<b class="fc">&nbsp;        if (getEmptyCriticals(loc) &lt; 1) {</b>
<b class="nc">&nbsp;            throw new LocationFullException(mounted.getName() + &quot; and &quot;</b>
<b class="nc">&nbsp;                    + mounted2.getName() + &quot; do not fit in &quot;</b>
<b class="nc">&nbsp;                    + getLocationAbbr(loc) + &quot; on &quot; + getDisplayName()</b>
&nbsp;                    + &quot;\n        free criticals in location: &quot;
<b class="nc">&nbsp;                    + getEmptyCriticals(loc) + &quot;, criticals needed: &quot; + 1);</b>
&nbsp;        }
<b class="fc">&nbsp;        super.addEquipment(mounted, loc, false);</b>
<b class="fc">&nbsp;        super.addEquipment(mounted2, loc, false);</b>
<b class="fc">&nbsp;        CriticalSlot cs = new CriticalSlot(mounted);</b>
<b class="fc">&nbsp;        cs.setMount2(mounted2);</b>
<b class="fc">&nbsp;        addCritical(loc, cs);</b>
<b class="fc">&nbsp;        return mounted;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Mounts the specified weapon in the specified location.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void addEquipment(Mounted mounted, int loc, boolean rearMounted)
&nbsp;            throws LocationFullException {
<b class="fc">&nbsp;        addEquipment(mounted,loc,rearMounted,-1);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Mounts the specified weapon in the specified location.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void addEquipment(Mounted mounted, int loc, boolean rearMounted,
&nbsp;            int critSlot)
&nbsp;            throws LocationFullException {
&nbsp;        // if there&#39;s no actual location or this is a LAM capital fighter weapons group,
&nbsp;        // or ammo for a LAM bomb weapon then don&#39;t add criticals
<b class="fc">&nbsp;        if ((loc == LOC_NONE) || mounted.isWeaponGroup()</b>
<b class="fc">&nbsp;                || (mounted.getType() instanceof BombType)) {</b>
<b class="fc">&nbsp;            super.addEquipment(mounted, loc, rearMounted);</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
&nbsp;        // spreadable or split equipment only gets added to 1 crit at a time,
&nbsp;        // since we don&#39;t know how many are in this location
<b class="fc">&nbsp;        int reqSlots = mounted.getCriticals();</b>
<b class="fc">&nbsp;        if (mounted.getType().isSpreadable() || mounted.isSplitable()) {</b>
<b class="nc">&nbsp;            reqSlots = 1;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (isSuperHeavy()) {</b>
<b class="nc">&nbsp;            reqSlots = (int) Math.ceil(((double) reqSlots / 2.0f));</b>
&nbsp;        }
&nbsp;        // gauss and AC weapons on omni arms means no arm actuators, so we
&nbsp;        // remove them
<b class="fc">&nbsp;        if (isOmni()</b>
&nbsp;                &amp;&amp; (this instanceof BipedMech)
&nbsp;                &amp;&amp; ((loc == LOC_LARM) || (loc == LOC_RARM))
<b class="nc">&nbsp;                &amp;&amp; ((mounted.getType() instanceof GaussWeapon)</b>
<b class="nc">&nbsp;                        || (mounted.getType() instanceof ACWeapon)</b>
<b class="nc">&nbsp;                        || (mounted.getType() instanceof UACWeapon)</b>
<b class="nc">&nbsp;                        || (mounted.getType() instanceof LBXACWeapon) || (mounted</b>
<b class="nc">&nbsp;                            .getType() instanceof PPCWeapon))) {</b>
<b class="nc">&nbsp;            if (hasSystem(Mech.ACTUATOR_LOWER_ARM, loc)) {</b>
<b class="nc">&nbsp;                setCritical(loc, 2, null);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (hasSystem(Mech.ACTUATOR_HAND, loc)) {</b>
<b class="nc">&nbsp;                setCritical(loc, 3, null);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // check criticals for space
<b class="fc">&nbsp;        if (getEmptyCriticals(loc) &lt; reqSlots) {</b>
<b class="nc">&nbsp;            throw new LocationFullException(mounted.getName()</b>
<b class="nc">&nbsp;                    + &quot; does not fit in &quot; + getLocationAbbr(loc) + &quot; on &quot;</b>
<b class="nc">&nbsp;                    + getDisplayName()</b>
&nbsp;                    + &quot;\n        free criticals in location: &quot;
<b class="nc">&nbsp;                    + getEmptyCriticals(loc) + &quot;, criticals needed: &quot;</b>
&nbsp;                    + reqSlots);
&nbsp;        }
&nbsp;        // add it
<b class="fc">&nbsp;        if (getEquipmentNum(mounted) == -1) {</b>
<b class="fc">&nbsp;            super.addEquipment(mounted, loc, rearMounted);</b>
&nbsp;        }
&nbsp;
&nbsp;        // add criticals
<b class="fc">&nbsp;        if (critSlot == -1){</b>
<b class="fc">&nbsp;            for (int i = 0; i &lt; reqSlots; i++) {</b>
<b class="fc">&nbsp;                CriticalSlot cs = new CriticalSlot(mounted);</b>
<b class="fc">&nbsp;                addCritical(loc, cs);</b>
&nbsp;            }
&nbsp;        } else {
&nbsp;            // Need to ensure that we have enough contiguous critical slots
<b class="nc">&nbsp;            int iterations = 0;</b>
<b class="nc">&nbsp;            while ((getContiguousNumberOfCrits(loc, critSlot) &lt; reqSlots) &amp;&amp;</b>
<b class="nc">&nbsp;                    (iterations &lt; getNumberOfCriticals(loc))){</b>
<b class="nc">&nbsp;                critSlot = (critSlot + 1) % getNumberOfCriticals(loc);</b>
<b class="nc">&nbsp;                iterations++;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (iterations &gt;= getNumberOfCriticals(loc)){</b>
<b class="nc">&nbsp;                throw new LocationFullException(mounted.getName()</b>
<b class="nc">&nbsp;                        + &quot; does not fit in &quot; + getLocationAbbr(loc) + &quot; on &quot;</b>
<b class="nc">&nbsp;                        + getDisplayName()</b>
&nbsp;                        + &quot;\n    needs &quot;
<b class="nc">&nbsp;                        + getEmptyCriticals(loc)</b>
&nbsp;                        + &quot; free contiguous criticals&quot;);
&nbsp;            }
<b class="nc">&nbsp;            for (int i = 0; i &lt; reqSlots; i++) {</b>
<b class="nc">&nbsp;                CriticalSlot cs = new CriticalSlot(mounted);</b>
<b class="nc">&nbsp;                addCritical(loc, cs, critSlot);</b>
<b class="nc">&nbsp;                critSlot = (critSlot + 1) % getNumberOfCriticals(loc);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    //From IO pg 50
&nbsp;    public static TechAdvancement getTechAdvancement(long etype, boolean primitive, boolean industrial, int weightClass) {
<b class="fc">&nbsp;        if ((etype &amp; ETYPE_TRIPOD_MECH) != 0) {</b>
<b class="nc">&nbsp;            if (weightClass != EntityWeightClass.WEIGHT_SUPER_HEAVY) {</b>
<b class="nc">&nbsp;                return new TechAdvancement(TECH_BASE_IS)</b>
<b class="nc">&nbsp;                        .setISAdvancement(2585, 2602).setISApproximate(true).setPrototypeFactions(F_TH)</b>
<b class="nc">&nbsp;                        .setProductionFactions(F_TH).setTechRating(RATING_D)</b>
<b class="nc">&nbsp;                        .setAvailability(RATING_F, RATING_F, RATING_F, RATING_E)</b>
<b class="nc">&nbsp;                        .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return new TechAdvancement(TECH_BASE_IS)</b>
<b class="nc">&nbsp;                        .setISAdvancement(2930, 2940).setISApproximate(true).setPrototypeFactions(F_FW)</b>
<b class="nc">&nbsp;                        .setProductionFactions(F_FW).setTechRating(RATING_D)</b>
<b class="nc">&nbsp;                        .setAvailability(RATING_X, RATING_F, RATING_X, RATING_F)</b>
<b class="nc">&nbsp;                        .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (primitive &amp;&amp; industrial) {</b>
<b class="nc">&nbsp;            return new TechAdvancement(TECH_BASE_IS)</b>
<b class="nc">&nbsp;                    .setISAdvancement(2300, 2350, 2425, 2520).setPrototypeFactions(F_TA)</b>
<b class="nc">&nbsp;                    .setProductionFactions(F_TH).setTechRating(RATING_D)</b>
<b class="nc">&nbsp;                    .setAvailability(RATING_D, RATING_X, RATING_F, RATING_F)</b>
<b class="nc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
<b class="fc">&nbsp;        } else if (primitive) {</b>
<b class="nc">&nbsp;            return new TechAdvancement(TECH_BASE_IS)</b>
<b class="nc">&nbsp;                    .setISAdvancement(2439, 2443, 2470, 2520).setPrototypeFactions(F_TH)</b>
<b class="nc">&nbsp;                    .setProductionFactions(F_TH).setTechRating(RATING_C)</b>
<b class="nc">&nbsp;                    .setAvailability(RATING_C, RATING_X, RATING_F, RATING_F)</b>
<b class="nc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
<b class="fc">&nbsp;        } else if (industrial &amp;&amp; (EntityWeightClass.WEIGHT_SUPER_HEAVY == weightClass)) {</b>
&nbsp;            // Superheavy industrialmechs don&#39;t have a separate entry on the tech advancement
&nbsp;            // table in IO, but the dates for the superheavy tripod are based on the
&nbsp;            // three-man digging machine, which is an industrialmech.
<b class="nc">&nbsp;            return new TechAdvancement(TECH_BASE_IS)</b>
<b class="nc">&nbsp;                    .setAdvancement(2930, 2940).setPrototypeFactions(F_FW)</b>
<b class="nc">&nbsp;                    .setProductionFactions(F_FW).setTechRating(RATING_D)</b>
<b class="nc">&nbsp;                    .setAvailability(RATING_X, RATING_F, RATING_X, RATING_F)</b>
<b class="nc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
<b class="fc">&nbsp;        } else if (industrial) {</b>
<b class="nc">&nbsp;            return new TechAdvancement(TECH_BASE_ALL)</b>
<b class="nc">&nbsp;                    .setAdvancement(2460, 2470, 2500).setPrototypeFactions(F_TH)</b>
<b class="nc">&nbsp;                    .setProductionFactions(F_TH).setTechRating(RATING_C)</b>
<b class="nc">&nbsp;                    .setAvailability(RATING_C, RATING_C, RATING_C, RATING_B)</b>
<b class="nc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
<b class="fc">&nbsp;        } else if (EntityWeightClass.WEIGHT_ULTRA_LIGHT == weightClass) {</b>
<b class="fc">&nbsp;            return new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;                    .setAdvancement(2500, 2519, 3075).setPrototypeFactions(F_TH, F_FW)</b>
<b class="fc">&nbsp;                    .setProductionFactions(F_FW).setApproximate(true, false, true)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_E, RATING_F, RATING_E, RATING_E)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
<b class="fc">&nbsp;        } else if (EntityWeightClass.WEIGHT_SUPER_HEAVY == weightClass) {</b>
<b class="fc">&nbsp;            return new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;                    .setISAdvancement(3077, 3078).setPrototypeFactions(F_WB)</b>
<b class="fc">&nbsp;                    .setProductionFactions(F_WB).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_X, RATING_F, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            return new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;                    .setAdvancement(2460, 2470, 2500).setPrototypeFactions(F_TH)</b>
<b class="fc">&nbsp;                    .setProductionFactions(F_TH).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_C, RATING_E, RATING_D, RATING_C)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.INTRO);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public TechAdvancement getConstructionTechAdvancement() {
<b class="fc">&nbsp;        return getTechAdvancement(getEntityType(), isPrimitive(), isIndustrial(), getWeightClass());</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    private static final TechAdvancement[] GYRO_TA =  {</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2300, 2350, 2505)</b>
<b class="fc">&nbsp;                .setApproximate(true, false, false).setPrototypeFactions(F_TA)</b>
<b class="fc">&nbsp;                .setProductionFactions(F_TH).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_C, RATING_C, RATING_C, RATING_C)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.INTRO), //Standard</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3055, 3067, 3072)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false, false).setPrototypeFactions(F_CS)</b>
<b class="fc">&nbsp;                .setProductionFactions(F_CS).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.STANDARD), //XL</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3055, 3068, 3072)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false, false).setPrototypeFactions(F_FS, F_LC)</b>
<b class="fc">&nbsp;                .setProductionFactions(F_FS, F_LC).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.STANDARD), //Compact</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3055, 3067, 3072)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false, false).setPrototypeFactions(F_DC)</b>
<b class="fc">&nbsp;                .setProductionFactions(F_DC).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.STANDARD), //Heavy duty</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setAdvancement(DATE_NONE)</b>
<b class="fc">&nbsp;                .setTechRating(RATING_A)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //None (placeholder)</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(2905, 2940)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false).setPrototypeFactions(F_FW)</b>
<b class="fc">&nbsp;                .setProductionFactions(F_FW).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_F, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Superheavy</b>
&nbsp;    };
&nbsp;
<b class="fc">&nbsp;    private static final TechAdvancement[] COCKPIT_TA = {</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2468, 2470, 2487)</b>
<b class="fc">&nbsp;                .setApproximate(true, false, false).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_C, RATING_C, RATING_C, RATING_C)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.INTRO), //Standard</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setISAdvancement(3060, 3067, 3080)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false, false)</b>
<b class="fc">&nbsp;                .setClanAdvancement(DATE_NONE, 3080, 3080).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_FS).setProductionFactions(F_FS, F_CJF)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.STANDARD), //Small</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setISAdvancement(2625, 2631, DATE_NONE, 2850, 3030)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false, false, true, true)</b>
<b class="fc">&nbsp;                .setClanAdvancement(2625, 2631).setClanApproximate(true, false)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                .setReintroductionFactions(F_FS).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_C, RATING_F, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Cockpit command console</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setISAdvancement(3053, 3080, 3100)</b>
<b class="fc">&nbsp;                .setClanAdvancement(3055, 3080, 3100)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_FS, F_LC, F_CSJ).setProductionFactions(F_LC)</b>
<b class="fc">&nbsp;                .setApproximate(false, true, false).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL), //Torso mounted</b>
&nbsp;            //FIXME: Dual is unofficial; these are stats for standard
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2468, 2470, 2487)</b>
<b class="fc">&nbsp;                .setApproximate(true, false, false).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_C, RATING_C, RATING_C, RATING_C)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.UNOFFICIAL), //Dual</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2469, 2470, 2490)</b>
<b class="fc">&nbsp;                .setApproximate(true, false, false).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_B, RATING_C, RATING_C, RATING_B)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.STANDARD), //Industrial</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2430, 2439)</b>
<b class="fc">&nbsp;                .setApproximate(true, false).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_D, RATING_X, RATING_X, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Primitive</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2300, 2350, DATE_NONE, 2520)</b>
<b class="fc">&nbsp;                .setApproximate(true, false, false).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_TA).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_C, RATING_X, RATING_X, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Primitive industrial</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3060, 3076)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_WB).setProductionFactions(F_WB)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_F, RATING_E)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Superheavy</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3130, 3135)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_RS).setProductionFactions(F_RS)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_F, RATING_X, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Superheavy tripod</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(2590, 2702)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false).setTechRating(RATING_F)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_X, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Tripod</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setISAdvancement(3074).setClanAdvancement(3083)</b>
<b class="fc">&nbsp;                .setApproximate(true).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_WB, F_CHH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL), //Cockpit interface</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3052, DATE_NONE, DATE_NONE, 3055)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_FS, F_LC).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_F, RATING_X)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL), //VRRP</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_CLAN).setClanAdvancement(3130, 3135)</b>
<b class="fc">&nbsp;                .setClanApproximate(true, false).setTechRating(RATING_F)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_CHH).setProductionFactions(F_CHH)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_X, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //QuadVee</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(2905, 2940)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_FW).setProductionFactions(F_FW)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_F, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Superheavy industrial</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_IS).setISAdvancement(3060, 3076)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_WB).setProductionFactions(F_WB)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_F, RATING_E)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Superheavy command console</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setISAdvancement(3060, 3067, 3080)</b>
<b class="fc">&nbsp;                .setISApproximate(true, false, false)</b>
<b class="fc">&nbsp;                .setClanAdvancement(DATE_NONE, 3080, 3080).setTechRating(RATING_E)</b>
<b class="fc">&nbsp;                .setPrototypeFactions(F_FS).setProductionFactions(F_FS, F_CJF)</b>
<b class="fc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED), //Small Command Console</b>
&nbsp;    };
&nbsp;
&nbsp;    // Advanced fire control for industrial mechs is implemented with a standard cockpit,
&nbsp;    // but the tech progression is different.
&nbsp;    public static TechAdvancement getIndustrialAdvFireConTA() {
<b class="nc">&nbsp;        return new TechAdvancement(TECH_BASE_ALL).setAdvancement(2469, 2470, 2491)</b>
<b class="nc">&nbsp;                .setApproximate(true, false, false).setPrototypeFactions(F_TA)</b>
<b class="nc">&nbsp;                .setProductionFactions(F_TH).setTechRating(RATING_D)</b>
<b class="nc">&nbsp;                .setAvailability(RATING_D, RATING_E, RATING_E, RATING_D)</b>
<b class="nc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static TechAdvancement getCockpitTechAdvancement(int cockpitType) {
<b class="fc">&nbsp;        if (cockpitType &gt;= 0 &amp;&amp; cockpitType &lt; COCKPIT_TA.length) {</b>
<b class="fc">&nbsp;            return new TechAdvancement(COCKPIT_TA[cockpitType]);</b>
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public TechAdvancement getCockpitTechAdvancement() {
<b class="fc">&nbsp;        if (isIndustrial() &amp;&amp; (getCockpitType() == COCKPIT_STANDARD)) {</b>
<b class="nc">&nbsp;            return getIndustrialAdvFireConTA();</b>
&nbsp;        }
<b class="fc">&nbsp;        return getCockpitTechAdvancement(getCockpitType());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static TechAdvancement getGyroTechAdvancement(int gyroType) {
<b class="fc">&nbsp;        if ((gyroType &gt;= 0) &amp;&amp; (gyroType &lt; GYRO_TA.length)) {</b>
<b class="fc">&nbsp;            return new TechAdvancement(GYRO_TA[gyroType]);</b>
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public TechAdvancement getGyroTechAdvancement() {
<b class="fc">&nbsp;        return getGyroTechAdvancement(getGyroType());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static TechAdvancement getFullHeadEjectAdvancement() {
<b class="nc">&nbsp;        return new TechAdvancement(TECH_BASE_ALL).setISAdvancement(3020, 3023, 3100)</b>
<b class="nc">&nbsp;                .setClanAdvancement(DATE_NONE, 3052, 3100).setPrototypeFactions(F_LC)</b>
<b class="nc">&nbsp;                .setProductionFactions(F_LC, F_CWF).setTechRating(RATING_D)</b>
<b class="nc">&nbsp;                .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="nc">&nbsp;                .setStaticTechLevel(SimpleTechLevel.ADVANCED);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    protected void addSystemTechAdvancement(CompositeTechLevel ctl) {
<b class="fc">&nbsp;        super.addSystemTechAdvancement(ctl);</b>
&nbsp;        // battlemechs with non-fusion engines are experimental
<b class="fc">&nbsp;        if (hasEngine() &amp;&amp; !isIndustrial() &amp;&amp; !getEngine().isFusion()) {</b>
<b class="nc">&nbsp;            ctl.addComponent(new TechAdvancement().setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL));</b>
&nbsp;        }
<b class="fc">&nbsp;        if (getGyroTechAdvancement() != null) {</b>
<b class="fc">&nbsp;            ctl.addComponent(getGyroTechAdvancement());</b>
&nbsp;        }
<b class="fc">&nbsp;        if (getCockpitTechAdvancement() != null) {</b>
<b class="fc">&nbsp;            ctl.addComponent(getCockpitTechAdvancement());</b>
&nbsp;        }
<b class="fc">&nbsp;        if (hasFullHeadEject()) {</b>
<b class="nc">&nbsp;            ctl.addComponent(getFullHeadEjectAdvancement());</b>
&nbsp;        }
&nbsp;        //FIXME: Clan interface cockpit has higher tech rating
&nbsp;        //if (getCockpitType() == COCKPIT_INTERFACE &amp;&amp; isClan()) {
&nbsp;        //    techAdvancement.setTechRating(Math.max(techAdvancement.getTechRating(), RATING_F));
&nbsp;        //}
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This method will return the number of contiguous criticals in the given
&nbsp;     * location, starting at the given critical slot
&nbsp;     *
&nbsp;     * @param loc           The location on the unit to check slots on
&nbsp;     * @param startingSlot  The critical slot to start at
&nbsp;     * @return
&nbsp;     */
&nbsp;    private int getContiguousNumberOfCrits(int loc, int startingSlot){
&nbsp;
<b class="nc">&nbsp;        int numCritSlots = getNumberOfCriticals(loc);</b>
<b class="nc">&nbsp;        int contiguousCrits = 0;</b>
&nbsp;
<b class="nc">&nbsp;        for (int slot = startingSlot; slot &lt; numCritSlots; slot++) {</b>
<b class="nc">&nbsp;            if (getCritical(loc, slot) == null) {</b>
<b class="nc">&nbsp;                contiguousCrits++;</b>
&nbsp;            } else {
&nbsp;               break;
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return contiguousCrits;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Used in BV calculations. Any equipment that will destroy the unit or leg it if it explodes
&nbsp;     * decreases the defensive battle rating. This is anything in the head, CT, or leg,
&nbsp;     * or side torso if it has &gt;= 3 engine crits, or any location that can transfer damage to that
&nbsp;     * location.
&nbsp;     *
&nbsp;     * @param loc The location index
&nbsp;     * @return    Whether explosive equipment in the location should decrease BV
&nbsp;     */
&nbsp;    private boolean hasExplosiveEquipmentPenalty(int loc) {
<b class="nc">&nbsp;        if ((loc == Entity.LOC_NONE) || hasCASEII(loc)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!entityIsQuad() &amp;&amp; ((loc == Mech.LOC_RARM) || (loc == Mech.LOC_LARM))) {</b>
<b class="nc">&nbsp;            return !locationHasCase(loc) &amp;&amp; hasExplosiveEquipmentPenalty(getTransferLocation(loc));</b>
<b class="nc">&nbsp;        } else if ((loc == Mech.LOC_RT) || (loc == Mech.LOC_LT)) {</b>
<b class="nc">&nbsp;            return !locationHasCase(loc) || (getEngine().getSideTorsoCriticalSlots().length &gt;= 3);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the battle value of this mech
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int calculateBattleValue() {
<b class="nc">&nbsp;        if (useManualBV) {</b>
<b class="nc">&nbsp;            return manualBV;</b>
&nbsp;        }
<b class="nc">&nbsp;        return calculateBattleValue(false, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the battle value of this mech. If the parameter is true, then
&nbsp;     * the battle value for c3 won&#39;t be added whether the mech is currently part
&nbsp;     * of a network or not.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int calculateBattleValue(boolean ignoreC3, boolean ignorePilot) {
<b class="nc">&nbsp;        if (useManualBV) {</b>
<b class="nc">&nbsp;            return manualBV;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText = new StringBuffer(</b>
&nbsp;                &quot;&lt;HTML&gt;&lt;BODY&gt;&lt;CENTER&gt;&lt;b&gt;Battle Value Calculations For &quot;);
&nbsp;
<b class="nc">&nbsp;        bvText.append(getChassis());</b>
<b class="nc">&nbsp;        bvText.append(&quot; &quot;);</b>
<b class="nc">&nbsp;        bvText.append(getModel());</b>
<b class="nc">&nbsp;        bvText.append(&quot;&lt;/b&gt;&lt;/CENTER&gt;&quot;);</b>
<b class="nc">&nbsp;        bvText.append(nl);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;&lt;b&gt;Defensive Battle Rating Calculation:&lt;/b&gt;&quot;);</b>
<b class="nc">&nbsp;        bvText.append(nl);</b>
&nbsp;
<b class="nc">&nbsp;        double dbv = 0; // defensive battle value</b>
<b class="nc">&nbsp;        double obv = 0; // offensive bv</b>
&nbsp;
<b class="nc">&nbsp;        double armorMultiplier = 1.0;</b>
<b class="nc">&nbsp;        bvText.append(startTable);</b>
<b class="nc">&nbsp;        for (int loc = 0; loc &lt; locations(); loc++) {</b>
&nbsp;            // total armor points
&nbsp;
<b class="nc">&nbsp;            switch (getArmorType(loc)) {</b>
&nbsp;                case EquipmentType.T_ARMOR_COMMERCIAL:
<b class="nc">&nbsp;                    armorMultiplier = 0.5;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case EquipmentType.T_ARMOR_HARDENED:
<b class="nc">&nbsp;                    armorMultiplier = 2.0;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case EquipmentType.T_ARMOR_REACTIVE:
&nbsp;                case EquipmentType.T_ARMOR_REFLECTIVE:
&nbsp;                case EquipmentType.T_ARMOR_BALLISTIC_REINFORCED:
<b class="nc">&nbsp;                    armorMultiplier = 1.5;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case EquipmentType.T_ARMOR_FERRO_LAMELLOR:
&nbsp;                case EquipmentType.T_ARMOR_ANTI_PENETRATIVE_ABLATION:
<b class="nc">&nbsp;                    armorMultiplier = 1.2;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case EquipmentType.T_ARMOR_HEAT_DISSIPATING:
<b class="nc">&nbsp;                    armorMultiplier = 1.1;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                default:
<b class="nc">&nbsp;                    armorMultiplier = 1.0;</b>
&nbsp;                    break;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (hasWorkingMisc(MiscType.F_BLUE_SHIELD)) {</b>
<b class="nc">&nbsp;                armorMultiplier += 0.2;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (countWorkingMisc(MiscType.F_HARJEL_II, loc) &gt; 0) {</b>
<b class="nc">&nbsp;                armorMultiplier *= 1.1;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (countWorkingMisc(MiscType.F_HARJEL_III, loc) &gt; 0) {</b>
<b class="nc">&nbsp;                armorMultiplier *= 1.2;</b>
&nbsp;            }
&nbsp;
&nbsp;            // BV for torso mounted cockpit.
<b class="nc">&nbsp;            if ((getCockpitType() == Mech.COCKPIT_TORSO_MOUNTED)</b>
&nbsp;                    &amp;&amp; (loc == LOC_CT)) {
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                double cockpitArmor = this.getArmor(Mech.LOC_CT)</b>
<b class="nc">&nbsp;                        + this.getArmor(Mech.LOC_CT, true);</b>
<b class="nc">&nbsp;                cockpitArmor *= armorMultiplier;</b>
<b class="nc">&nbsp;                bvText.append(&quot;extra BV for torso mounted cockpit&quot;);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(cockpitArmor);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
<b class="nc">&nbsp;                dbv += cockpitArmor;</b>
&nbsp;            }
<b class="nc">&nbsp;            int modularArmor = 0;</b>
<b class="nc">&nbsp;            for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;                if (mounted.getType().hasFlag(MiscType.F_MODULAR_ARMOR)</b>
<b class="nc">&nbsp;                        &amp;&amp; (mounted.getLocation() == loc)) {</b>
<b class="nc">&nbsp;                    modularArmor += mounted.getBaseDamageCapacity()</b>
<b class="nc">&nbsp;                            - mounted.getDamageTaken();</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            int armor = getArmor(loc)</b>
<b class="nc">&nbsp;                    + (hasRearArmor(loc) ? getArmor(loc, true) : 0);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot;Total Armor &quot;</b>
<b class="nc">&nbsp;                    + this.getLocationAbbr(loc)</b>
&nbsp;                    + &quot; (&quot;
&nbsp;                    + armor
<b class="nc">&nbsp;                    + (modularArmor &gt; 0 ? &quot; +&quot; + modularArmor + &quot; modular&quot; : &quot;&quot;)</b>
&nbsp;                    + &quot;) x &quot;);
<b class="nc">&nbsp;            bvText.append(armorMultiplier);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            double armorBV = (armor + modularArmor) * armorMultiplier;</b>
<b class="nc">&nbsp;            dbv += armorBV;</b>
<b class="nc">&nbsp;            bvText.append(armorBV);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Total modified armor BV x 2.5 &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        dbv *= 2.5;</b>
<b class="nc">&nbsp;        bvText.append(dbv);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // total internal structure
<b class="nc">&nbsp;        double internalMultiplier = 1.0;</b>
<b class="nc">&nbsp;        if ((getStructureType() == EquipmentType.T_STRUCTURE_INDUSTRIAL)</b>
<b class="nc">&nbsp;                || (getStructureType() == EquipmentType.T_STRUCTURE_COMPOSITE)) {</b>
<b class="nc">&nbsp;            internalMultiplier = 0.5;</b>
<b class="nc">&nbsp;        } else if (getStructureType() == EquipmentType.T_STRUCTURE_REINFORCED) {</b>
<b class="nc">&nbsp;            internalMultiplier = 2.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasWorkingMisc(MiscType.F_BLUE_SHIELD)) {</b>
<b class="nc">&nbsp;            internalMultiplier += 0.2;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        dbv += getTotalInternal() * internalMultiplier * 1.5</b>
<b class="nc">&nbsp;                * (hasEngine() ? getEngine().getBVMultiplier() : 1.0);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Total I.S. Points x IS Multipler x 1.5 x Engine Multipler&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn + startColumn);</b>
<b class="nc">&nbsp;        bvText.append(getTotalInternal());</b>
<b class="nc">&nbsp;        bvText.append(&quot; x &quot;);</b>
<b class="nc">&nbsp;        bvText.append(internalMultiplier);</b>
<b class="nc">&nbsp;        bvText.append(&quot; x &quot;);</b>
<b class="nc">&nbsp;        bvText.append(&quot;1.5 x &quot;);</b>
<b class="nc">&nbsp;        bvText.append(hasEngine() ? getEngine().getBVMultiplier() : 1.0);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        bvText.append(getTotalInternal() * internalMultiplier * 1.5</b>
<b class="nc">&nbsp;                * (hasEngine() ? getEngine().getBVMultiplier() : 1.0));</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // add gyro
<b class="nc">&nbsp;        dbv += getWeight() * getGyroMultiplier();</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Weight x Gyro Multipler &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn + startColumn);</b>
<b class="nc">&nbsp;        bvText.append(getWeight());</b>
<b class="nc">&nbsp;        bvText.append(&quot; x &quot;);</b>
<b class="nc">&nbsp;        bvText.append(getGyroMultiplier());</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        bvText.append(getWeight() * getGyroMultiplier());</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Defensive Equipment:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
<b class="nc">&nbsp;        double amsAmmoBV = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getAmmo()) {</b>
<b class="nc">&nbsp;            AmmoType atype = (AmmoType) mounted.getType();</b>
<b class="nc">&nbsp;            if ((atype.getAmmoType() == AmmoType.T_AMS) || (atype.getAmmoType() == AmmoType.T_APDS)) {</b>
<b class="nc">&nbsp;                amsAmmoBV += atype.getBV(this);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        double amsBV = 0;</b>
&nbsp;        // add defensive equipment
<b class="nc">&nbsp;        double dEquipmentBV = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getEquipment()) {</b>
<b class="nc">&nbsp;            EquipmentType etype = mounted.getType();</b>
&nbsp;
&nbsp;            // don&#39;t count destroyed equipment
<b class="nc">&nbsp;            if (mounted.isDestroyed()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (((etype instanceof WeaponType) &amp;&amp; (etype</b>
<b class="nc">&nbsp;                    .hasFlag(WeaponType.F_AMS)</b>
<b class="nc">&nbsp;                    || etype.hasFlag(WeaponType.F_M_POD) || etype</b>
<b class="nc">&nbsp;                        .hasFlag(WeaponType.F_B_POD)))</b>
&nbsp;                    || ((etype instanceof MiscType) &amp;&amp; (etype
<b class="nc">&nbsp;                            .hasFlag(MiscType.F_ECM)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_BAP)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_VIRAL_JAMMER_DECOY)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_VIRAL_JAMMER_HOMING)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_AP_POD)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_MASS)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_HEAVY_BRIDGE_LAYER)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_MEDIUM_BRIDGE_LAYER)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_LIGHT_BRIDGE_LAYER)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_CHAFF_POD)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_HARJEL_II)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_HARJEL_III)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_SPIKES) || (etype</b>
<b class="nc">&nbsp;                            .hasFlag(MiscType.F_CLUB) &amp;&amp; (etype</b>
<b class="nc">&nbsp;                            .hasSubType(MiscType.S_SHIELD_LARGE)</b>
<b class="nc">&nbsp;                            || etype.hasSubType(MiscType.S_SHIELD_MEDIUM) || etype</b>
<b class="nc">&nbsp;                                .hasSubType(MiscType.S_SHIELD_SMALL)))))) {</b>
<b class="nc">&nbsp;                double bv = etype.getBV(this);</b>
<b class="nc">&nbsp;                if (etype instanceof WeaponType) {</b>
<b class="nc">&nbsp;                    WeaponType wtype = (WeaponType) etype;</b>
<b class="nc">&nbsp;                    if (wtype.hasFlag(WeaponType.F_AMS)</b>
<b class="nc">&nbsp;                            &amp;&amp; ((wtype.getAmmoType() == AmmoType.T_AMS) || (wtype.getAmmoType() == AmmoType.T_APDS))) {</b>
<b class="nc">&nbsp;                        amsBV += bv;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                dEquipmentBV += bv;</b>
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                bvText.append(mounted.getName());</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                bvText.append(&quot;+&quot;);</b>
<b class="nc">&nbsp;                bvText.append(bv);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (amsAmmoBV &gt; 0) {</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;AMS Ammo (to a maximum of AMS BV)&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot;+&quot;);</b>
<b class="nc">&nbsp;            bvText.append(Math.min(amsBV, amsAmmoBV));</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
<b class="nc">&nbsp;            dEquipmentBV += Math.min(amsBV, amsAmmoBV);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        dbv += dEquipmentBV;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        double armoredBVCal = getArmoredComponentBV();</b>
&nbsp;
<b class="nc">&nbsp;        if (armoredBVCal &gt; 0) {</b>
<b class="nc">&nbsp;            bvText.append(&quot;Armored Components BV Modification&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;+&quot;);</b>
<b class="nc">&nbsp;            bvText.append(armoredBVCal);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
<b class="nc">&nbsp;            dbv += armoredBVCal;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Total BV of all Defensive Equipment &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        bvText.append(dEquipmentBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // subtract for explosive ammo
<b class="nc">&nbsp;        double ammoPenalty = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getEquipment()) {</b>
<b class="nc">&nbsp;            int loc = mounted.getLocation();</b>
<b class="nc">&nbsp;            int toSubtract = 15;</b>
<b class="nc">&nbsp;            EquipmentType etype = mounted.getType();</b>
&nbsp;
&nbsp;            // only count explosive ammo
<b class="nc">&nbsp;            if (!etype.isExplosive(mounted, true)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
&nbsp;            // don&#39;t count oneshot ammo
<b class="nc">&nbsp;            if (loc == LOC_NONE) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (!hasExplosiveEquipmentPenalty(loc) &amp;&amp; !hasExplosiveEquipmentPenalty(mounted.getSecondLocation())) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
&nbsp;            // gauss rifles only subtract 1 point per slot, same for HVACs and
&nbsp;            // iHeavy Lasers and mektasers
<b class="nc">&nbsp;            if ((etype instanceof GaussWeapon) || (etype instanceof HVACWeapon)</b>
&nbsp;                    || (etype instanceof CLImprovedHeavyLaserLarge)
&nbsp;                    || (etype instanceof CLImprovedHeavyLaserMedium)
&nbsp;                    || (etype instanceof CLImprovedHeavyLaserSmall)
&nbsp;                    || (etype instanceof ISRISCHyperLaser)
&nbsp;                    || (etype instanceof TSEMPWeapon)
&nbsp;                    || (etype instanceof ISMekTaser)
<b class="nc">&nbsp;                    || (etype.hasFlag(WeaponType.F_B_POD)</b>
<b class="nc">&nbsp;                    || (etype.hasFlag(WeaponType.F_M_POD)))) {</b>
<b class="nc">&nbsp;                toSubtract = 1;</b>
&nbsp;            }
&nbsp;
&nbsp;         // PPCs with capacitors subtract 1
<b class="nc">&nbsp;            if (etype instanceof PPCWeapon) {</b>
<b class="nc">&nbsp;                if (mounted.getLinkedBy() != null) {</b>
<b class="nc">&nbsp;                    toSubtract = 1;</b>
&nbsp;                } else {
&nbsp;                    continue;
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if ((etype instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; (etype.hasFlag(MiscType.F_PPC_CAPACITOR)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_RISC_LASER_PULSE_MODULE)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_EMERGENCY_COOLANT_SYSTEM)</b>
<b class="nc">&nbsp;                            || etype.hasFlag(MiscType.F_JUMP_JET))) {</b>
<b class="nc">&nbsp;                toSubtract = 1;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (etype instanceof AmmoType</b>
<b class="nc">&nbsp;                    &amp;&amp; ((AmmoType)mounted.getType()).getAmmoType() == AmmoType.T_COOLANT_POD) {</b>
<b class="nc">&nbsp;                toSubtract = 1;</b>
&nbsp;            }
&nbsp;
&nbsp;
<b class="nc">&nbsp;            if ((etype instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; etype.hasFlag(MiscType.F_BLUE_SHIELD)) {</b>
&nbsp;                // blue shield needs to be special cased, because it&#39;s one
&nbsp;                // mounted with lots of locations,
&nbsp;                // and some of those could be proteced by cas
<b class="nc">&nbsp;                toSubtract = 0;</b>
&nbsp;            }
&nbsp;
&nbsp;            // RACs, LACs and ACs don&#39;t really count
<b class="nc">&nbsp;            if ((etype instanceof WeaponType) &amp;&amp; ((((WeaponType) etype).getAmmoType() == AmmoType.T_AC_ROTARY)</b>
<b class="nc">&nbsp;                    || (((WeaponType) etype).getAmmoType() == AmmoType.T_AC)</b>
<b class="nc">&nbsp;                    || (((WeaponType) etype).getAmmoType() == AmmoType.T_LAC)</b>
<b class="nc">&nbsp;                    || (((WeaponType) etype).getAmmoType() == AmmoType.T_AC_IMP)</b>
<b class="nc">&nbsp;                    || (((WeaponType) etype).getAmmoType() == AmmoType.T_AC_PRIMITIVE)</b>
<b class="nc">&nbsp;                    || (((WeaponType) etype).getAmmoType() == AmmoType.T_PAC))) {</b>
<b class="nc">&nbsp;                toSubtract = 0;</b>
&nbsp;            }
&nbsp;
&nbsp;            // empty ammo shouldn&#39;t count
<b class="nc">&nbsp;            if ((etype instanceof AmmoType)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getUsableShotsLeft() == 0)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
&nbsp;            // we subtract per critical slot
&nbsp;            int criticals;
<b class="nc">&nbsp;            if (mounted.isSplit()) {</b>
<b class="nc">&nbsp;                criticals = 0;</b>
<b class="nc">&nbsp;                for (int l = 0; l &lt; locations(); l++) {</b>
<b class="nc">&nbsp;                    if (((l == mounted.getLocation()) || (l == mounted.getSecondLocation()))</b>
<b class="nc">&nbsp;                            &amp;&amp; hasExplosiveEquipmentPenalty(l)) {</b>
<b class="nc">&nbsp;                        for (int i = 0; i &lt; getNumberOfCriticals(l); i++) {</b>
<b class="nc">&nbsp;                            CriticalSlot slot = getCritical(l, i);</b>
<b class="nc">&nbsp;                            if ((slot != null) &amp;&amp; mounted.equals(slot.getMount())) {</b>
<b class="nc">&nbsp;                                criticals++;</b>
&nbsp;                            }
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else if (mounted.getType() instanceof HVACWeapon) {</b>
&nbsp;                // HVAC are only -1 total, regardless of number of crits. None are large enough to be splittable.
<b class="nc">&nbsp;                criticals = 1;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                criticals = mounted.getCriticals();</b>
&nbsp;            }
<b class="nc">&nbsp;            toSubtract *= criticals;</b>
<b class="nc">&nbsp;            ammoPenalty += toSubtract;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        // special case for blueshield, need to check each non-head location
&nbsp;        // seperately for CASE
<b class="nc">&nbsp;        if (hasWorkingMisc(MiscType.F_BLUE_SHIELD)) {</b>
<b class="nc">&nbsp;            int unProtectedCrits = 0;</b>
<b class="nc">&nbsp;            for (int loc = LOC_CT; loc &lt;= LOC_LLEG; loc++) {</b>
<b class="nc">&nbsp;                if (hasCASEII(loc)) {</b>
<b class="nc">&nbsp;                    continue;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isClan()) {</b>
&nbsp;                    // Clan mechs only count ammo in ct, legs or head (per
&nbsp;                    // BMRr).
&nbsp;                    // Also count ammo in side torsos if mech has xxl engine
&nbsp;                    // (extrapolated from rule intent - not covered in rules)
<b class="nc">&nbsp;                    if (((loc != LOC_CT) &amp;&amp; (loc != LOC_RLEG)</b>
&nbsp;                            &amp;&amp; (loc != LOC_LLEG) &amp;&amp; (loc != LOC_HEAD))
<b class="nc">&nbsp;                            &amp;&amp; !(((loc == LOC_RT) || (loc == LOC_LT)) &amp;&amp; hasEngine() &amp;&amp; (getEngine()</b>
<b class="nc">&nbsp;                                    .getSideTorsoCriticalSlots().length &gt; 2))) {</b>
<b class="nc">&nbsp;                        continue;</b>
&nbsp;                    }
&nbsp;                } else {
&nbsp;                    // inner sphere with XL or XXL counts everywhere
<b class="nc">&nbsp;                    if(hasEngine() &amp;&amp; (getEngine().getSideTorsoCriticalSlots().length &lt;= 2)) {</b>
&nbsp;                        // without XL or XXL, only count torsos if not CASEed,
&nbsp;                        // and arms if arm &amp; torso not CASEed
<b class="nc">&nbsp;                        if (((loc == LOC_RT) || (loc == LOC_LT))</b>
<b class="nc">&nbsp;                                &amp;&amp; locationHasCase(loc)) {</b>
<b class="nc">&nbsp;                            continue;</b>
<b class="nc">&nbsp;                        } else if ((loc == LOC_LARM)</b>
<b class="nc">&nbsp;                                &amp;&amp; (locationHasCase(loc) || locationHasCase(LOC_LT))) {</b>
<b class="nc">&nbsp;                            continue;</b>
<b class="nc">&nbsp;                        } else if ((loc == LOC_RARM)</b>
<b class="nc">&nbsp;                                &amp;&amp; (locationHasCase(loc) || locationHasCase(LOC_RT))) {</b>
<b class="nc">&nbsp;                            continue;</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                unProtectedCrits++;</b>
&nbsp;            }
<b class="nc">&nbsp;            ammoPenalty += unProtectedCrits;</b>
&nbsp;        }
<b class="nc">&nbsp;        dbv = Math.max(1, dbv - ammoPenalty);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Explosive Weapons/Equipment Penalty &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;= -&quot;);</b>
<b class="nc">&nbsp;        bvText.append(ammoPenalty);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(dbv);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // adjust for target movement modifier
&nbsp;        // we use full possible movement, ignoring gravity, heat and modular
&nbsp;        // armor, but taking into account hit actuators
<b class="nc">&nbsp;        int bvWalk = getWalkMP(false, true, true);</b>
<b class="nc">&nbsp;        int airmechMP = 0;</b>
<b class="nc">&nbsp;        if (((getEntityType() &amp; ETYPE_LAND_AIR_MECH) != 0)) {</b>
<b class="nc">&nbsp;            bvWalk = ((LandAirMech)this).getBVWalkMP();</b>
<b class="nc">&nbsp;            if (((LandAirMech)this).getLAMType() == LandAirMech.LAM_STANDARD) {</b>
<b class="nc">&nbsp;                airmechMP = ((LandAirMech)this).getAirMechFlankMP();</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (((getEntityType() &amp; ETYPE_QUADVEE) != 0)</b>
<b class="nc">&nbsp;                &amp;&amp; (getMovementMode() == EntityMovementMode.WHEELED)) {</b>
&nbsp;            // Don&#39;t use bonus cruise MP in calculating BV
<b class="nc">&nbsp;            bvWalk = Math.max(0, walkMP);</b>
&nbsp;        }
&nbsp;        int runMP;
<b class="nc">&nbsp;        if (hasTSM()) {</b>
<b class="nc">&nbsp;            bvWalk++;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasMASCAndSuperCharger()) {</b>
<b class="nc">&nbsp;            runMP = (int) Math.ceil(bvWalk * 2.5);</b>
<b class="nc">&nbsp;        } else if (hasMASC()) {</b>
<b class="nc">&nbsp;            runMP = bvWalk * 2;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            runMP = (int) Math.ceil(bvWalk * 1.5);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasMPReducingHardenedArmor()) {</b>
<b class="nc">&nbsp;            runMP--;</b>
&nbsp;        }
<b class="nc">&nbsp;        int tmmRan = Compute.getTargetMovementModifier(runMP, false, false,</b>
<b class="nc">&nbsp;                game).getValue();</b>
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Run MP&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(runMP);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Target Movement Modifier For Run&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(tmmRan);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // Calculate modifiers for jump and UMU movement where applicable.
<b class="nc">&nbsp;        final int jumpMP = Math.max(getJumpMP(false, true), airmechMP);</b>
<b class="nc">&nbsp;        final int tmmJumped = (jumpMP &gt; 0) ? Compute.</b>
<b class="nc">&nbsp;                getTargetMovementModifier(jumpMP, true, false, game).getValue()</b>
<b class="nc">&nbsp;                : 0;</b>
&nbsp;
<b class="nc">&nbsp;        final int umuMP = getActiveUMUCount();</b>
<b class="nc">&nbsp;        final int tmmUMU = (umuMP &gt; 0) ? Compute.</b>
<b class="nc">&nbsp;                getTargetMovementModifier(umuMP, false, false, game).getValue()</b>
<b class="nc">&nbsp;                : 0;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        if (airmechMP == 0) {</b>
<b class="nc">&nbsp;            bvText.append(&quot;Target Movement Modifier For Jumping&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            bvText.append(&quot;Target Movement Modifier For AirMech Flank&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(tmmJumped);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Target Movement Modifier For UMUs&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(tmmUMU);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        double targetMovementModifier = Math.max(tmmRan, Math.max(tmmJumped,</b>
&nbsp;                tmmUMU));
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Target Movement Modifier&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(targetMovementModifier);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // Try to find a Mek Stealth or similar system.
<b class="nc">&nbsp;        if (hasStealth() || hasNullSig()) {</b>
<b class="nc">&nbsp;            targetMovementModifier += 2;</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;Stealth +2&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;+2&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;
&nbsp;        }
<b class="nc">&nbsp;        if (hasChameleonShield()) {</b>
<b class="nc">&nbsp;            targetMovementModifier += 2;</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;Chameleon +2&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;+2&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;
&nbsp;        }
<b class="nc">&nbsp;        if (hasVoidSig()) {</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;Void Sig&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            if (targetMovementModifier &lt; 3) {</b>
<b class="nc">&nbsp;                targetMovementModifier = 3;</b>
<b class="nc">&nbsp;                bvText.append(&quot;3&quot;);</b>
<b class="nc">&nbsp;            } else if (targetMovementModifier == 3) {</b>
<b class="nc">&nbsp;                targetMovementModifier++;</b>
<b class="nc">&nbsp;                bvText.append(&quot;+1&quot;);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                bvText.append(&quot;-&quot;);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
<b class="nc">&nbsp;        double tmmFactor = 1 + (targetMovementModifier / 10);</b>
<b class="nc">&nbsp;        dbv *= tmmFactor;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Multiply by Defensive Movement Factor of &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(tmmFactor);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot; x &quot;);</b>
<b class="nc">&nbsp;        bvText.append(tmmFactor);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Defensive Battle Value&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        bvText.append(dbv);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;&lt;b&gt;Offensive Battle Rating Calculation:&lt;/b&gt;&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;        // calculate heat efficiency
<b class="nc">&nbsp;        int mechHeatEfficiency = 6 + getHeatCapacity();</b>
<b class="nc">&nbsp;        if ((this instanceof LandAirMech) &amp;&amp; (((LandAirMech) this).getLAMType() == LandAirMech.LAM_STANDARD)) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency += 3;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Base Heat Efficiency &quot;);</b>
&nbsp;
<b class="nc">&nbsp;        double coolantPods = 0;</b>
<b class="nc">&nbsp;        for (Mounted ammo : getAmmo()) {</b>
<b class="nc">&nbsp;            if (((AmmoType) ammo.getType()).getAmmoType() == AmmoType.T_COOLANT_POD) {</b>
<b class="nc">&nbsp;                coolantPods++;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // account for coolant pods
<b class="nc">&nbsp;        if (coolantPods &gt; 0) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency += Math</b>
<b class="nc">&nbsp;                    .ceil((getNumberOfSinks() * coolantPods) / 5);</b>
<b class="nc">&nbsp;            bvText.append(&quot; + Coolant Pods &quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasWorkingMisc(MiscType.F_EMERGENCY_COOLANT_SYSTEM)) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency += 4;</b>
<b class="nc">&nbsp;            bvText.append(&quot; + RISC Emergency Coolant System&quot;);</b>
&nbsp;        }
&nbsp;
&nbsp;        int moveHeat;
<b class="nc">&nbsp;        if ((this instanceof LandAirMech) &amp;&amp; (((LandAirMech) this).getLAMType()  == LandAirMech.LAM_STANDARD)) {</b>
<b class="nc">&nbsp;            moveHeat = (int) Math.round(((LandAirMech) this).getAirMechFlankMP(false, true) / 3.0);</b>
<b class="nc">&nbsp;        } else if ((getJumpMP(false, true) &gt; 0)</b>
<b class="nc">&nbsp;                &amp;&amp; (getJumpHeat(getJumpMP(false, true)) &gt; getRunHeat())) {</b>
<b class="nc">&nbsp;            moveHeat = getJumpHeat(getJumpMP(false, true));</b>
<b class="nc">&nbsp;            bvText.append(&quot; - Jump Heat &quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            moveHeat = getRunHeat();</b>
<b class="nc">&nbsp;            if (hasSCM()) {</b>
<b class="nc">&nbsp;                moveHeat = 0;</b>
&nbsp;            }
<b class="nc">&nbsp;            bvText.append(&quot; - Run Heat &quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        mechHeatEfficiency -= moveHeat;</b>
<b class="nc">&nbsp;        if (hasStealth()) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency -= 10;</b>
<b class="nc">&nbsp;            bvText.append(&quot; - Stealth Heat &quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasChameleonShield()) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency -= 6;</b>
<b class="nc">&nbsp;            bvText.append(&quot; - Chameleon LPS Heat &quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasNullSig()) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency -= 10;</b>
<b class="nc">&nbsp;            bvText.append(&quot; - Null-signature system Heat &quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasVoidSig()) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency -= 10;</b>
<b class="nc">&nbsp;            bvText.append(&quot; - Void-signature system Heat &quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(6 + getHeatCapacity());</b>
&nbsp;
<b class="nc">&nbsp;        if (coolantPods &gt; 0) {</b>
<b class="nc">&nbsp;            bvText.append(&quot; + &quot;);</b>
<b class="nc">&nbsp;            bvText.append(Math.ceil((getNumberOfSinks() * coolantPods) / 5));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (hasWorkingMisc(MiscType.F_EMERGENCY_COOLANT_SYSTEM)) {</b>
<b class="nc">&nbsp;            mechHeatEfficiency += 4;</b>
<b class="nc">&nbsp;            bvText.append(&quot; + 4&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot; - &quot;).append(moveHeat);</b>
<b class="nc">&nbsp;        if (hasStealth()) {</b>
<b class="nc">&nbsp;            bvText.append(&quot; - 10&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        bvText.append(mechHeatEfficiency);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Unmodified Weapon BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        double weaponBV = 0;</b>
<b class="nc">&nbsp;        boolean hasTargComp = hasTargComp();</b>
&nbsp;        // first, add up front-faced and rear-faced unmodified BV,
&nbsp;        // to know wether front- or rear faced BV should be halved
<b class="nc">&nbsp;        double bvFront = 0, bvRear = 0, nonArmFront = 0, nonArmRear = 0, bvTurret = 0;</b>
<b class="nc">&nbsp;        ArrayList&lt;Mounted&gt; weapons = getWeaponList();</b>
<b class="nc">&nbsp;        for (Mounted weapon : weapons) {</b>
<b class="nc">&nbsp;            WeaponType wtype = (WeaponType) weapon.getType();</b>
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_B_POD)</b>
<b class="nc">&nbsp;                    || wtype.hasFlag(WeaponType.F_M_POD)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            double dBV = wtype.getBV(this);</b>
&nbsp;
&nbsp;            // don&#39;t count destroyed equipment
<b class="nc">&nbsp;            if (weapon.isDestroyed()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;            // don&#39;t count AMS, it&#39;s defensive
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_AMS)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;            // calc MG Array here:
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_MGA)) {</b>
<b class="nc">&nbsp;                double mgBV = 0;</b>
<b class="nc">&nbsp;                for (int eqNum : weapon.getBayWeapons()) {</b>
<b class="nc">&nbsp;                    Mounted mg = getEquipment(eqNum);</b>
<b class="nc">&nbsp;                    if ((mg != null) &amp;&amp; (!mg.isDestroyed())) {</b>
<b class="nc">&nbsp;                        mgBV += mg.getType().getBV(this);</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                dBV = mgBV * 0.67;</b>
&nbsp;            }
<b class="nc">&nbsp;            String name = wtype.getName();</b>
&nbsp;            // artemis bumps up the value
&nbsp;            // PPC caps do, too
<b class="nc">&nbsp;            if (weapon.getLinkedBy() != null) {</b>
&nbsp;                // check to see if the weapon is a PPC and has a Capacitor
&nbsp;                // attached to it
<b class="nc">&nbsp;                if (wtype.hasFlag(WeaponType.F_PPC)) {</b>
<b class="nc">&nbsp;                    dBV += ((MiscType) weapon.getLinkedBy().getType()).getBV(</b>
&nbsp;                            this, weapon);
<b class="nc">&nbsp;                    name = name.concat(&quot; with Capacitor&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                Mounted mLinker = weapon.getLinkedBy();</b>
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_ARTEMIS)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.2;</b>
<b class="nc">&nbsp;                    name = name.concat(&quot; with Artemis IV&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_ARTEMIS_PROTO)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.2;</b>
<b class="nc">&nbsp;                    name = name.concat(&quot; with Artemis IV Prototype&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_ARTEMIS_V)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.3;</b>
<b class="nc">&nbsp;                    name = name.concat(&quot; with Artemis V&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_APOLLO)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.15;</b>
<b class="nc">&nbsp;                    name = name.concat(&quot; with Apollo&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_RISC_LASER_PULSE_MODULE)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.15;</b>
<b class="nc">&nbsp;                    name = name.concat(&quot; with RISC Laser Pulse Module&quot;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (hasFunctionalArmAES(weapon.getLocation())) {</b>
<b class="nc">&nbsp;                dBV *= 1.25;</b>
<b class="nc">&nbsp;                name = name.concat(&quot; augmented by AES&quot;);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(name);</b>
<b class="nc">&nbsp;            boolean rearVGL = false;</b>
<b class="nc">&nbsp;            if (weapon.getType().hasFlag(WeaponType.F_VGL)) {</b>
&nbsp;                // vehicular grenade launchers facing to the rear sides count
&nbsp;                // for rear BV, too
<b class="nc">&nbsp;                if ((weapon.getFacing() == 2) || (weapon.getFacing() == 4)) {</b>
<b class="nc">&nbsp;                    rearVGL = true;</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (weapon.isMechTurretMounted()) {</b>
<b class="nc">&nbsp;                bvTurret += dBV;</b>
<b class="nc">&nbsp;                bvText.append(&quot; (T)&quot;);</b>
<b class="nc">&nbsp;            } else if (weapon.isRearMounted() || rearVGL) {</b>
<b class="nc">&nbsp;                bvRear += dBV;</b>
<b class="nc">&nbsp;                bvText.append(&quot; (R)&quot;);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                bvFront += dBV;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (!isArm(weapon.getLocation()) &amp;&amp; !weapon.isMechTurretMounted()) {</b>
<b class="nc">&nbsp;                if (weapon.isRearMounted() || rearVGL) {</b>
<b class="nc">&nbsp;                    nonArmRear += dBV;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    nonArmFront += dBV;</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(dBV);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Unmodified Front BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(bvFront);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Unmodfied Rear BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(bvRear);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Unmodfied Turret BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(bvTurret);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Total Unmodfied BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(bvRear + bvFront + bvTurret);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Unmodified Front non-arm BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(nonArmFront);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Unmodfied Rear non-arm BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(nonArmRear);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        boolean halveRear = true;</b>
<b class="nc">&nbsp;        boolean turretFront = true;</b>
<b class="nc">&nbsp;        if (nonArmFront &lt;= nonArmRear) {</b>
<b class="nc">&nbsp;            halveRear = false;</b>
<b class="nc">&nbsp;            turretFront = false;</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;halving front instead of rear weapon BVs&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;turret mounted weapon BVs count as rear firing&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Weapon Heat:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // here we store the modified BV and heat of all heat-using weapons,
&nbsp;        // to later be sorted by BV
<b class="nc">&nbsp;        ArrayList&lt;ArrayList&lt;Object&gt;&gt; heatBVs = new ArrayList&lt;ArrayList&lt;Object&gt;&gt;();</b>
&nbsp;        // BVs of non-heat-using weapons
<b class="nc">&nbsp;        ArrayList&lt;ArrayList&lt;Object&gt;&gt; nonHeatBVs = new ArrayList&lt;ArrayList&lt;Object&gt;&gt;();</b>
&nbsp;        // total up maximum heat generated
&nbsp;        // and add up BVs for ammo-using weapon types for excessive ammo rule
<b class="nc">&nbsp;        Map&lt;String, Double&gt; weaponsForExcessiveAmmo = new HashMap&lt;String, Double&gt;();</b>
<b class="nc">&nbsp;        double maximumHeat = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getWeaponList()) {</b>
<b class="nc">&nbsp;            WeaponType wtype = (WeaponType) mounted.getType();</b>
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_B_POD)</b>
<b class="nc">&nbsp;                    || wtype.hasFlag(WeaponType.F_M_POD)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            double weaponHeat = wtype.getHeat();</b>
&nbsp;
&nbsp;            // only count non-damaged equipment
<b class="nc">&nbsp;            if (mounted.isMissing() || mounted.isHit() || mounted.isDestroyed()</b>
<b class="nc">&nbsp;                    || mounted.isBreached()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
&nbsp;            // one shot weapons count 1/4
<b class="nc">&nbsp;            if ((wtype.getAmmoType() == AmmoType.T_ROCKET_LAUNCHER)</b>
<b class="nc">&nbsp;                    || wtype.hasFlag(WeaponType.F_ONESHOT)) {</b>
<b class="nc">&nbsp;                weaponHeat *= 0.25;</b>
&nbsp;            }
&nbsp;
&nbsp;            // double heat for ultras
<b class="nc">&nbsp;            if ((wtype.getAmmoType() == AmmoType.T_AC_ULTRA)</b>
<b class="nc">&nbsp;                    || (wtype.getAmmoType() == AmmoType.T_AC_ULTRA_THB)) {</b>
<b class="nc">&nbsp;                weaponHeat *= 2;</b>
&nbsp;            }
&nbsp;
&nbsp;            // Six times heat for RAC
<b class="nc">&nbsp;            if (wtype.getAmmoType() == AmmoType.T_AC_ROTARY) {</b>
<b class="nc">&nbsp;                weaponHeat *= 6;</b>
&nbsp;            }
&nbsp;
&nbsp;            // 1d6 extra heat; add half for heat calculations (1d3/+2 for small pulse)
<b class="nc">&nbsp;            if ((wtype instanceof ISERLaserLargePrototype)</b>
&nbsp;                    || (wtype instanceof ISPulseLaserLargePrototype)
&nbsp;                    || (wtype instanceof ISPulseLaserMediumPrototype)
&nbsp;                    || (wtype instanceof ISPulseLaserMediumRecovered)) {
<b class="nc">&nbsp;                weaponHeat += 3;</b>
<b class="nc">&nbsp;            } else if (wtype instanceof ISPulseLaserSmallPrototype) {</b>
<b class="nc">&nbsp;                weaponHeat += 2;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            String name = wtype.getName();</b>
&nbsp;
&nbsp;
&nbsp;            // RISC laser pulse module adds 2 heat
<b class="nc">&nbsp;            if ((wtype.hasFlag(WeaponType.F_LASER)) &amp;&amp; (mounted.getLinkedBy() != null)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinkedBy().getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinkedBy().getType().hasFlag(MiscType.F_RISC_LASER_PULSE_MODULE))) {</b>
<b class="nc">&nbsp;                name = name.concat(&quot; with RISC Laser Pulse Module&quot;);</b>
<b class="nc">&nbsp;                weaponHeat += 2;</b>
&nbsp;            }
&nbsp;
&nbsp;            // laser insulator reduce heat by 1, to a minimum of 1
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_LASER)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinkedBy() != null)</b>
<b class="nc">&nbsp;                    &amp;&amp; !mounted.getLinkedBy().isInoperable()</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinkedBy().getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; mounted.getLinkedBy().getType()</b>
<b class="nc">&nbsp;                            .hasFlag(MiscType.F_LASER_INSULATOR)) {</b>
<b class="nc">&nbsp;                weaponHeat -= 1;</b>
<b class="nc">&nbsp;                if (weaponHeat == 0) {</b>
<b class="nc">&nbsp;                    weaponHeat++;</b>
&nbsp;                }
&nbsp;            }
&nbsp;
&nbsp;            // half heat for streaks
<b class="nc">&nbsp;            if ((wtype.getAmmoType() == AmmoType.T_SRM_STREAK)</b>
<b class="nc">&nbsp;                    || (wtype.getAmmoType() == AmmoType.T_MRM_STREAK)</b>
<b class="nc">&nbsp;                    || (wtype.getAmmoType() == AmmoType.T_LRM_STREAK)</b>
<b class="nc">&nbsp;                    || (wtype.getAmmoType() == AmmoType.T_IATM)) {</b>
<b class="nc">&nbsp;                weaponHeat *= 0.5;</b>
&nbsp;            }
&nbsp;            // check to see if the weapon is a PPC and has a Capacitor attached
&nbsp;            // to it
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_PPC)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinkedBy() != null)) {</b>
<b class="nc">&nbsp;                name = name.concat(&quot; with Capacitor&quot;);</b>
<b class="nc">&nbsp;                weaponHeat += 5;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(name);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot;+ &quot;);</b>
<b class="nc">&nbsp;            bvText.append(weaponHeat);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;            double dBV = wtype.getBV(this);</b>
<b class="nc">&nbsp;            if (hasWorkingMisc(MiscType.F_DRONE_OPERATING_SYSTEM)) {</b>
<b class="nc">&nbsp;                dBV *= 0.8;</b>
&nbsp;            }
<b class="nc">&nbsp;            String weaponName = mounted.getName()</b>
<b class="nc">&nbsp;                    + (mounted.isRearMounted() ? &quot;(R)&quot; : &quot;&quot;);</b>
&nbsp;
&nbsp;            // don&#39;t count AMS, it&#39;s defensive
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_AMS)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;            // calc MG Array here:
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_MGA)) {</b>
<b class="nc">&nbsp;                double mgBV = 0;</b>
<b class="nc">&nbsp;                for (int eqNum : mounted.getBayWeapons()) {</b>
<b class="nc">&nbsp;                    Mounted mg = getEquipment(eqNum);</b>
<b class="nc">&nbsp;                    if ((mg != null) &amp;&amp; (!mg.isDestroyed())) {</b>
<b class="nc">&nbsp;                        mgBV += mg.getType().getBV(this);</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                dBV = mgBV * 0.67;</b>
&nbsp;            }
&nbsp;
&nbsp;            // artemis bumps up the value
&nbsp;            // PPC caps do, too
<b class="nc">&nbsp;            if (mounted.getLinkedBy() != null) {</b>
&nbsp;                // check to see if the weapon is a PPC and has a Capacitor
&nbsp;                // attached to it
<b class="nc">&nbsp;                if (wtype.hasFlag(WeaponType.F_PPC)) {</b>
<b class="nc">&nbsp;                    dBV += ((MiscType) mounted.getLinkedBy().getType()).getBV(</b>
&nbsp;                            this, mounted);
<b class="nc">&nbsp;                    weaponName = weaponName.concat(&quot; with Capacitor&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                Mounted mLinker = mounted.getLinkedBy();</b>
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_ARTEMIS)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.2;</b>
<b class="nc">&nbsp;                    weaponName = weaponName.concat(&quot; with Artemis IV&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_ARTEMIS_V)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.3;</b>
<b class="nc">&nbsp;                    weaponName = weaponName.concat(&quot; with Artemis V&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_APOLLO)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.15;</b>
<b class="nc">&nbsp;                    weaponName = weaponName.concat(&quot; with Apollo&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                if ((mLinker.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                        &amp;&amp; mLinker.getType().hasFlag(MiscType.F_RISC_LASER_PULSE_MODULE)) {</b>
<b class="nc">&nbsp;                    dBV *= 1.15;</b>
<b class="nc">&nbsp;                    weaponName = weaponName.concat(&quot; with RISC Laser Pulse Module&quot;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;            // if linked to AES, multiply by 1.25
<b class="nc">&nbsp;            if (hasFunctionalArmAES(mounted.getLocation())) {</b>
<b class="nc">&nbsp;                dBV *= 1.25;</b>
&nbsp;            }
&nbsp;            // and we&#39;ll add the tcomp here too
<b class="nc">&nbsp;            if (wtype.hasFlag(WeaponType.F_DIRECT_FIRE) &amp;&amp; hasTargComp) {</b>
<b class="nc">&nbsp;                dBV *= 1.25;</b>
&nbsp;            }
&nbsp;            // half for being rear mounted (or front mounted, when more rear-
&nbsp;            // than front-mounted un-modded BV
&nbsp;            // or for being turret mounted, when more rear-mounted BV than front
&nbsp;            // mounted BV
<b class="nc">&nbsp;            if ((!isArm(mounted.getLocation())</b>
<b class="nc">&nbsp;                    &amp;&amp; !mounted.isMechTurretMounted() &amp;&amp; ((mounted</b>
<b class="nc">&nbsp;                    .isRearMounted() &amp;&amp; halveRear) || (!mounted.isRearMounted() &amp;&amp; !halveRear)))</b>
<b class="nc">&nbsp;                    || (mounted.isMechTurretMounted() &amp;&amp; ((!turretFront &amp;&amp; halveRear) || (turretFront &amp;&amp; !halveRear)))) {</b>
<b class="nc">&nbsp;                dBV /= 2;</b>
&nbsp;            }
&nbsp;
&nbsp;            // ArrayList that stores weapon values
&nbsp;            // stores a double first (BV), then an Integer (heat),
&nbsp;            // then a String (weapon name)
&nbsp;            // for 0 heat weapons, just stores BV and name
<b class="nc">&nbsp;            ArrayList&lt;Object&gt; weaponValues = new ArrayList&lt;Object&gt;();</b>
<b class="nc">&nbsp;            if (weaponHeat &gt; 0) {</b>
&nbsp;                // store heat and BV, for sorting a few lines down;
<b class="nc">&nbsp;                weaponValues.add(dBV);</b>
<b class="nc">&nbsp;                weaponValues.add(weaponHeat);</b>
<b class="nc">&nbsp;                weaponValues.add(weaponName);</b>
<b class="nc">&nbsp;                heatBVs.add(weaponValues);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                weaponValues.add(dBV);</b>
<b class="nc">&nbsp;                weaponValues.add(weaponName);</b>
<b class="nc">&nbsp;                nonHeatBVs.add(weaponValues);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            maximumHeat += weaponHeat;</b>
&nbsp;            // add up BV of ammo-using weapons for each type of weapon,
&nbsp;            // to compare with ammo BV later for excessive ammo BV rule
<b class="nc">&nbsp;            if (!((wtype.hasFlag(WeaponType.F_ENERGY) &amp;&amp; !((wtype.getAmmoType() == AmmoType.T_PLASMA)</b>
<b class="nc">&nbsp;                    || (wtype.getAmmoType() == AmmoType.T_VEHICLE_FLAMER)</b>
<b class="nc">&nbsp;                    || (wtype.getAmmoType() == AmmoType.T_HEAVY_FLAMER) || (wtype</b>
<b class="nc">&nbsp;                    .getAmmoType() == AmmoType.T_CHEMICAL_LASER)))</b>
<b class="nc">&nbsp;                    || wtype.hasFlag(WeaponType.F_ONESHOT)</b>
<b class="nc">&nbsp;                    || wtype.hasFlag(WeaponType.F_INFANTRY) || (wtype</b>
<b class="nc">&nbsp;                        .getAmmoType() == AmmoType.T_NA))) {</b>
<b class="nc">&nbsp;                String key = wtype.getAmmoType() + &quot;:&quot; + wtype.getRackSize();</b>
<b class="nc">&nbsp;                if (!weaponsForExcessiveAmmo.containsKey(key)) {</b>
<b class="nc">&nbsp;                    weaponsForExcessiveAmmo.put(key, wtype.getBV(this));</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    weaponsForExcessiveAmmo.put(key, wtype.getBV(this)</b>
<b class="nc">&nbsp;                            + weaponsForExcessiveAmmo.get(key));</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        if (hasVibroblades()) {</b>
&nbsp;
<b class="nc">&nbsp;            for (int location = Mech.LOC_RARM; location &lt;= Mech.LOC_LARM; location++) {</b>
<b class="nc">&nbsp;                for (int slot = 0; slot &lt; locations(); slot++) {</b>
<b class="nc">&nbsp;                    CriticalSlot cs = getCritical(location, slot);</b>
&nbsp;
<b class="nc">&nbsp;                    if ((cs != null)</b>
<b class="nc">&nbsp;                            &amp;&amp; (cs.getType() == CriticalSlot.TYPE_EQUIPMENT)) {</b>
<b class="nc">&nbsp;                        Mounted mount = cs.getMount();</b>
<b class="nc">&nbsp;                        if ((mount.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                                &amp;&amp; ((MiscType) mount.getType())</b>
<b class="nc">&nbsp;                                        .hasFlag(MiscType.F_CLUB)</b>
<b class="nc">&nbsp;                                &amp;&amp; ((MiscType) mount.getType()).isVibroblade()) {</b>
&nbsp;
<b class="nc">&nbsp;                            ArrayList&lt;Object&gt; weaponValues = new ArrayList&lt;Object&gt;();</b>
<b class="nc">&nbsp;                            double dBV = ((MiscType) mount.getType())</b>
<b class="nc">&nbsp;                                    .getBV(this);</b>
<b class="nc">&nbsp;                            if (hasFunctionalArmAES(mount.getLocation())) {</b>
<b class="nc">&nbsp;                                dBV *= 1.25;</b>
&nbsp;                            }
<b class="nc">&nbsp;                            weaponValues.add(dBV);</b>
<b class="nc">&nbsp;                            weaponValues.add((double) getActiveVibrobladeHeat(</b>
&nbsp;                                    location, true));
<b class="nc">&nbsp;                            weaponValues.add(mount.getName());</b>
<b class="nc">&nbsp;                            heatBVs.add(weaponValues);</b>
&nbsp;
<b class="nc">&nbsp;                            bvText.append(startRow);</b>
<b class="nc">&nbsp;                            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                            bvText.append(mount.getName());</b>
<b class="nc">&nbsp;                            bvText.append(endColumn);</b>
<b class="nc">&nbsp;                            bvText.append(startColumn);</b>
<b class="nc">&nbsp;                            bvText.append(endColumn);</b>
<b class="nc">&nbsp;                            bvText.append(startColumn);</b>
<b class="nc">&nbsp;                            bvText.append(&quot;+ &quot;);</b>
<b class="nc">&nbsp;                            bvText.append(getActiveVibrobladeHeat(location,</b>
&nbsp;                                    true));
<b class="nc">&nbsp;                            bvText.append(endColumn);</b>
<b class="nc">&nbsp;                            bvText.append(endRow);</b>
<b class="nc">&nbsp;                            maximumHeat += getActiveVibrobladeHeat(location,</b>
&nbsp;                                    true);
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Total Heat:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;= &quot;);</b>
<b class="nc">&nbsp;        bvText.append(maximumHeat);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Weapons with no heat at full BV:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;        // count heat-free weapons always at full modified BV
<b class="nc">&nbsp;        for (ArrayList&lt;Object&gt; nonHeatWeapon : nonHeatBVs) {</b>
<b class="nc">&nbsp;            weaponBV += (Double) nonHeatWeapon.get(0);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(nonHeatWeapon.get(1));</b>
<b class="nc">&nbsp;            if (nonHeatWeapon.get(1).toString().length() &lt; 8) {</b>
<b class="nc">&nbsp;                bvText.append(&quot;\t&quot;);</b>
&nbsp;            }
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(nonHeatWeapon.get(0));</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Heat Modified Weapons BV: &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        if (maximumHeat &gt; mechHeatEfficiency) {</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;(Heat Exceeds Mech Heat Efficiency) &quot;);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (maximumHeat &lt;= mechHeatEfficiency) {</b>
&nbsp;
&nbsp;            // count all weapons equal
<b class="nc">&nbsp;            for (ArrayList&lt;Object&gt; weaponValues : heatBVs) {</b>
&nbsp;                // name
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                bvText.append(weaponValues.get(2));</b>
<b class="nc">&nbsp;                weaponBV += (Double) weaponValues.get(0);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                bvText.append(weaponValues.get(0));</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;            }</b>
&nbsp;        } else {
&nbsp;            // this will count heat-generating weapons at full modified BV until
&nbsp;            // heatefficiency is reached or passed with one weapon
&nbsp;
&nbsp;            // sort the heat-using weapons by modified BV
<b class="nc">&nbsp;            Collections.sort(heatBVs, new Comparator&lt;ArrayList&lt;Object&gt;&gt;() {</b>
&nbsp;                @Override
&nbsp;                public int compare(ArrayList&lt;Object&gt; obj1,
&nbsp;                        ArrayList&lt;Object&gt; obj2) {
<b class="nc">&nbsp;                    Double obj1BV = (Double) obj1.get(0); // BV</b>
<b class="nc">&nbsp;                    Double obj2BV = (Double) obj2.get(0); // BV</b>
&nbsp;                    
&nbsp;                    // first element in the the ArrayList is BV, second is heat
&nbsp;                    // if same BV, lower heat first
<b class="nc">&nbsp;                    if(obj1BV.equals(obj2BV)) {</b>
<b class="nc">&nbsp;                        Double obj1Heat = (Double) obj1.get(1);</b>
<b class="nc">&nbsp;                        Double obj2Heat = (Double) obj2.get(1);</b>
&nbsp;                        
<b class="nc">&nbsp;                        return Double.compare(obj1Heat, obj2Heat);</b>
&nbsp;                    }
&nbsp;                    
&nbsp;                    // higher BV first
<b class="nc">&nbsp;                    return Double.compare(obj2BV, obj1BV);</b>
&nbsp;                }
&nbsp;            });
&nbsp;            // count heat-generating weapons at full modified BV until
&nbsp;            // heatefficiency is reached or
&nbsp;            // passed with one weapon
<b class="nc">&nbsp;            double heatAdded = 0;</b>
<b class="nc">&nbsp;            for (ArrayList&lt;Object&gt; weaponValues : heatBVs) {</b>
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                bvText.append(weaponValues.get(2));</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                double dBV = (Double) weaponValues.get(0);</b>
<b class="nc">&nbsp;                if (heatAdded &gt;= mechHeatEfficiency) {</b>
<b class="nc">&nbsp;                    if (useReducedOverheatModifierBV()) {</b>
<b class="nc">&nbsp;                        dBV /= 10;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        dBV /= 2;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (heatAdded &gt;= mechHeatEfficiency) {</b>
<b class="nc">&nbsp;                    if (useReducedOverheatModifierBV()) {</b>
<b class="nc">&nbsp;                        bvText.append(&quot;Heat efficiency reached, BV * 0.1&quot;);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                    bvText.append(&quot;Heat efficiency reached, half BV&quot;);</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                heatAdded += (Double) weaponValues.get(1);</b>
<b class="nc">&nbsp;                weaponBV += dBV;</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(dBV);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(&quot;Heat count: &quot; + heatAdded);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Total Weapons BV Adjusted For Heat:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(weaponBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Misc Offensive Equipment: &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
&nbsp;        // add offensive misc. equipment BV (everything except AMS, A-Pod, ECM -
&nbsp;        // BMR p152)
<b class="nc">&nbsp;        double oEquipmentBV = 0;</b>
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mounted.getType();</b>
&nbsp;
&nbsp;            // don&#39;t count destroyed equipment
<b class="nc">&nbsp;            if (mounted.isDestroyed()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;            // vibroblades have been counted under weapons
<b class="nc">&nbsp;            if ((mounted.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; ((MiscType) mounted.getType()).hasFlag(MiscType.F_CLUB)</b>
<b class="nc">&nbsp;                    &amp;&amp; ((MiscType) mounted.getType()).isVibroblade()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_ECM)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_BAP)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_AP_POD)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_VIRAL_JAMMER_DECOY)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_VIRAL_JAMMER_HOMING)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_MASS)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_HEAVY_BRIDGE_LAYER)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_MEDIUM_BRIDGE_LAYER)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_LIGHT_BRIDGE_LAYER)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_CHAFF_POD)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_TARGCOMP)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_SPIKES)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_HARJEL_II)</b>
<b class="nc">&nbsp;                    || mtype.hasFlag(MiscType.F_HARJEL_III)</b>
<b class="nc">&nbsp;                    || (mtype.hasFlag(MiscType.F_CLUB) &amp;&amp; (mtype</b>
<b class="nc">&nbsp;                            .hasSubType(MiscType.S_SHIELD_LARGE)</b>
<b class="nc">&nbsp;                            || mtype.hasSubType(MiscType.S_SHIELD_MEDIUM) || mtype</b>
<b class="nc">&nbsp;                                .hasSubType(MiscType.S_SHIELD_SMALL)))) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            double bv = mtype.getBV(this);</b>
&nbsp;            // if physical weapon linked to AES, multiply by 1.25
<b class="nc">&nbsp;            if ((mtype.hasFlag(MiscType.F_CLUB) || mtype</b>
<b class="nc">&nbsp;                    .hasFlag(MiscType.F_HAND_WEAPON))</b>
<b class="nc">&nbsp;                    &amp;&amp; hasFunctionalArmAES(mounted.getLocation())) {</b>
<b class="nc">&nbsp;                bv *= 1.25;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (bv &gt; 0) {</b>
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                bvText.append(mounted.getName());</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(bv);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            oEquipmentBV += bv;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Total Misc Offensive Equipment BV: &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(oEquipmentBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        weaponBV += oEquipmentBV;</b>
&nbsp;
&nbsp;        // add ammo bv
<b class="nc">&nbsp;        double ammoBV = 0;</b>
&nbsp;        // extra BV for when we have semiguided LRMs and someone else has TAG on
&nbsp;        // our team
<b class="nc">&nbsp;        double tagBV = 0;</b>
<b class="nc">&nbsp;        Map&lt;String, Double&gt; ammo = new HashMap&lt;String, Double&gt;();</b>
<b class="nc">&nbsp;        ArrayList&lt;String&gt; keys = new ArrayList&lt;String&gt;();</b>
<b class="nc">&nbsp;        for (Mounted mounted : getAmmo()) {</b>
<b class="nc">&nbsp;            AmmoType atype = (AmmoType) mounted.getType();</b>
&nbsp;
&nbsp;            // don&#39;t count depleted ammo
<b class="nc">&nbsp;            if (mounted.getUsableShotsLeft() == 0) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
&nbsp;            // don&#39;t count AMS, it&#39;s defensive
<b class="nc">&nbsp;            if ((atype.getAmmoType() == AmmoType.T_AMS) || (atype.getAmmoType() == AmmoType.T_APDS)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
&nbsp;            // don&#39;t count oneshot ammo, it&#39;s considered part of the launcher.
<b class="nc">&nbsp;            if (mounted.getLocation() == Entity.LOC_NONE) {</b>
&nbsp;                // assumption: ammo without a location is for a oneshot weapon
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;            // semiguided or homing ammo might count double
<b class="nc">&nbsp;            if ((atype.getMunitionType() == AmmoType.M_SEMIGUIDED)</b>
<b class="nc">&nbsp;                    || (atype.getMunitionType() == AmmoType.M_HOMING)) {</b>
<b class="nc">&nbsp;                IPlayer tmpP = getOwner();</b>
&nbsp;
<b class="nc">&nbsp;                if (tmpP != null) {</b>
&nbsp;                    // Okay, actually check for friendly TAG.
<b class="nc">&nbsp;                    if (tmpP.hasTAG()) {</b>
<b class="nc">&nbsp;                        tagBV += atype.getBV(this);</b>
<b class="nc">&nbsp;                    } else if ((tmpP.getTeam() != IPlayer.TEAM_NONE)</b>
&nbsp;                            &amp;&amp; (game != null)) {
<b class="nc">&nbsp;                        for (Enumeration&lt;Team&gt; e = game.getTeams(); e</b>
<b class="nc">&nbsp;                                .hasMoreElements();) {</b>
<b class="nc">&nbsp;                            Team m = e.nextElement();</b>
<b class="nc">&nbsp;                            if (m.getId() == tmpP.getTeam()) {</b>
<b class="nc">&nbsp;                                if (m.hasTAG(game)) {</b>
<b class="nc">&nbsp;                                    tagBV += atype.getBV(this);</b>
&nbsp;                                }
&nbsp;                                // A player can&#39;t be on two teams.
&nbsp;                                // If we check his team and don&#39;t give the
&nbsp;                                // penalty, that&#39;s it.
&nbsp;                                break;
&nbsp;                            }
<b class="nc">&nbsp;                        }</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            String key = atype.getAmmoType() + &quot;:&quot; + atype.getRackSize();</b>
<b class="nc">&nbsp;            if (!keys.contains(key)) {</b>
<b class="nc">&nbsp;                keys.add(key);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (!ammo.containsKey(key)) {</b>
<b class="nc">&nbsp;                ammo.put(key, atype.getBV(this));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                ammo.put(key, atype.getBV(this) + ammo.get(key));</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // Excessive ammo rule:
&nbsp;        // Only count BV for ammo for a weapontype until the BV of all weapons
&nbsp;        // of that
&nbsp;        // type on the mech is reached.
<b class="nc">&nbsp;        for (String key : keys) {</b>
&nbsp;
<b class="nc">&nbsp;            if (weaponsForExcessiveAmmo.get(key) != null) {</b>
<b class="nc">&nbsp;                if (ammo.get(key) &gt; weaponsForExcessiveAmmo.get(key)) {</b>
<b class="nc">&nbsp;                    ammoBV += weaponsForExcessiveAmmo.get(key);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    ammoBV += ammo.get(key);</b>
&nbsp;                }
&nbsp;            } else {
&nbsp;                // Ammo with no matching weapons counts 0, unless it&#39;s a coolant
&nbsp;                // pod
&nbsp;                // because coolant pods have no matching weapon
<b class="nc">&nbsp;                if (key.equals(Integer.valueOf(AmmoType.T_COOLANT_POD).toString()</b>
&nbsp;                        + &quot;1&quot;)) {
<b class="nc">&nbsp;                    ammoBV += ammo.get(key);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        weaponBV += ammoBV;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Total Ammo BV: &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(ammoBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        double aesMultiplier = 1;</b>
<b class="nc">&nbsp;        if (hasFunctionalArmAES(Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;            aesMultiplier += 0.1;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasFunctionalArmAES(Mech.LOC_RARM)) {</b>
<b class="nc">&nbsp;            aesMultiplier += 0.1;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasFunctionalLegAES()) {</b>
<b class="nc">&nbsp;            if (this instanceof BipedMech) {</b>
<b class="nc">&nbsp;                aesMultiplier += 0.2;</b>
<b class="nc">&nbsp;            } else if (this instanceof QuadMech) {</b>
<b class="nc">&nbsp;                aesMultiplier += 0.4;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        double weight = this.weight * aesMultiplier;</b>
&nbsp;
<b class="nc">&nbsp;        if (aesMultiplier &gt; 1) {</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;Weight x AES Multiplier &quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(this.weight);</b>
<b class="nc">&nbsp;            bvText.append(&quot; x &quot;);</b>
<b class="nc">&nbsp;            bvText.append(aesMultiplier);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot; = &quot;);</b>
<b class="nc">&nbsp;            bvText.append(weight);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
&nbsp;        // add tonnage, adjusted for TSM
<b class="nc">&nbsp;        if (hasTSM()) {</b>
<b class="nc">&nbsp;            weaponBV += weight * 1.5;</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot;Add weight + TSM Modifier&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(weight);</b>
<b class="nc">&nbsp;            bvText.append(&quot; * 1.5&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(weight * 1.5);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
<b class="nc">&nbsp;        } else if (hasIndustrialTSM()) {</b>
<b class="nc">&nbsp;            weaponBV += weight * 1.15;</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;Add weight + Industrial TSM Modifier&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(weight);</b>
<b class="nc">&nbsp;            bvText.append(&quot; * 1.115&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(weight * 1.15);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            weaponBV += weight;</b>
<b class="nc">&nbsp;            bvText.append(startRow);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;            bvText.append(&quot;Add weight&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot;+&quot;);</b>
<b class="nc">&nbsp;            bvText.append(weight);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getCockpitType() == Mech.COCKPIT_INDUSTRIAL)</b>
<b class="nc">&nbsp;                || (getCockpitType() == Mech.COCKPIT_PRIMITIVE_INDUSTRIAL)) {</b>
&nbsp;            // industrial without advanced firing control get&#39;s 0.9 mod to
&nbsp;            // offensive BV
<b class="nc">&nbsp;            bvText.append(&quot;Weapon BV * Firing Control Modifier&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(weaponBV);</b>
<b class="nc">&nbsp;            bvText.append(&quot; * &quot;);</b>
<b class="nc">&nbsp;            bvText.append(&quot;0.9&quot;);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            weaponBV *= 0.9;</b>
<b class="nc">&nbsp;            bvText.append(startColumn);</b>
<b class="nc">&nbsp;            bvText.append(&quot; = &quot;);</b>
<b class="nc">&nbsp;            bvText.append(weaponBV);</b>
<b class="nc">&nbsp;            bvText.append(endColumn);</b>
<b class="nc">&nbsp;            bvText.append(endRow);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        double speedFactor = Math</b>
<b class="nc">&nbsp;                .pow(1 + ((((double) runMP + (Math</b>
<b class="nc">&nbsp;                        .round(Math.max(jumpMP, umuMP) / 2.0))) - 5) / 10), 1.2);</b>
<b class="nc">&nbsp;        speedFactor = Math.round(speedFactor * 100) / 100.0;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Final Speed Factor: &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(speedFactor);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        obv = weaponBV * speedFactor;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;Weapons BV * Speed Factor &quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(weaponBV);</b>
<b class="nc">&nbsp;        bvText.append(&quot; * &quot;);</b>
<b class="nc">&nbsp;        bvText.append(speedFactor);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot; = &quot;);</b>
<b class="nc">&nbsp;        bvText.append(obv);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        if (useGeometricMeanBV()) {</b>
<b class="nc">&nbsp;            bvText.append(&quot;2 * sqrt(Offensive BV * Defensive BV&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            bvText.append(&quot;Offensive BV + Defensive BV&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
&nbsp;        double finalBV;
<b class="nc">&nbsp;        if (useGeometricMeanBV()) {</b>
<b class="nc">&nbsp;            finalBV = 2 * Math.sqrt(obv * dbv);</b>
<b class="nc">&nbsp;            if (finalBV == 0) {</b>
<b class="nc">&nbsp;                finalBV = dbv + obv;</b>
&nbsp;            }
<b class="nc">&nbsp;            bvText.append(&quot;2 * sqrt(&quot;);</b>
<b class="nc">&nbsp;            bvText.append(obv);</b>
<b class="nc">&nbsp;            bvText.append(&quot; + &quot;);</b>
<b class="nc">&nbsp;            bvText.append(dbv);</b>
<b class="nc">&nbsp;            bvText.append(&quot;)&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            finalBV = dbv + obv;</b>
<b class="nc">&nbsp;            bvText.append(dbv);</b>
<b class="nc">&nbsp;            bvText.append(&quot; + &quot;);</b>
<b class="nc">&nbsp;            bvText.append(obv);</b>
&nbsp;        }
<b class="nc">&nbsp;        double totalBV = finalBV;</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot; = &quot;);</b>
<b class="nc">&nbsp;        bvText.append(finalBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        double cockpitMod = 1;</b>
<b class="nc">&nbsp;        if ((getCockpitType() == Mech.COCKPIT_SMALL)</b>
<b class="nc">&nbsp;                || (getCockpitType() == Mech.COCKPIT_TORSO_MOUNTED)</b>
<b class="nc">&nbsp;                || (getCockpitType() == Mech.COCKPIT_SMALL_COMMAND_CONSOLE)) {</b>
<b class="nc">&nbsp;            cockpitMod = 0.95;</b>
<b class="nc">&nbsp;            finalBV *= cockpitMod;</b>
<b class="nc">&nbsp;        } else if (hasWorkingMisc(MiscType.F_DRONE_OPERATING_SYSTEM)) {</b>
<b class="nc">&nbsp;            finalBV *= 0.95;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_INTERFACE) {</b>
<b class="nc">&nbsp;            cockpitMod = 1.3;</b>
<b class="nc">&nbsp;            finalBV *= cockpitMod;</b>
&nbsp;        }
<b class="nc">&nbsp;        finalBV = Math.round(finalBV);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Total BV * Cockpit Modifier&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(totalBV);</b>
<b class="nc">&nbsp;        bvText.append(&quot; * &quot;);</b>
<b class="nc">&nbsp;        bvText.append(cockpitMod);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot; = &quot;);</b>
<b class="nc">&nbsp;        bvText.append(finalBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Final BV&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(finalBV);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endTable);</b>
<b class="nc">&nbsp;        bvText.append(&quot;&lt;/BODY&gt;&lt;/HTML&gt;&quot;);</b>
&nbsp;
&nbsp;        // we get extra bv from some stuff
<b class="nc">&nbsp;        double xbv = 0.0;</b>
&nbsp;        // extra BV for semi-guided lrm when TAG in our team
<b class="nc">&nbsp;        xbv += tagBV;</b>
<b class="nc">&nbsp;        if (!ignoreC3) {</b>
<b class="nc">&nbsp;            xbv += getExtraC3BV((int) Math.round(finalBV));</b>
&nbsp;        }
<b class="nc">&nbsp;        finalBV = (int) Math.round(finalBV + xbv);</b>
&nbsp;
&nbsp;        // and then factor in pilot
<b class="nc">&nbsp;        double pilotFactor = 1;</b>
<b class="nc">&nbsp;        if (!ignorePilot) {</b>
<b class="nc">&nbsp;            pilotFactor = getCrew().getBVSkillMultiplier(game);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int retVal = (int) Math.round((finalBV) * pilotFactor);</b>
&nbsp;
<b class="nc">&nbsp;        return retVal;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculate the C-bill cost of the mech. Passing null as the argument will
&nbsp;     * skip the detailed report processing.
&nbsp;     *
&nbsp;     * @return The cost in C-Bills of the &#39;Mech in question.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public double getCost(boolean ignoreAmmo) {
<b class="nc">&nbsp;        double[] costs = new double[17 + locations()];</b>
<b class="nc">&nbsp;        int i = 0;</b>
&nbsp;
<b class="nc">&nbsp;        double cockpitCost = 0;</b>
<b class="nc">&nbsp;        if (getCockpitType() == Mech.COCKPIT_TORSO_MOUNTED) {</b>
<b class="nc">&nbsp;            cockpitCost = 750000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_DUAL) {</b>
&nbsp;            // Solaris VII - The Game World (German) This is not actually
&nbsp;            // canonical as it
&nbsp;            // has never been repeated in any English language source including
&nbsp;            // Tech Manual
<b class="nc">&nbsp;            cockpitCost = 40000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_COMMAND_CONSOLE) {</b>
&nbsp;            // Command Consoles are listed as a cost of 500,000.
&nbsp;            // That appears to be in addition to the primary cockpit.
<b class="nc">&nbsp;            cockpitCost = 700000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_SMALL) {</b>
<b class="nc">&nbsp;            cockpitCost = 175000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_VRRP) {</b>
<b class="nc">&nbsp;            cockpitCost = 1250000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_INDUSTRIAL) {</b>
<b class="nc">&nbsp;            cockpitCost = 100000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_TRIPOD) {</b>
<b class="nc">&nbsp;            cockpitCost = 400000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_QUADVEE) {</b>
<b class="nc">&nbsp;            cockpitCost = 375000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_SUPERHEAVY) {</b>
<b class="nc">&nbsp;            cockpitCost = 300000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_SUPERHEAVY_COMMAND_CONSOLE) {</b>
&nbsp;            // The cost is the sum of both superheavy cockpit and command console
<b class="nc">&nbsp;            cockpitCost = 800000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_SUPERHEAVY_TRIPOD) {</b>
<b class="nc">&nbsp;            cockpitCost = 500000;</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_SMALL_COMMAND_CONSOLE) {</b>
&nbsp;            // The cost is the sum of both small and command console
<b class="nc">&nbsp;            cockpitCost = 675000;            </b>
&nbsp;        } else {
<b class="nc">&nbsp;            cockpitCost = 200000;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasEiCockpit()</b>
<b class="nc">&nbsp;                &amp;&amp; ((null != getCrew()) &amp;&amp; hasAbility(OptionsConstants.UNOFF_EI_IMPLANT))) {</b>
<b class="nc">&nbsp;            cockpitCost = 400000;</b>
&nbsp;        }
<b class="nc">&nbsp;        costs[i++] = cockpitCost;</b>
<b class="nc">&nbsp;        costs[i++] = 50000;// life support</b>
<b class="nc">&nbsp;        costs[i++] = weight * 2000;// sensors</b>
<b class="nc">&nbsp;        int muscCost = hasSCM() ? 10000 : hasTSM() ? 16000 : hasIndustrialTSM() ? 12000 : 2000;</b>
<b class="nc">&nbsp;        costs[i++] = muscCost * weight;// musculature</b>
<b class="nc">&nbsp;        double structureCost = EquipmentType.getStructureCost(structureType) * weight;// IS</b>
<b class="nc">&nbsp;        costs[i++] = structureCost;</b>
<b class="nc">&nbsp;        costs[i++] = getActuatorCost();// arm and/or leg actuators</b>
<b class="nc">&nbsp;        if(hasEngine()) {</b>
<b class="nc">&nbsp;            costs[i++] = (getEngine().getBaseCost() * getEngine().getRating() * weight) / 75.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getGyroType() == Mech.GYRO_XL) {</b>
<b class="nc">&nbsp;            costs[i++] = 750000 * (int) Math</b>
<b class="nc">&nbsp;                    .ceil((getOriginalWalkMP() * weight) / 100f) * 0.5;</b>
<b class="nc">&nbsp;        } else if (getGyroType() == Mech.GYRO_COMPACT) {</b>
<b class="nc">&nbsp;            costs[i++] = 400000 * (int) Math</b>
<b class="nc">&nbsp;                    .ceil((getOriginalWalkMP() * weight) / 100f) * 1.5;</b>
<b class="nc">&nbsp;        } else if (getGyroType() == Mech.GYRO_HEAVY_DUTY) {</b>
<b class="nc">&nbsp;            costs[i++] = 500000 * (int) Math</b>
<b class="nc">&nbsp;                    .ceil((getOriginalWalkMP() * weight) / 100f) * 2;</b>
<b class="nc">&nbsp;        } else if (getGyroType() == Mech.GYRO_STANDARD) {</b>
<b class="nc">&nbsp;            costs[i++] = 300000 * (int) Math</b>
<b class="nc">&nbsp;                    .ceil((getOriginalWalkMP() * weight) / 100f);</b>
&nbsp;        }
<b class="nc">&nbsp;        double jumpBaseCost = 200;</b>
&nbsp;        // You cannot have JJ&#39;s and UMU&#39;s on the same unit.
<b class="nc">&nbsp;        if (hasUMU()) {</b>
<b class="nc">&nbsp;            costs[i++] = Math.pow(getAllUMUCount(), 2.0) * weight</b>
&nbsp;                    * jumpBaseCost;
&nbsp;            // We could have Jump boosters
<b class="nc">&nbsp;            if (getJumpType() == Mech.JUMP_BOOSTER) {</b>
<b class="nc">&nbsp;                jumpBaseCost = 150;</b>
<b class="nc">&nbsp;                costs[i++] = Math.pow(getOriginalJumpMP(), 2.0) * weight</b>
&nbsp;                        * jumpBaseCost;
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            if (getJumpType() == Mech.JUMP_BOOSTER) {</b>
<b class="nc">&nbsp;                jumpBaseCost = 150;</b>
<b class="nc">&nbsp;            } else if (getJumpType() == Mech.JUMP_IMPROVED) {</b>
<b class="nc">&nbsp;                jumpBaseCost = 500;</b>
&nbsp;            }
<b class="nc">&nbsp;            costs[i++] = Math.pow(getOriginalJumpMP(), 2.0) * weight</b>
&nbsp;                    * jumpBaseCost;
&nbsp;        }
&nbsp;        // num of sinks we don&#39;t pay for
<b class="nc">&nbsp;        int freeSinks = hasDoubleHeatSinks() ? 0 : 10;</b>
<b class="nc">&nbsp;        int sinkCost = hasDoubleHeatSinks() ? 6000 : 2000;</b>
&nbsp;        // cost of sinks
<b class="nc">&nbsp;        costs[i++] = sinkCost * (heatSinks() - freeSinks);</b>
<b class="nc">&nbsp;        costs[i++] = hasFullHeadEject() ? 1725000 : 0;</b>
&nbsp;        // armored components
<b class="nc">&nbsp;        int armoredCrits = 0;</b>
<b class="nc">&nbsp;        for (int j = 0; j &lt; locations(); j++) {</b>
<b class="nc">&nbsp;            int numCrits = getNumberOfCriticals(j);</b>
<b class="nc">&nbsp;            for (int k = 0; k &lt; numCrits; k++) {</b>
<b class="nc">&nbsp;                CriticalSlot ccs = getCritical(j, k);</b>
<b class="nc">&nbsp;                if ((ccs != null) &amp;&amp; ccs.isArmored()</b>
<b class="nc">&nbsp;                        &amp;&amp; (ccs.getType() == CriticalSlot.TYPE_SYSTEM)) {</b>
<b class="nc">&nbsp;                    armoredCrits++;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        costs[i++] = armoredCrits * 150000;</b>
&nbsp;
&nbsp;        // armor
<b class="nc">&nbsp;        if (hasPatchworkArmor()) {</b>
<b class="nc">&nbsp;            for (int loc = 0; loc &lt; locations(); loc++) {</b>
<b class="nc">&nbsp;                costs[i++] += getArmorWeight(loc)</b>
<b class="nc">&nbsp;                        * EquipmentType.getArmorCost(armorType[loc]);</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            costs[i++] += getArmorWeight()</b>
<b class="nc">&nbsp;                    * EquipmentType.getArmorCost(armorType[0]);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        double weaponCost = getWeaponsAndEquipmentCost(ignoreAmmo);</b>
<b class="nc">&nbsp;        costs[i++] = weaponCost;</b>
&nbsp;
<b class="nc">&nbsp;        if (this instanceof LandAirMech) {</b>
<b class="nc">&nbsp;            costs[i++] = (structureCost + weaponCost)</b>
<b class="nc">&nbsp;                    * (((LandAirMech)this).getLAMType() == LandAirMech.LAM_BIMODAL? 0.65 : 0.75);</b>
<b class="nc">&nbsp;        } else if (this instanceof QuadVee) {</b>
<b class="nc">&nbsp;            costs[i++] = (structureCost + weaponCost) * 0.5;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            costs[i++] = 0;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        double cost = 0; // calculate the total</b>
<b class="nc">&nbsp;        for (int x = 0; x &lt; i; x++) {</b>
<b class="nc">&nbsp;            cost += costs[x];</b>
&nbsp;        }
&nbsp;        // TODO Decouple cost calculation from addCostDetails and eliminate duplicate code in getPriceMultiplier
<b class="nc">&nbsp;        double quirkMultiplier = 0;</b>
<b class="nc">&nbsp;        if (hasQuirk(OptionsConstants.QUIRK_POS_GOOD_REP_1)) {</b>
<b class="nc">&nbsp;        	quirkMultiplier = 1.1f;</b>
<b class="nc">&nbsp;        	cost *= quirkMultiplier;</b>
<b class="nc">&nbsp;        } else if (hasQuirk(OptionsConstants.QUIRK_POS_GOOD_REP_2)) {</b>
<b class="nc">&nbsp;        	quirkMultiplier = 1.25f;</b>
<b class="nc">&nbsp;        	cost *= quirkMultiplier;</b>
&nbsp;        }
<b class="nc">&nbsp;        costs[i++] = -quirkMultiplier; // negative just marks it as multiplier</b>
&nbsp;
<b class="nc">&nbsp;        double omniMultiplier = 0;</b>
<b class="nc">&nbsp;        if (isOmni()) {</b>
<b class="nc">&nbsp;            omniMultiplier = 1.25f;</b>
<b class="nc">&nbsp;            cost *= omniMultiplier;</b>
&nbsp;        }
<b class="nc">&nbsp;        costs[i++] = -omniMultiplier; // negative just marks it as multiplier</b>
&nbsp;
<b class="nc">&nbsp;        double weightMultiplier = 1 + (weight / 100f);</b>
<b class="nc">&nbsp;        if (isIndustrial()) {</b>
<b class="nc">&nbsp;            weightMultiplier = 1 + (weight / 400f);</b>
&nbsp;        }
<b class="nc">&nbsp;        costs[i++] = -weightMultiplier; // negative just marks it as multiplier</b>
<b class="nc">&nbsp;        cost = Math.round(cost * weightMultiplier);</b>
<b class="nc">&nbsp;        addCostDetails(cost, costs);</b>
<b class="nc">&nbsp;        return cost;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public double getPriceMultiplier() {
<b class="nc">&nbsp;        double priceMultiplier = 1.0f;</b>
<b class="nc">&nbsp;        if (hasQuirk(OptionsConstants.QUIRK_POS_GOOD_REP_1)) {</b>
<b class="nc">&nbsp;            priceMultiplier *= 1.1f;</b>
<b class="nc">&nbsp;        } else if (hasQuirk(OptionsConstants.QUIRK_POS_GOOD_REP_2)) {</b>
<b class="nc">&nbsp;            priceMultiplier *= 1.25f;</b>
&nbsp;        }
&nbsp;        // TODO Negative price quirks (Bad Reputation)
&nbsp;
<b class="nc">&nbsp;        if (isOmni()) {</b>
<b class="nc">&nbsp;            priceMultiplier *= 1.25f;</b>
&nbsp;        }
&nbsp;
&nbsp;        // Weight multiplier
<b class="nc">&nbsp;        priceMultiplier *= 1 + (weight / 100f);</b>
<b class="nc">&nbsp;        if (isIndustrial()) {</b>
<b class="nc">&nbsp;            priceMultiplier = 1 + (weight / 400f);</b>
&nbsp;        }
<b class="nc">&nbsp;        return priceMultiplier;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    protected int implicitClanCASE() {
<b class="nc">&nbsp;        if (!isClan()) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        int explicit = 0;</b>
<b class="nc">&nbsp;        Set&lt;Integer&gt; caseLocations = new HashSet&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="nc">&nbsp;            if ((m.getType() instanceof MiscType) &amp;&amp; (m.getType().hasFlag(MiscType.F_CASE))) {</b>
<b class="nc">&nbsp;                explicit++;</b>
<b class="nc">&nbsp;            } else if (m.getType().isExplosive(m)) {</b>
<b class="nc">&nbsp;                caseLocations.add(m.getLocation());</b>
<b class="nc">&nbsp;                if (m.getSecondLocation() &gt;= 0) {</b>
<b class="nc">&nbsp;                    caseLocations.add(m.getSecondLocation());</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return Math.max(0, caseLocations.size() - explicit);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void addCostDetails(double cost, double[] costs) {
<b class="nc">&nbsp;        bvText = new StringBuffer();</b>
<b class="nc">&nbsp;        String[] left = { &quot;Cockpit&quot;, &quot;Life Support&quot;, &quot;Sensors&quot;, &quot;Myomer&quot;,</b>
&nbsp;                &quot;Structure&quot;, &quot;Actuators&quot;, &quot;Engine&quot;, &quot;Gyro&quot;, &quot;Jump Jets&quot;,
&nbsp;                &quot;Heatsinks&quot;, &quot;Full Head Ejection System&quot;,
&nbsp;                &quot;Armored System Components&quot;, &quot;Armor&quot;, &quot;Equipment&quot;,
&nbsp;                &quot;Conversion Equipment&quot;, &quot;Quirk Multiplier&quot;, &quot;Omni Multiplier&quot;, &quot;Weight Multiplier&quot; };
&nbsp;
<b class="nc">&nbsp;        NumberFormat commafy = NumberFormat.getInstance();</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(&quot;&lt;HTML&gt;&lt;BODY&gt;&lt;CENTER&gt;&lt;b&gt;Cost Calculations For &quot;);</b>
<b class="nc">&nbsp;        bvText.append(getChassis());</b>
<b class="nc">&nbsp;        bvText.append(&quot; &quot;);</b>
<b class="nc">&nbsp;        bvText.append(getModel());</b>
<b class="nc">&nbsp;        bvText.append(&quot;&lt;/b&gt;&lt;/CENTER&gt;&quot;);</b>
<b class="nc">&nbsp;        bvText.append(nl);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startTable);</b>
&nbsp;        // find the maximum length of the columns.
<b class="nc">&nbsp;        for (int l = 0; l &lt; left.length; l++) {</b>
&nbsp;
<b class="nc">&nbsp;            if (l == 13) {</b>
<b class="nc">&nbsp;                getWeaponsAndEquipmentCost(true);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                bvText.append(startRow);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
<b class="nc">&nbsp;                bvText.append(left[l]);</b>
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(startColumn);</b>
&nbsp;
<b class="nc">&nbsp;                if (costs[l] == 0) {</b>
<b class="nc">&nbsp;                    bvText.append(&quot;N/A&quot;);</b>
<b class="nc">&nbsp;                } else if (costs[l] &lt; 0) {</b>
<b class="nc">&nbsp;                    bvText.append(&quot;x &quot;);</b>
<b class="nc">&nbsp;                    bvText.append(commafy.format(-costs[l]));</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    bvText.append(commafy.format(costs[l]));</b>
&nbsp;
&nbsp;                }
<b class="nc">&nbsp;                bvText.append(endColumn);</b>
<b class="nc">&nbsp;                bvText.append(endRow);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;-------------&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(startRow);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(&quot;Total Cost:&quot;);</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(startColumn);</b>
<b class="nc">&nbsp;        bvText.append(commafy.format(cost));</b>
<b class="nc">&nbsp;        bvText.append(endColumn);</b>
<b class="nc">&nbsp;        bvText.append(endRow);</b>
&nbsp;
<b class="nc">&nbsp;        bvText.append(endTable);</b>
<b class="nc">&nbsp;        bvText.append(&quot;&lt;/BODY&gt;&lt;/HTML&gt;&quot;);</b>
&nbsp;        /*
&nbsp;         * maxLeft += 5; // leave some padding in the middle maxRight =
&nbsp;         * Math.max(maxRight, commafy.format(cost).length()); for (int i = 0; i
&nbsp;         * &lt; left.length; i++) { String both; if (costs[i] &lt; 0) { // negative
&nbsp;         * marks it as a multiplier both = StringUtil.makeLength(left[i],
&nbsp;         * maxLeft) + StringUtil.makeLength(&quot;x&quot; + commafy.format(costs[i] -1),
&nbsp;         * maxRight, true); } else if (costs[i] == 0) { both =
&nbsp;         * StringUtil.makeLength(left[i], maxLeft) +
&nbsp;         * StringUtil.makeLength(&quot;N/A&quot;, maxRight, true); } else { both =
&nbsp;         * StringUtil.makeLength(left[i], maxLeft) +
&nbsp;         * StringUtil.makeLength(commafy.format(costs[i]), maxRight, true); }
&nbsp;         * detail.append(both + &quot;\n&quot;); totalLineLength = both.length(); } for
&nbsp;         * (int x = 0; x &lt; totalLineLength; x++) { detail.append(&quot;-&quot;); }
&nbsp;         * detail.append(&quot;\n&quot; + StringUtil.makeLength(&quot;Total Cost:&quot;, maxLeft) +
&nbsp;         * StringUtil.makeLength(commafy.format(cost), maxRight, true));
&nbsp;         */
&nbsp;    }
&nbsp;
&nbsp;    protected double getActuatorCost() {
<b class="nc">&nbsp;        return getArmActuatorCost() + getLegActuatorCost();</b>
&nbsp;    }
&nbsp;
&nbsp;    protected abstract double getArmActuatorCost();
&nbsp;
&nbsp;    protected abstract double getLegActuatorCost();
&nbsp;
&nbsp;    @Override
&nbsp;    public Vector&lt;Report&gt; victoryReport() {
<b class="nc">&nbsp;        Vector&lt;Report&gt; vDesc = new Vector&lt;Report&gt;();</b>
&nbsp;
<b class="nc">&nbsp;        Report r = new Report(7025);</b>
<b class="nc">&nbsp;        r.type = Report.PUBLIC;</b>
<b class="nc">&nbsp;        r.addDesc(this);</b>
<b class="nc">&nbsp;        vDesc.addElement(r);</b>
&nbsp;
<b class="nc">&nbsp;        r = new Report(7030);</b>
<b class="nc">&nbsp;        r.type = Report.PUBLIC;</b>
<b class="nc">&nbsp;        r.newlines = 0;</b>
<b class="nc">&nbsp;        vDesc.addElement(r);</b>
<b class="nc">&nbsp;        vDesc.addAll(getCrew().getDescVector(false));</b>
<b class="nc">&nbsp;        r = new Report(7070, Report.PUBLIC);</b>
<b class="nc">&nbsp;        r.add(getKillNumber());</b>
<b class="nc">&nbsp;        vDesc.addElement(r);</b>
&nbsp;
<b class="nc">&nbsp;        if (isDestroyed()) {</b>
<b class="nc">&nbsp;            Entity killer = game.getEntity(killerId);</b>
<b class="nc">&nbsp;            if (killer == null) {</b>
<b class="nc">&nbsp;                killer = game.getOutOfGameEntity(killerId);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (killer != null) {</b>
<b class="nc">&nbsp;                r = new Report(7072, Report.PUBLIC);</b>
<b class="nc">&nbsp;                r.addDesc(killer);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                r = new Report(7073, Report.PUBLIC);</b>
&nbsp;            }
<b class="nc">&nbsp;            vDesc.addElement(r);</b>
<b class="nc">&nbsp;        } else if (getCrew().isEjected()){</b>
<b class="nc">&nbsp;            r = new Report(7074, Report.PUBLIC);</b>
<b class="nc">&nbsp;            vDesc.addElement(r);</b>
&nbsp;        }
<b class="nc">&nbsp;        r.newlines = 2;</b>
&nbsp;
<b class="nc">&nbsp;        return vDesc;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add in any piloting skill mods
&nbsp;     */
&nbsp;    @Override
&nbsp;    public PilotingRollData addEntityBonuses(PilotingRollData roll) {
&nbsp;        // gyro hit?
<b class="nc">&nbsp;        if (getBadCriticals(CriticalSlot.TYPE_SYSTEM, Mech.SYSTEM_GYRO,</b>
&nbsp;                Mech.LOC_CT) &gt; 0) {
&nbsp;
<b class="nc">&nbsp;            if (getGyroType() == Mech.GYRO_HEAVY_DUTY) {</b>
<b class="nc">&nbsp;                if (getBadCriticals(CriticalSlot.TYPE_SYSTEM, Mech.SYSTEM_GYRO,</b>
&nbsp;                        Mech.LOC_CT) == 1) {
<b class="nc">&nbsp;                    roll.addModifier(1, &quot;HD Gyro damaged once&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    roll.addModifier(3, &quot;HD Gyro damaged twice&quot;);</b>
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                roll.addModifier(3, &quot;Gyro damaged&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // EI bonus?
<b class="nc">&nbsp;        if (hasActiveEiCockpit()) {</b>
<b class="nc">&nbsp;            roll.addModifier(-1, &quot;Enhanced Imaging&quot;);</b>
&nbsp;        }
&nbsp;
&nbsp;        // VDNI bonus?
<b class="nc">&nbsp;        if (hasAbility(OptionsConstants.MD_VDNI)</b>
<b class="nc">&nbsp;                &amp;&amp; !hasAbility(OptionsConstants.MD_BVDNI)) {</b>
<b class="nc">&nbsp;            roll.addModifier(-1, &quot;VDNI&quot;);</b>
&nbsp;        }
&nbsp;
&nbsp;        // Small/torso-mounted cockpit penalty?
<b class="nc">&nbsp;        if (((getCockpitType() == Mech.COCKPIT_SMALL) || (getCockpitType() == Mech.COCKPIT_SMALL_COMMAND_CONSOLE))</b>
<b class="nc">&nbsp;                &amp;&amp; (!hasAbility(OptionsConstants.MD_BVDNI)</b>
<b class="nc">&nbsp;                &amp;&amp; !hasAbility(OptionsConstants.UNOFF_SMALL_PILOT))) {</b>
<b class="nc">&nbsp;            roll.addModifier(1, &quot;Small Cockpit&quot;);</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_TORSO_MOUNTED) {</b>
<b class="nc">&nbsp;            roll.addModifier(1, &quot;Torso-Mounted Cockpit&quot;);</b>
<b class="nc">&nbsp;            int sensorHits = getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.SYSTEM_SENSORS, Mech.LOC_HEAD);
<b class="nc">&nbsp;            int sensorHits2 = getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    Mech.SYSTEM_SENSORS, Mech.LOC_CT);
<b class="nc">&nbsp;            if ((sensorHits + sensorHits2) == 3) {</b>
<b class="nc">&nbsp;                roll.addModifier(4,</b>
&nbsp;                        &quot;Sensors Completely Destroyed for Torso-Mounted Cockpit&quot;);
<b class="nc">&nbsp;            } else if (sensorHits == 2) {</b>
<b class="nc">&nbsp;                roll.addModifier(4,</b>
&nbsp;                        &quot;Head Sensors Destroyed for Torso-Mounted Cockpit&quot;);
&nbsp;            }
<b class="nc">&nbsp;        } else if (getCockpitType() == Mech.COCKPIT_DUAL) {</b>
&nbsp;            //Dedicated pilot bonus is lost if pilot makes any attacks. Penalty for gunner acting as pilot.
<b class="nc">&nbsp;            if (getCrew().getCurrentPilotIndex() != getCrew().getCrewType().getPilotPos()) {</b>
<b class="nc">&nbsp;                roll.addModifier(1, &quot;dual cockpit without active pilot&quot;);</b>
<b class="nc">&nbsp;            } else if (getCrew().hasDedicatedGunner() || !isAttackingThisTurn()) {</b>
<b class="nc">&nbsp;                roll.addModifier(-1, &quot;dedicated pilot&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (hasQuirk(OptionsConstants.QUIRK_NEG_CRAMPED_COCKPIT) &amp;&amp; !hasAbility(OptionsConstants.UNOFF_SMALL_PILOT)) {</b>
<b class="nc">&nbsp;            roll.addModifier(1, &quot;cramped cockpit&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (hasHardenedArmor()) {</b>
<b class="nc">&nbsp;            roll.addModifier(1, &quot;Hardened Armor&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (hasModularArmor()) {</b>
<b class="nc">&nbsp;            roll.addModifier(1, &quot;Modular Armor&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasIndustrialTSM()) {</b>
<b class="nc">&nbsp;            roll.addModifier(1, &quot;Industrial TSM&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return roll;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getMaxElevationChange() {
<b class="nc">&nbsp;        if (movementMode == EntityMovementMode.TRACKED</b>
&nbsp;                || movementMode == EntityMovementMode.WIGE) {
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 2;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getMaxElevationDown(int currElevation) {
<b class="nc">&nbsp;        if (game.getOptions().booleanOption(OptionsConstants.ADVGRNDMOV_TACOPS_LEAPING)) {</b>
<b class="nc">&nbsp;            return UNLIMITED_JUMP_DOWN;</b>
&nbsp;        }
<b class="nc">&nbsp;        return getMaxElevationChange();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Determine if this unit has an active and working stealth system. (stealth
&nbsp;     * can be active and not working when under ECCM)
&nbsp;     * &lt;p/&gt;
&nbsp;     * Sub-classes are encouraged to override this method.
&nbsp;     *
&nbsp;     * @return &lt;code&gt;true&lt;/code&gt; if this unit has a stealth system that is
&nbsp;     *         currently active, &lt;code&gt;false&lt;/code&gt; if there is no stealth
&nbsp;     *         system or if it is inactive.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isStealthActive() {
&nbsp;        // Try to find a Mek Stealth system.
<b class="nc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="nc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="nc">&nbsp;            if (mtype.hasFlag(MiscType.F_STEALTH)) {</b>
&nbsp;
<b class="nc">&nbsp;                if (mEquip.curMode().equals(&quot;On&quot;)</b>
<b class="nc">&nbsp;                        &amp;&amp; hasActiveECM()) {</b>
&nbsp;                    // Return true if the mode is &quot;On&quot; and ECM is working
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;        // No Mek Stealth or system inactive. Return false.
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Determine if this unit has an active and working stealth system. (stealth
&nbsp;     * can be active and not working when under ECCM)
&nbsp;     * &lt;p/&gt;
&nbsp;     * Sub-classes are encouraged to override this method.
&nbsp;     *
&nbsp;     * @return &lt;code&gt;true&lt;/code&gt; if this unit has a stealth system that is
&nbsp;     *         currently active, &lt;code&gt;false&lt;/code&gt; if there is no stealth
&nbsp;     *         system or if it is inactive.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isStealthOn() {
&nbsp;        // Try to find a Mek Stealth system.
<b class="fc">&nbsp;        for (Mounted mEquip : getMisc()) {</b>
<b class="fc">&nbsp;            MiscType mtype = (MiscType) mEquip.getType();</b>
<b class="fc">&nbsp;            if (mtype.hasFlag(MiscType.F_STEALTH)) {</b>
<b class="nc">&nbsp;                if (mEquip.curMode().equals(&quot;On&quot;)) {</b>
&nbsp;                    // Return true if the mode is &quot;On&quot;
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;        // No Mek Stealth or system inactive. Return false.
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does the mech have a functioning null signature system, or a void sig
&nbsp;     * that is acting as a a null sig because of externally carried BA?
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isNullSigActive() {
<b class="nc">&nbsp;        if (isVoidSigOn() &amp;&amp; !isVoidSigActive()) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!isShutDown()) {</b>
<b class="nc">&nbsp;            for (Mounted m : getMisc()) {</b>
<b class="nc">&nbsp;                EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;                if (type.hasFlag(MiscType.F_NULLSIG)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.curMode().equals(&quot;On&quot;) &amp;&amp; m.isReady()) {</b>
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isNullSigOn() {
<b class="nc">&nbsp;        if (!isShutDown()) {</b>
<b class="nc">&nbsp;            for (Mounted m : getMisc()) {</b>
<b class="nc">&nbsp;                EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;                if (type.hasFlag(MiscType.F_NULLSIG)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.curMode().equals(&quot;On&quot;) &amp;&amp; m.isReady()) {</b>
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does the mech have a functioning void signature system?
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isVoidSigActive() {
&nbsp;        // per the rules questions forum, externally mounted BA invalidates Void
&nbsp;        // Sig
<b class="nc">&nbsp;        if (getLoadedUnits().size() &gt; 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!isShutDown()) {</b>
<b class="nc">&nbsp;            for (Mounted m : getMisc()) {</b>
<b class="nc">&nbsp;                EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;                if (type.hasFlag(MiscType.F_VOIDSIG)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.curMode().equals(&quot;On&quot;) &amp;&amp; m.isReady()) {</b>
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does the mech have a functioning void signature system?
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isVoidSigOn() {
<b class="nc">&nbsp;        if (!isShutDown()) {</b>
<b class="nc">&nbsp;            for (Mounted m : getMisc()) {</b>
<b class="nc">&nbsp;                EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;                if (type.hasFlag(MiscType.F_VOIDSIG)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.curMode().equals(&quot;On&quot;) &amp;&amp; m.isReady()) {</b>
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does the mech have a functioning Chameleon Light Polarization Field? For
&nbsp;     * a CLPS to be functioning it must be on and the unit can&#39;t have mounted
&nbsp;     * mechanized BattleArmor.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isChameleonShieldActive() {
&nbsp;        // TO pg 300 states that generates heat but doesn&#39;t operate if the unit
&nbsp;        //  has mounted BA
<b class="nc">&nbsp;        if (getLoadedUnits().size() &gt; 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!isShutDown()) {</b>
<b class="nc">&nbsp;            for (Mounted m : getMisc()) {</b>
<b class="nc">&nbsp;                EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;                if (type.hasFlag(MiscType.F_CHAMELEON_SHIELD)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.curMode().equals(&quot;On&quot;) &amp;&amp; m.isReady()) {</b>
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does the mech Chameleon Light Polarization Field turned on?  This is used
&nbsp;     * for heat generation purposes.  A CLPS can be on and generating heat but
&nbsp;     * not providing any benefit if the unit has mechanized BattleArmor.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isChameleonShieldOn() {
<b class="nc">&nbsp;        if (!isShutDown()) {</b>
<b class="nc">&nbsp;            for (Mounted m : getMisc()) {</b>
<b class="nc">&nbsp;                EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;                if (type.hasFlag(MiscType.F_CHAMELEON_SHIELD)</b>
<b class="nc">&nbsp;                        &amp;&amp; m.curMode().equals(&quot;On&quot;) &amp;&amp; m.isReady()) {</b>
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Determine the stealth modifier for firing at this unit from the given
&nbsp;     * range. If the value supplied for &lt;code&gt;range&lt;/code&gt; is not one of the
&nbsp;     * &lt;code&gt;Entity&lt;/code&gt; class range constants, an
&nbsp;     * &lt;code&gt;IllegalArgumentException&lt;/code&gt; will be thrown.
&nbsp;     * &lt;p/&gt;
&nbsp;     * Sub-classes are encouraged to override this method.
&nbsp;     *
&nbsp;     * @param range
&nbsp;     *            - an &lt;code&gt;int&lt;/code&gt; value that must match one of the
&nbsp;     *            &lt;code&gt;Compute&lt;/code&gt; class range constants.
&nbsp;     * @param ae
&nbsp;     *            - entity making the attack
&nbsp;     * @return a &lt;code&gt;TargetRoll&lt;/code&gt; value that contains the stealth
&nbsp;     *         modifier for the given range.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public TargetRoll getStealthModifier(int range, Entity ae) {
<b class="nc">&nbsp;        TargetRoll result = null;</b>
&nbsp;
&nbsp;        // can&#39;t combine void sig and stealth or null-sig
<b class="nc">&nbsp;        if (isVoidSigActive()) {</b>
<b class="nc">&nbsp;            int mmod = 3;</b>
<b class="nc">&nbsp;            if (delta_distance &gt; 5) {</b>
<b class="nc">&nbsp;                mmod = 0;</b>
<b class="nc">&nbsp;            } else if (delta_distance &gt; 2) {</b>
<b class="nc">&nbsp;                mmod = 1;</b>
<b class="nc">&nbsp;            } else if (delta_distance &gt; 0) {</b>
<b class="nc">&nbsp;                mmod = 2;</b>
&nbsp;            }
<b class="nc">&nbsp;            return new TargetRoll(mmod, &quot;void signature&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        boolean isInfantry = (ae instanceof Infantry)</b>
&nbsp;                &amp;&amp; !(ae instanceof BattleArmor);
&nbsp;        // Stealth or null sig must be active.
<b class="nc">&nbsp;        if (!isStealthActive() &amp;&amp; !isNullSigActive()</b>
<b class="nc">&nbsp;                &amp;&amp; !isChameleonShieldActive()) {</b>
<b class="nc">&nbsp;            result = new TargetRoll(0, &quot;stealth not active&quot;);</b>
&nbsp;        }
&nbsp;        // Determine the modifier based upon the range.
&nbsp;        // Infantry do not ignore Chameleon LPS!!!
&nbsp;        else {
<b class="nc">&nbsp;            switch (range) {</b>
&nbsp;                case RangeType.RANGE_MINIMUM:
&nbsp;                case RangeType.RANGE_SHORT:
<b class="nc">&nbsp;                    if (isStealthActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(0, &quot;stealth&quot;);</b>
<b class="nc">&nbsp;                    } else if (isChameleonShieldActive()) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(0, &quot;chameleon&quot;);</b>
<b class="nc">&nbsp;                        if (isNullSigActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                            result.addModifier(0, &quot;null-sig&quot;);</b>
&nbsp;                        }
<b class="nc">&nbsp;                    } else if (isNullSigActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(0, &quot;null-sig&quot;);</b>
&nbsp;                    } else {
&nbsp;                        // must be infantry
<b class="nc">&nbsp;                        result = new TargetRoll(0, &quot;infantry ignore stealth&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case RangeType.RANGE_MEDIUM:
<b class="nc">&nbsp;                    if (isStealthActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(1, &quot;stealth&quot;);</b>
<b class="nc">&nbsp;                    } else if (isChameleonShieldActive()) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(1, &quot;chameleon&quot;);</b>
<b class="nc">&nbsp;                        if (isNullSigActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                            result.addModifier(1, &quot;null-sig&quot;);</b>
&nbsp;                        }
<b class="nc">&nbsp;                    } else if (isNullSigActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(1, &quot;null-sig&quot;);</b>
&nbsp;                    } else {
&nbsp;                        // must be infantry
<b class="nc">&nbsp;                        result = new TargetRoll(0, &quot;infantry ignore stealth&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case RangeType.RANGE_LONG:
&nbsp;                case RangeType.RANGE_EXTREME:
&nbsp;                case RangeType.RANGE_LOS:
<b class="nc">&nbsp;                    if (isStealthActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(2, &quot;stealth&quot;);</b>
<b class="nc">&nbsp;                    } else if (isChameleonShieldActive()) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(2, &quot;chameleon&quot;);</b>
<b class="nc">&nbsp;                        if (isNullSigActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                            result.addModifier(2, &quot;null-sig&quot;);</b>
&nbsp;                        }
<b class="nc">&nbsp;                    } else if (isNullSigActive() &amp;&amp; !isInfantry) {</b>
<b class="nc">&nbsp;                        result = new TargetRoll(2, &quot;null-sig&quot;);</b>
&nbsp;                    } else {
&nbsp;                        // must be infantry
<b class="nc">&nbsp;                        result = new TargetRoll(0, &quot;infantry ignore stealth&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case RangeType.RANGE_OUT:
<b class="nc">&nbsp;                    break;</b>
&nbsp;                default:
<b class="nc">&nbsp;                    throw new IllegalArgumentException(</b>
&nbsp;                            &quot;Unknown range constant: &quot; + range);
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Return the result.
<b class="nc">&nbsp;        return result;</b>
&nbsp;
&nbsp;    } // End public TargetRoll getStealthModifier( char )
&nbsp;
&nbsp;    /**
&nbsp;     * Determine if the unit can be repaired, or only harvested for spares.
&nbsp;     *
&nbsp;     * @return A &lt;code&gt;boolean&lt;/code&gt; that is &lt;code&gt;true&lt;/code&gt; if the unit can
&nbsp;     *         be repaired (given enough time and parts); if this value is
&nbsp;     *         &lt;code&gt;false&lt;/code&gt;, the unit is only a source of spares.
&nbsp;     * @see Entity#isSalvage()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isRepairable() {
&nbsp;        // A Mech is repairable if it is salvageable,
&nbsp;        // and its CT internals are not gone.
<b class="nc">&nbsp;        int loc_is = this.getInternal(Mech.LOC_CT);</b>
<b class="nc">&nbsp;        return isSalvage() &amp;&amp; (loc_is != IArmorState.ARMOR_DOOMED)</b>
&nbsp;                &amp;&amp; (loc_is != IArmorState.ARMOR_DESTROYED);
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean canCharge() {
&nbsp;        // Mechs can charge, unless they are Clan and the &quot;no clan physicals&quot;
&nbsp;        // option is set
<b class="nc">&nbsp;        return super.canCharge()</b>
<b class="nc">&nbsp;                &amp;&amp; !(game.getOptions().booleanOption(OptionsConstants.ALLOWED_NO_CLAN_PHYSICAL) &amp;&amp; isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean canDFA() {
&nbsp;        // Mechs can DFA, unless they are Clan and the &quot;no clan physicals&quot;
&nbsp;        // option is set
<b class="nc">&nbsp;        return super.canDFA()</b>
<b class="nc">&nbsp;                &amp;&amp; !(game.getOptions().booleanOption(OptionsConstants.ALLOWED_NO_CLAN_PHYSICAL) &amp;&amp; isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    // gives total number of sinks
&nbsp;    public int getNumberOfSinks() {
<b class="fc">&nbsp;        int sinks = 0;</b>
<b class="fc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="fc">&nbsp;            if (mounted.isDestroyed() || mounted.isBreached()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (mounted.getType().hasFlag(MiscType.F_HEAT_SINK)) {</b>
<b class="fc">&nbsp;                sinks++;</b>
<b class="fc">&nbsp;            } else if (mounted.getType().hasFlag(MiscType.F_DOUBLE_HEAT_SINK)) {</b>
<b class="fc">&nbsp;                sinks++;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return sinks;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasDoubleHeatSinks() {
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if (mounted.getType().hasFlag(MiscType.F_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                return false;</b>
<b class="nc">&nbsp;            } else if (mounted.getType().hasFlag(MiscType.F_DOUBLE_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasLaserHeatSinks() {
<b class="nc">&nbsp;        if (hasLaserHeatSinks == HAS_UNKNOWN) {</b>
<b class="nc">&nbsp;            for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;                if (mounted.getType().hasFlag(MiscType.F_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                    hasLaserHeatSinks = HAS_FALSE;</b>
<b class="nc">&nbsp;                    break;</b>
<b class="nc">&nbsp;                } else if (mounted.getType()</b>
<b class="nc">&nbsp;                        .hasFlag(MiscType.F_LASER_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                    hasLaserHeatSinks = HAS_TRUE;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (hasLaserHeatSinks == HAS_UNKNOWN) {</b>
<b class="nc">&nbsp;                hasLaserHeatSinks = HAS_FALSE;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return hasLaserHeatSinks == HAS_TRUE;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setActiveSinksNextRound(int sinks) {
<b class="nc">&nbsp;        sinksOnNextRound = sinks;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getActiveSinks() {
<b class="fc">&nbsp;        if (sinksOn &lt; 0) {</b>
<b class="fc">&nbsp;            sinksOn = getNumberOfSinks();</b>
<b class="fc">&nbsp;            sinksOnNextRound = sinksOn;</b>
&nbsp;        }
<b class="fc">&nbsp;        return sinksOn;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void resetSinks() {
<b class="nc">&nbsp;        sinksOn = getNumberOfSinks();</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getActiveSinksNextRound() {
<b class="nc">&nbsp;        if (sinksOnNextRound &lt; 0) {</b>
<b class="nc">&nbsp;            return getActiveSinks();</b>
&nbsp;        }
<b class="nc">&nbsp;        return sinksOnNextRound;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Returns the autoEject.
&nbsp;     */
&nbsp;    public boolean isAutoEject() {
<b class="nc">&nbsp;        boolean hasEjectSeat = true;</b>
<b class="nc">&nbsp;        if (getCockpitType() == COCKPIT_TORSO_MOUNTED</b>
<b class="nc">&nbsp;                || hasQuirk(OptionsConstants.QUIRK_NEG_NO_EJECT)) {</b>
<b class="nc">&nbsp;            hasEjectSeat = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (isIndustrial()) {</b>
&nbsp;            // industrials can only eject when they have an ejection seat
<b class="nc">&nbsp;            for (Mounted misc : miscList) {</b>
<b class="nc">&nbsp;                if (misc.getType().hasFlag(MiscType.F_EJECTION_SEAT)) {</b>
<b class="nc">&nbsp;                    hasEjectSeat = true;</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return autoEject &amp;&amp; hasEjectSeat;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @param autoEject
&nbsp;     *            The autoEject to set.
&nbsp;     */
&nbsp;    public void setAutoEject(boolean autoEject) {
<b class="nc">&nbsp;        this.autoEject = autoEject;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Conditional Ejection Ammo
&nbsp;     */
&nbsp;    public boolean isCondEjectAmmo() {
<b class="nc">&nbsp;        return condEjectAmmo;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @param condEjectAmmo
&nbsp;     *            The condEjectAmmo to set.
&nbsp;     */
&nbsp;    public void setCondEjectAmmo(boolean condEjectAmmo) {
<b class="nc">&nbsp;        this.condEjectAmmo = condEjectAmmo;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Conditional Ejection Engine
&nbsp;     */
&nbsp;    public boolean isCondEjectEngine() {
<b class="nc">&nbsp;        return condEjectEngine;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @param condEjectEngine
&nbsp;     *            The condEjectEngine to set.
&nbsp;     */
&nbsp;    public void setCondEjectEngine(boolean condEjectEngine) {
<b class="nc">&nbsp;        this.condEjectEngine = condEjectEngine;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Conditional Ejection CTDest
&nbsp;     */
&nbsp;    public boolean isCondEjectCTDest() {
<b class="nc">&nbsp;        return condEjectCTDest;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @param condEjectCTDest
&nbsp;     *            The condEjectCTDest to set.
&nbsp;     */
&nbsp;    public void setCondEjectCTDest(boolean condEjectCTDest) {
<b class="nc">&nbsp;        this.condEjectCTDest = condEjectCTDest;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Conditional Ejection Headshot
&nbsp;     */
&nbsp;    public boolean isCondEjectHeadshot() {
<b class="nc">&nbsp;        return condEjectHeadshot;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @param condEjectHeadshot
&nbsp;     *            The condEjectHeadshot to set.
&nbsp;     */
&nbsp;    public void setCondEjectHeadshot(boolean condEjectHeadshot) {
<b class="nc">&nbsp;        this.condEjectHeadshot = condEjectHeadshot;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean removePartialCoverHits(int location, int cover, int side) {
&nbsp;        // left and right cover are from attacker&#39;s POV.
&nbsp;        // if hitting front arc, need to swap them
&nbsp;
&nbsp;        // Handle upper cover specially, as treating it as a bitmask will lead
&nbsp;        //  to every location being covered
<b class="nc">&nbsp;        if (cover  == LosEffects.COVER_UPPER) {</b>
<b class="nc">&nbsp;            if ((location == Mech.LOC_LLEG) || (location == Mech.LOC_RLEG)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (side == ToHitData.SIDE_FRONT) {</b>
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_LOWRIGHT) != 0)</b>
&nbsp;                    &amp;&amp; (location == Mech.LOC_LLEG)) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_LOWLEFT) != 0)</b>
&nbsp;                    &amp;&amp; (location == Mech.LOC_RLEG)) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_RIGHT) != 0)</b>
&nbsp;                    &amp;&amp; ((location == Mech.LOC_LARM)
&nbsp;                            || (location == Mech.LOC_LT) || (location == Mech.LOC_LLEG))) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_LEFT) != 0)</b>
&nbsp;                    &amp;&amp; ((location == Mech.LOC_RARM)
&nbsp;                            || (location == Mech.LOC_RT) || (location == Mech.LOC_RLEG))) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_LOWLEFT) != 0)</b>
&nbsp;                    &amp;&amp; (location == Mech.LOC_LLEG)) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_LOWRIGHT) != 0)</b>
&nbsp;                    &amp;&amp; (location == Mech.LOC_RLEG)) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_LEFT) != 0)</b>
&nbsp;                    &amp;&amp; ((location == Mech.LOC_LARM)
&nbsp;                            || (location == Mech.LOC_LT) || (location == Mech.LOC_LLEG))) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (((cover &amp; LosEffects.COVER_RIGHT) != 0)</b>
&nbsp;                    &amp;&amp; ((location == Mech.LOC_LARM)
&nbsp;                            || (location == Mech.LOC_LT) || (location == Mech.LOC_LLEG))) {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean doomedInExtremeTemp() {
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean doomedInVacuum() {
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean doomedOnGround() {
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean doomedInAtmosphere() {
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean doomedInSpace() {
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean hasEiCockpit() {
<b class="nc">&nbsp;        return isClan() || super.hasEiCockpit();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean hasActiveEiCockpit() {
<b class="nc">&nbsp;        if (cockpitStatus == COCKPIT_OFF) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getBadCriticals(CriticalSlot.TYPE_SYSTEM, Mech.SYSTEM_SENSORS,</b>
&nbsp;                Mech.LOC_HEAD) &gt; 0) {
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        return super.hasActiveEiCockpit();</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getCockpitStatus() {
<b class="nc">&nbsp;        return cockpitStatus;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getCockpitStatusNextRound() {
<b class="nc">&nbsp;        return cockpitStatusNextRound;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setCockpitStatus(int state) {
<b class="nc">&nbsp;        cockpitStatusNextRound = state;</b>
&nbsp;        // on/off allowed only in end phase
<b class="nc">&nbsp;        if ((state != COCKPIT_OFF) &amp;&amp; (cockpitStatus != COCKPIT_OFF)) {</b>
<b class="nc">&nbsp;            cockpitStatus = state;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getGyroType() {
<b class="fc">&nbsp;        return gyroType;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getCockpitType() {
<b class="fc">&nbsp;        return cockpitType;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setGyroType(int type) {
<b class="nc">&nbsp;        gyroType = type;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setCockpitType(int type) {
<b class="nc">&nbsp;        cockpitType = type;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getGyroTypeString() {
<b class="nc">&nbsp;        return Mech.getGyroTypeString(getGyroType());</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getCockpitTypeString() {
<b class="nc">&nbsp;        return Mech.getCockpitTypeString(getCockpitType());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getGyroTypeString(int inGyroType) {
<b class="nc">&nbsp;        if ((inGyroType &lt; 0) || (inGyroType &gt;= GYRO_STRING.length)) {</b>
<b class="nc">&nbsp;            return &quot;Unknown&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return GYRO_STRING[inGyroType];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getGyroTypeShortString(int inGyroType) {
<b class="nc">&nbsp;        if ((inGyroType &lt; 0) || (inGyroType &gt;= GYRO_SHORT_STRING.length)) {</b>
<b class="nc">&nbsp;            return &quot;Unknown&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return GYRO_SHORT_STRING[inGyroType];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getCockpitTypeString(int inCockpitType) {
<b class="nc">&nbsp;        if ((inCockpitType &lt; 0) || (inCockpitType &gt;= COCKPIT_STRING.length)) {</b>
<b class="nc">&nbsp;            return &quot;Unknown&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return COCKPIT_STRING[inCockpitType];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int getGyroTypeForString(String inType) {
<b class="fc">&nbsp;        if ((inType == null) || (inType.length() &lt; 1)) {</b>
<b class="nc">&nbsp;            return GYRO_UNKNOWN;</b>
&nbsp;        }
<b class="fc">&nbsp;        for (int x = 0; x &lt; GYRO_STRING.length; x++) {</b>
<b class="fc">&nbsp;            if ((inType.equals(GYRO_STRING[x]))</b>
<b class="fc">&nbsp;                    || (inType.equals(GYRO_SHORT_STRING[x]))) {</b>
<b class="fc">&nbsp;                return x;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return GYRO_UNKNOWN;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int getCockpitTypeForString(String inType) {
<b class="fc">&nbsp;        if ((inType == null) || (inType.length() &lt; 1)) {</b>
<b class="nc">&nbsp;            return COCKPIT_UNKNOWN;</b>
&nbsp;        }
<b class="fc">&nbsp;        for (int x = 0; x &lt; COCKPIT_STRING.length; x++) {</b>
<b class="fc">&nbsp;            if ((inType.equals(COCKPIT_STRING[x]))</b>
<b class="fc">&nbsp;                    || (inType.equals(COCKPIT_SHORT_STRING[x]))) {</b>
<b class="fc">&nbsp;                return x;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return COCKPIT_UNKNOWN;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getSystemName(int index) {
<b class="nc">&nbsp;        if (index == SYSTEM_GYRO) {</b>
<b class="nc">&nbsp;            return Mech.getGyroDisplayString(gyroType);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (index == SYSTEM_COCKPIT) {</b>
<b class="nc">&nbsp;            if (isIndustrial() &amp;&amp; (cockpitType == Mech.COCKPIT_STANDARD)) {</b>
<b class="nc">&nbsp;                return &quot;Industrial Cockpit (adv. FCS)&quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Mech.getCockpitDisplayString(cockpitType);</b>
&nbsp;        }
<b class="nc">&nbsp;        return systemNames[index];</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getRawSystemName(int index) {
<b class="fc">&nbsp;        return systemNames[index];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getGyroDisplayString(int inType) {
<b class="nc">&nbsp;        String inName = &quot;&quot;;</b>
<b class="nc">&nbsp;        switch (inType) {</b>
&nbsp;            case GYRO_XL:
<b class="nc">&nbsp;                inName = &quot;GYRO_XL&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case GYRO_COMPACT:
<b class="nc">&nbsp;                inName = &quot;GYRO_COMPACT&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case GYRO_HEAVY_DUTY:
<b class="nc">&nbsp;                inName = &quot;GYRO_HEAVY_DUTY&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case GYRO_STANDARD:
<b class="nc">&nbsp;                inName = &quot;GYRO_STANDARD&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case GYRO_NONE:
<b class="nc">&nbsp;                inName = &quot;GYRO_NONE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case GYRO_SUPERHEAVY:
<b class="nc">&nbsp;                inName = &quot;GYRO_SUPERHEAVY&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            default:
<b class="nc">&nbsp;                inName = &quot;GYRO_UNKNOWN&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        String result = EquipmentMessages</b>
<b class="nc">&nbsp;                .getString(&quot;SystemType.Gyro.&quot; + inName);</b>
<b class="nc">&nbsp;        if (result != null) {</b>
<b class="nc">&nbsp;            return result;</b>
&nbsp;        }
<b class="nc">&nbsp;        return inName;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getCockpitDisplayString(int inType) {
<b class="nc">&nbsp;        String inName = &quot;&quot;;</b>
<b class="nc">&nbsp;        switch (inType) {</b>
&nbsp;            case COCKPIT_COMMAND_CONSOLE:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_COMMAND_CONSOLE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_SMALL:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_SMALL&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_TORSO_MOUNTED:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_TORSO_MOUNTED&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_DUAL:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_DUAL&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_STANDARD:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_STANDARD&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_INDUSTRIAL:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_INDUSTRIAL&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_PRIMITIVE:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_PRIMITIVE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_PRIMITIVE_INDUSTRIAL:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_PRIMITIVE_INDUSTRIAL&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_SUPERHEAVY:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_SUPERHEAVY&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_SUPERHEAVY_TRIPOD:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_SUPERHEAVY_TRIPOD&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_TRIPOD:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_TRIPOD&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_INTERFACE:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_INTERFACE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_VRRP:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_VRRP&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_QUADVEE:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_QUADVEE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_SUPERHEAVY_INDUSTRIAL:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_SUPERHEAVY_INDUSTRIAL&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_SUPERHEAVY_COMMAND_CONSOLE:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_SUPERHEAVY_COMMAND_CONSOLE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COCKPIT_SMALL_COMMAND_CONSOLE:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_SMALL_COMMAND_CONSOLE&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            default:
<b class="nc">&nbsp;                inName = &quot;COCKPIT_UNKNOWN&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        String result = EquipmentMessages.getString(&quot;SystemType.Cockpit.&quot;</b>
&nbsp;                + inName);
<b class="nc">&nbsp;        if (result != null) {</b>
<b class="nc">&nbsp;            return result;</b>
&nbsp;        }
<b class="nc">&nbsp;        return inName;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean canAssaultDrop() {
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isLocationProhibited(Coords c, int currElevation) {
<b class="nc">&nbsp;        IHex hex = game.getBoard().getHex(c);</b>
<b class="nc">&nbsp;        if (hex.containsTerrain(Terrains.IMPASSABLE)) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (hex.containsTerrain(Terrains.SPACE) &amp;&amp; doomedInSpace()) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
&nbsp;        // Additional restrictions for hidden units
<b class="nc">&nbsp;        if (isHidden()) {</b>
&nbsp;            // Can&#39;t deploy in paved hexes
<b class="nc">&nbsp;            if ((hex.containsTerrain(Terrains.PAVEMENT)</b>
<b class="nc">&nbsp;                    || hex.containsTerrain(Terrains.ROAD))</b>
<b class="nc">&nbsp;                    &amp;&amp; (!hex.containsTerrain(Terrains.BUILDING)</b>
<b class="nc">&nbsp;                            &amp;&amp; !hex.containsTerrain(Terrains.RUBBLE))){</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;            // Can&#39;t deploy on a bridge
<b class="nc">&nbsp;            if ((hex.terrainLevel(Terrains.BRIDGE_ELEV) == currElevation)</b>
<b class="nc">&nbsp;                    &amp;&amp; hex.containsTerrain(Terrains.BRIDGE)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;            // mechs can deploy in water if the water covers them entirely
<b class="nc">&nbsp;            if (hex.containsTerrain(Terrains.WATER) &amp;&amp; (hex.terrainLevel(Terrains.WATER) &lt; (height() + 1))) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;            // Can&#39;t deploy in clear hex
<b class="nc">&nbsp;            if (hex.isClearHex()) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
&nbsp;        // Mechs using tracks and QuadVees in vehicle mode (or converting to or from) have the same
&nbsp;        // restrictions and combat vehicles with the exception that QuadVees can enter water hexes
&nbsp;        // except during conversion.
<b class="nc">&nbsp;        if (movementMode == EntityMovementMode.TRACKED</b>
&nbsp;                || (this instanceof QuadVee &amp;&amp; convertingNow
<b class="nc">&nbsp;                        &amp;&amp; ((QuadVee)this).getMotiveType() == QuadVee.MOTIVE_TRACK)) {</b>
<b class="nc">&nbsp;                return (hex.terrainLevel(Terrains.WOODS) &gt; 1)</b>
<b class="nc">&nbsp;                        || ((hex.terrainLevel(Terrains.WATER) &gt; 0)</b>
<b class="nc">&nbsp;                                &amp;&amp; !hex.containsTerrain(Terrains.ICE)</b>
&nbsp;                                &amp;&amp; (!(this instanceof QuadVee) || convertingNow))
<b class="nc">&nbsp;                        || hex.containsTerrain(Terrains.JUNGLE)</b>
<b class="nc">&nbsp;                        || (hex.terrainLevel(Terrains.MAGMA) &gt; 1)</b>
<b class="nc">&nbsp;                        || (hex.terrainLevel(Terrains.ROUGH) &gt; 1)</b>
<b class="nc">&nbsp;                        || (hex.terrainLevel(Terrains.RUBBLE) &gt; 5);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (movementMode == EntityMovementMode.WHEELED</b>
&nbsp;                || (this instanceof QuadVee &amp;&amp; convertingNow
<b class="nc">&nbsp;                        &amp;&amp; ((QuadVee)this).getMotiveType() == QuadVee.MOTIVE_WHEEL)) {</b>
<b class="nc">&nbsp;            return hex.containsTerrain(Terrains.WOODS)</b>
<b class="nc">&nbsp;                    || hex.containsTerrain(Terrains.ROUGH)</b>
<b class="nc">&nbsp;                    || hex.containsTerrain(Terrains.RUBBLE)</b>
<b class="nc">&nbsp;                    || hex.containsTerrain(Terrains.MAGMA)</b>
<b class="nc">&nbsp;                    || hex.containsTerrain(Terrains.JUNGLE)</b>
<b class="nc">&nbsp;                    || (hex.terrainLevel(Terrains.SNOW) &gt; 1)</b>
<b class="nc">&nbsp;                    || (hex.terrainLevel(Terrains.GEYSER) == 2)</b>
<b class="nc">&nbsp;                    || ((hex.terrainLevel(Terrains.WATER) &gt; 0)</b>
<b class="nc">&nbsp;                            &amp;&amp; !hex.containsTerrain(Terrains.ICE)</b>
&nbsp;                            &amp;&amp; convertingNow);
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return (hex.terrainLevel(Terrains.WOODS) &gt; 2)</b>
<b class="nc">&nbsp;                || (hex.terrainLevel(Terrains.JUNGLE) &gt; 2);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Get an &#39;.mtf&#39; file representation of the mech. This string can be
&nbsp;     * directly written to disk as a file and later loaded by the MtfFile class.
&nbsp;     * Known missing level 3 features: mixed tech, laser heatsinks
&nbsp;     */
&nbsp;    public String getMtf() {
<b class="fc">&nbsp;        StringBuilder sb = new StringBuilder();</b>
<b class="fc">&nbsp;        String newLine = &quot;\n&quot;;</b>
&nbsp;
<b class="fc">&nbsp;        boolean standard = (getCockpitType() == Mech.COCKPIT_STANDARD)</b>
<b class="fc">&nbsp;                &amp;&amp; (getGyroType() == Mech.GYRO_STANDARD);</b>
<b class="fc">&nbsp;        boolean fullHead = hasFullHeadEject();</b>
<b class="fc">&nbsp;        if (standard &amp;&amp; !fullHead) {</b>
<b class="fc">&nbsp;            sb.append(&quot;Version:1.0&quot;).append(newLine);</b>
<b class="nc">&nbsp;        } else if (!fullHead) {</b>
<b class="nc">&nbsp;            sb.append(&quot;Version:1.1&quot;).append(newLine);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            sb.append(&quot;Version:1.2&quot;).append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(chassis).append(newLine);</b>
<b class="fc">&nbsp;        sb.append(model).append(newLine);</b>
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        sb.append(&quot;Config:&quot;);</b>
<b class="fc">&nbsp;        if (this instanceof LandAirMech) {</b>
<b class="nc">&nbsp;            sb.append(&quot;LAM&quot;);</b>
<b class="fc">&nbsp;        } else if (this instanceof BipedMech) {</b>
<b class="fc">&nbsp;            sb.append(&quot;Biped&quot;);</b>
<b class="nc">&nbsp;        } else if (this instanceof QuadVee) {</b>
<b class="nc">&nbsp;            sb.append(&quot;QuadVee&quot;);</b>
<b class="nc">&nbsp;        } else if (this instanceof QuadMech) {</b>
<b class="nc">&nbsp;            sb.append(&quot;Quad&quot;);</b>
<b class="nc">&nbsp;        } else if (this instanceof TripodMech) {</b>
<b class="nc">&nbsp;            sb.append(&quot;Tripod&quot;);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (isOmni()) {</b>
<b class="nc">&nbsp;            sb.append(&quot; Omnimech&quot;);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        sb.append(newLine);</b>
<b class="fc">&nbsp;        sb.append(MtfFile.TECH_BASE);</b>
<b class="fc">&nbsp;        if (isMixedTech()) {</b>
<b class="nc">&nbsp;            if (isClan()) {</b>
<b class="nc">&nbsp;                sb.append(&quot;Mixed (Clan Chassis)&quot;);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                sb.append(&quot;Mixed (IS Chassis)&quot;);</b>
&nbsp;            }
&nbsp;        } else {
<b class="fc">&nbsp;            sb.append(TechConstants.getTechName(techLevel));</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
<b class="fc">&nbsp;        sb.append(MtfFile.ERA).append(year).append(newLine);</b>
<b class="fc">&nbsp;        if ((source != null) &amp;&amp; (source.trim().length() &gt; 0)) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.SOURCE).append(source).append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(MtfFile.RULES_LEVEL).append(</b>
&nbsp;                TechConstants.T_SIMPLE_LEVEL[techLevel]);
<b class="fc">&nbsp;        sb.append(newLine);</b>
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        sb.append(MtfFile.MASS).append((int) weight).append(newLine);</b>
<b class="fc">&nbsp;        sb.append(MtfFile.ENGINE);</b>
<b class="fc">&nbsp;        if(hasEngine()) {</b>
<b class="fc">&nbsp;                sb.append(getEngine().getEngineName())</b>
<b class="fc">&nbsp;                .append(&quot; Engine&quot;)</b>
<b class="fc">&nbsp;                .append(!(getEngine().hasFlag(Engine.CLAN_ENGINE) &amp;&amp; isMixedTech()) ? (&quot;(IS)&quot;)</b>
<b class="nc">&nbsp;                        : &quot;&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            sb.append(&quot;(none)&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
<b class="fc">&nbsp;        sb.append(MtfFile.STRUCTURE);</b>
<b class="fc">&nbsp;        sb.append(EquipmentType.getStructureTypeName(getStructureType(),</b>
<b class="fc">&nbsp;                TechConstants.isClan(structureTechLevel)));</b>
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        sb.append(MtfFile.MYOMER);</b>
<b class="fc">&nbsp;        if (hasTSM()) {</b>
<b class="nc">&nbsp;            sb.append(&quot;Triple-Strength&quot;);</b>
<b class="fc">&nbsp;        } else if (hasIndustrialTSM()) {</b>
<b class="nc">&nbsp;            sb.append(&quot;Industrial Triple-Strength&quot;);</b>
<b class="fc">&nbsp;        } else if (hasSCM()) {</b>
<b class="nc">&nbsp;            sb.append(&quot;Super-Cooled&quot;);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            sb.append(&quot;Standard&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        if (this instanceof LandAirMech) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.LAM);</b>
<b class="nc">&nbsp;            sb.append(((LandAirMech)this).getLAMTypeString());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
<b class="fc">&nbsp;        } else if (this instanceof QuadVee) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.MOTIVE);</b>
<b class="nc">&nbsp;            sb.append(((QuadVee)this).getMotiveTypeString());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
&nbsp;
<b class="fc">&nbsp;        if (!standard) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.COCKPIT);</b>
<b class="nc">&nbsp;            sb.append(getCockpitTypeString());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;
<b class="nc">&nbsp;            sb.append(MtfFile.GYRO);</b>
<b class="nc">&nbsp;            sb.append(getGyroTypeString());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        if (hasFullHeadEject()) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.EJECTION);</b>
<b class="nc">&nbsp;            sb.append(Mech.FULL_HEAD_EJECT_STRING);</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        sb.append(MtfFile.HEAT_SINKS).append(heatSinks()).append(&quot; &quot;);</b>
<b class="fc">&nbsp;        Optional&lt;EquipmentType&gt; heatSink = getMisc().stream()</b>
<b class="fc">&nbsp;                .filter(m -&gt; m.getType().hasFlag(MiscType.F_HEAT_SINK)</b>
<b class="nc">&nbsp;                    || m.getType().hasFlag(MiscType.F_DOUBLE_HEAT_SINK))</b>
<b class="fc">&nbsp;                .map(Mounted::getType).findFirst();</b>
&nbsp;        // If we didn&#39;t find any heat sinks we may have an ICE with no added sinks, or prototype
&nbsp;        // doubles (which have a different flag). In the latter case, we want to put single
&nbsp;        // here, since this determines what&#39;s installed as engine-integrated heat sinks.
<b class="fc">&nbsp;        if (!heatSink.isPresent()) {</b>
<b class="fc">&nbsp;            sb.append(MtfFile.HS_SINGLE);</b>
<b class="fc">&nbsp;        } else if (heatSink.get().hasFlag(MiscType.F_LASER_HEAT_SINK)) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.HS_LASER);</b>
<b class="fc">&nbsp;        } else if (heatSink.get().hasFlag(MiscType.F_COMPACT_HEAT_SINK)) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.HS_COMPACT);</b>
<b class="fc">&nbsp;        } else if (heatSink.get().hasFlag(MiscType.F_DOUBLE_HEAT_SINK)) {</b>
<b class="nc">&nbsp;            sb.append(heatSink.get().isClan() ? MtfFile.TECH_BASE_CLAN : MtfFile.TECH_BASE_IS);</b>
<b class="nc">&nbsp;            sb.append(&quot; &quot;).append(MtfFile.HS_DOUBLE);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            sb.append(MtfFile.HS_SINGLE);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        if (isOmni()) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.BASE_CHASSIS_HEAT_SINKS);</b>
<b class="nc">&nbsp;            sb.append(hasEngine() ? getEngine().getBaseChassisHeatSinks(hasCompactHeatSinks()) : 0);</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="fc">&nbsp;            if ((mounted.getCriticals() == 0)</b>
<b class="nc">&nbsp;                    &amp;&amp; !mounted.getType().hasFlag(MiscType.F_CASE)</b>
<b class="nc">&nbsp;                    &amp;&amp; !EquipmentType.isArmorType(mounted.getType())</b>
<b class="nc">&nbsp;                    &amp;&amp; !EquipmentType.isStructureType(mounted.getType())) {</b>
<b class="nc">&nbsp;                sb.append(MtfFile.NO_CRIT).append(mounted.getType().getInternalName())</b>
<b class="nc">&nbsp;                        .append(&quot;:&quot;).append(getLocationAbbr(mounted.getLocation()))</b>
<b class="nc">&nbsp;                        .append(newLine);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        sb.append(MtfFile.WALK_MP).append(walkMP).append(newLine);</b>
<b class="fc">&nbsp;        sb.append(MtfFile.JUMP_MP).append(jumpMP).append(newLine);</b>
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        if (hasPatchworkArmor()) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.ARMOR).append(EquipmentType.getArmorTypeName(EquipmentType.T_ARMOR_PATCHWORK));</b>
&nbsp;        } else {
<b class="fc">&nbsp;            sb.append(MtfFile.ARMOR).append(EquipmentType.getArmorTypeName(getArmorType(0)))</b>
<b class="fc">&nbsp;                .append(&quot;(&quot;).append(TechConstants.getTechName(getArmorTechLevel(0))).append(&quot;)&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        for (int element : MtfFile.locationOrder) {</b>
<b class="fc">&nbsp;            if ((element == Mech.LOC_CLEG) &amp;&amp; !(this instanceof TripodMech)) {</b>
<b class="fc">&nbsp;                continue;</b>
&nbsp;            }
<b class="fc">&nbsp;            sb.append(getLocationAbbr(element)).append(&quot; &quot;).append(MtfFile.ARMOR);</b>
<b class="fc">&nbsp;            if (hasPatchworkArmor()) {</b>
<b class="nc">&nbsp;                sb.append(EquipmentType.getArmorTypeName(getArmorType(element), isClan()))</b>
<b class="nc">&nbsp;                        .append(&#39;(&#39;).append(TechConstants.getTechName(getArmorTechLevel(element)))</b>
<b class="nc">&nbsp;                        .append(&quot;):&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            sb.append(getOArmor(element, false)).append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        for (int element : MtfFile.rearLocationOrder) {</b>
<b class="fc">&nbsp;            sb.append(&quot;RT&quot;).append(getLocationAbbr(element).charAt(0)).append(&quot; &quot;).append(MtfFile.ARMOR);</b>
<b class="fc">&nbsp;            sb.append(getOArmor(element, true)).append(newLine);</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(newLine);</b>
&nbsp;
<b class="fc">&nbsp;        sb.append(&quot;Weapons:&quot;).append(weaponList.size()).append(newLine);</b>
<b class="fc">&nbsp;        for (Mounted m : weaponList) {</b>
<b class="fc">&nbsp;            sb.append(m.getName()).append(&quot;, &quot;)</b>
<b class="fc">&nbsp;                    .append(getLocationName(m.getLocation())).append(newLine);</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        sb.append(newLine);</b>
<b class="fc">&nbsp;        for (int l : MtfFile.locationOrder) {</b>
<b class="fc">&nbsp;            if ((l == Mech.LOC_CLEG) &amp;&amp; !(this instanceof TripodMech)) {</b>
<b class="fc">&nbsp;                continue;</b>
&nbsp;            }
<b class="fc">&nbsp;            String locationName = getLocationName(l);</b>
<b class="fc">&nbsp;            sb.append(locationName).append(&quot;:&quot;);</b>
<b class="fc">&nbsp;            sb.append(newLine);</b>
<b class="fc">&nbsp;            for (int y = 0; y &lt; 12; y++) {</b>
<b class="fc">&nbsp;                if (y &lt; getNumberOfCriticals(l)) {</b>
<b class="fc">&nbsp;                    sb.append(decodeCritical(getCritical(l, y)))</b>
<b class="fc">&nbsp;                            .append(newLine);</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    sb.append(MtfFile.EMPTY).append(newLine);</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getOverview().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.OVERVIEW);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getOverview());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getCapabilities().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.CAPABILITIES);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getCapabilities());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getDeployment().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.DEPLOYMENT);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getDeployment());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getHistory().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.HISTORY);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getHistory());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getManufacturer().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.MANUFACTURER);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getManufacturer());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getPrimaryFactory().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.PRIMARY_FACTORY);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getPrimaryFactory());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getNotes().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.NOTES);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getNotes());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getFluff().getMMLImagePath().trim().length() &gt; 0) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.IMAGE_FILE);</b>
<b class="nc">&nbsp;            sb.append(getFluff().getMMLImagePath());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        for (EntityFluff.System system : EntityFluff.System.values()) {</b>
<b class="fc">&nbsp;        	if (getFluff().getSystemManufacturer(system).length() &gt; 0) {</b>
<b class="nc">&nbsp;        		sb.append(MtfFile.SYSTEM_MANUFACTURER);</b>
<b class="nc">&nbsp;        		sb.append(system.toString()).append(&quot;:&quot;);</b>
<b class="nc">&nbsp;        		sb.append(getFluff().getSystemManufacturer(system));</b>
<b class="nc">&nbsp;        		sb.append(newLine);</b>
&nbsp;        	}
<b class="fc">&nbsp;        	if (getFluff().getSystemModel(system).length() &gt; 0) {</b>
<b class="nc">&nbsp;        		sb.append(MtfFile.SYSTEM_MODEL);</b>
<b class="nc">&nbsp;        		sb.append(system.toString()).append(&quot;:&quot;);</b>
<b class="nc">&nbsp;        		sb.append(getFluff().getSystemModel(system));</b>
<b class="nc">&nbsp;        		sb.append(newLine);</b>
&nbsp;        	}
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (getUseManualBV()) {</b>
<b class="nc">&nbsp;            sb.append(MtfFile.BV);</b>
<b class="nc">&nbsp;            sb.append(getManualBV());</b>
<b class="nc">&nbsp;            sb.append(newLine);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return sb.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    private String decodeCritical(CriticalSlot cs) {
<b class="fc">&nbsp;        if (cs == null) {</b>
<b class="fc">&nbsp;            return MtfFile.EMPTY;</b>
&nbsp;        }
<b class="fc">&nbsp;        int type = cs.getType();</b>
<b class="fc">&nbsp;        int index = cs.getIndex();</b>
&nbsp;
<b class="fc">&nbsp;        StringBuilder toReturn = new StringBuilder();</b>
<b class="fc">&nbsp;        if (type == CriticalSlot.TYPE_SYSTEM) {</b>
<b class="fc">&nbsp;            if ((getRawSystemName(index).contains(&quot;Upper&quot;))</b>
<b class="fc">&nbsp;                    || (getRawSystemName(index).contains(&quot;Lower&quot;))</b>
<b class="fc">&nbsp;                    || (getRawSystemName(index).contains(&quot;Hand&quot;))</b>
<b class="fc">&nbsp;                    || (getRawSystemName(index).contains(&quot;Foot&quot;))) {</b>
<b class="fc">&nbsp;                toReturn.append(getRawSystemName(index)).append(&quot; Actuator&quot;);</b>
<b class="fc">&nbsp;            } else if (getRawSystemName(index).contains(&quot;Engine&quot;)) {</b>
<b class="nc">&nbsp;                toReturn.append(&quot;Fusion &quot;).append(getRawSystemName(index));</b>
&nbsp;            } else {
<b class="fc">&nbsp;                toReturn.append(getRawSystemName(index));</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (type == CriticalSlot.TYPE_EQUIPMENT) {</b>
<b class="fc">&nbsp;            final Mounted m = cs.getMount();</b>
<b class="fc">&nbsp;            toReturn.append(m.getType().getInternalName());</b>
&nbsp;            // Superheavy mechs can have a second ammo bin or heat sink in the same slot
<b class="fc">&nbsp;            if (cs.getMount2() != null) {</b>
<b class="fc">&nbsp;                toReturn.append(&quot;|&quot;).append(cs.getMount2().getType().getInternalName());</b>
&nbsp;            }
<b class="fc">&nbsp;            if ((m.getType() instanceof WeaponType)</b>
<b class="fc">&nbsp;                    &amp;&amp; m.getType().hasFlag(WeaponType.F_VGL)) {</b>
<b class="fc">&nbsp;                switch (m.getFacing()) {</b>
&nbsp;                    case 1:
<b class="fc">&nbsp;                        toReturn.append(&quot; (FR)&quot;);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case 2:
<b class="fc">&nbsp;                        toReturn.append(&quot; (RR)&quot;);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    // case 3:
&nbsp;                    // already handled by isRearMounted() above
&nbsp;                    case 4:
<b class="fc">&nbsp;                        toReturn.append(&quot; (RL)&quot;);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case 5:
<b class="fc">&nbsp;                        toReturn.append(&quot; (FL)&quot;);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    default:
&nbsp;                        // forward facing
&nbsp;                        break;
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            if (m.isRearMounted()) {</b>
<b class="fc">&nbsp;                toReturn.append(&quot; (R)&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            if (m.isMechTurretMounted()) {</b>
<b class="fc">&nbsp;                toReturn.append(&quot; (T)&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            if (m.isOmniPodMounted()) {</b>
<b class="fc">&nbsp;                toReturn.append(&quot; &quot;).append(MtfFile.OMNIPOD);</b>
&nbsp;            }
<b class="fc">&nbsp;            if (m.getType().isVariableSize()) {</b>
<b class="nc">&nbsp;                toReturn.append(MtfFile.SIZE).append(m.getSize());</b>
&nbsp;            }
<b class="fc">&nbsp;        } else {</b>
<b class="nc">&nbsp;            return &quot;?&quot; + index;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (cs.isArmored()) {</b>
<b class="fc">&nbsp;            toReturn.append(&quot; &quot;).append(MtfFile.ARMORED);</b>
&nbsp;        }
<b class="fc">&nbsp;        return toReturn.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a standard cockpit. Note: This is
&nbsp;     * part of the mek creation public API, and might not be referenced by any
&nbsp;     * MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 5) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        if (isSuperHeavy()) {</b>
<b class="nc">&nbsp;            if (this instanceof TripodMech) {</b>
<b class="nc">&nbsp;            setCockpitType(COCKPIT_SUPERHEAVY_TRIPOD);</b>
<b class="nc">&nbsp;            } else if (isIndustrial()) {</b>
<b class="nc">&nbsp;                setCockpitType(COCKPIT_SUPERHEAVY_INDUSTRIAL);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                setCockpitType(COCKPIT_SUPERHEAVY);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (this instanceof TripodMech) {</b>
<b class="nc">&nbsp;            setCockpitType(COCKPIT_TRIPOD);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            setCockpitType(COCKPIT_STANDARD);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for an industrial cockpit. Note: This is
&nbsp;     * part of the mek creation public API, and might not be referenced by any
&nbsp;     * MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addIndustrialCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 5) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_INDUSTRIAL);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for an industrial cockpit. Note: This is
&nbsp;     * part of the mek creation public API, and might not be referenced by any
&nbsp;     * MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addPrimitiveCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 5) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_PRIMITIVE);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for an industrial primitive cockpit.
&nbsp;     * Note: This is part of the mek creation public API, and might not be
&nbsp;     * referenced by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addIndustrialPrimitiveCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 5) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_PRIMITIVE_INDUSTRIAL);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a small cockpit. Note: This is part
&nbsp;     * of the mek creation public API, and might not be referenced by any
&nbsp;     * MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addSmallCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 4) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_SMALL);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a small cockpit. Note: This is part
&nbsp;     * of the mek creation public API, and might not be referenced by any
&nbsp;     * MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addInterfaceCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 6) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_INTERFACE);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean addCommandConsole() {
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_COMMAND_CONSOLE);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean addQuadVeeCockpit() {
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_QUADVEE);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean addDualCockpit() {
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_DUAL);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;	
&nbsp;    public boolean addSuperheavyIndustrialCockpit() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 5) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_SUPERHEAVY_INDUSTRIAL);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;	
&nbsp;    public boolean addSuperheavyCommandConsole() {
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_SUPERHEAVY_COMMAND_CONSOLE);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;    
&nbsp;    //The location of critical is based on small cockpit, but since command console requires two cockpit slots the second Sensor is return to the location 4.
&nbsp;    public boolean addSmallCommandConsole() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 5) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_COCKPIT));
<b class="nc">&nbsp;        addCritical(LOC_HEAD, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_SENSORS));
<b class="nc">&nbsp;        setCockpitType(COCKPIT_SMALL_COMMAND_CONSOLE);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a torso-mounted cockpit. Note: This
&nbsp;     * is part of the mek creation public API, and might not be referenced by
&nbsp;     * any MegaMek code.
&nbsp;     *
&nbsp;     * @param vrpp  if this is a VRPP rather than a standard torso-mounted cockpit
&nbsp;     * @return      false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addTorsoMountedCockpit(boolean vrpp) {
<b class="nc">&nbsp;        boolean success = true;</b>
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_HEAD) &lt; 2) {</b>
<b class="nc">&nbsp;            success = false;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            addCritical(LOC_HEAD, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_SENSORS));
<b class="nc">&nbsp;            addCritical(LOC_HEAD, 1, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_SENSORS));
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getEmptyCriticals(LOC_CT) &lt; 2) || !success) {</b>
<b class="nc">&nbsp;            success = false;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            addCritical(LOC_CT, getFirstEmptyCrit(LOC_CT), new CriticalSlot(</b>
&nbsp;                    CriticalSlot.TYPE_SYSTEM, SYSTEM_COCKPIT));
<b class="nc">&nbsp;            if (vrpp) {</b>
<b class="nc">&nbsp;                addCritical(LOC_CT, getFirstEmptyCrit(LOC_CT), new CriticalSlot(</b>
&nbsp;                        CriticalSlot.TYPE_SYSTEM, SYSTEM_LIFE_SUPPORT));
&nbsp;            } else {
<b class="nc">&nbsp;                addCritical(LOC_CT, getFirstEmptyCrit(LOC_CT), new CriticalSlot(</b>
&nbsp;                        CriticalSlot.TYPE_SYSTEM, SYSTEM_SENSORS));
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getEmptyCriticals(LOC_LT) &lt; 1) || (getEmptyCriticals(LOC_RT) &lt; 1)</b>
&nbsp;                || !success) {
<b class="nc">&nbsp;            success = false;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            addCritical(LOC_LT, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;            addCritical(LOC_RT, 0, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_LIFE_SUPPORT));
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (success) {</b>
<b class="nc">&nbsp;            if (vrpp) {</b>
<b class="nc">&nbsp;                setCockpitType(COCKPIT_VRRP);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                setCockpitType(COCKPIT_TORSO_MOUNTED);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return success;</b>
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * Convenience function that returns the critical slot containing the cockpit
&nbsp;     * @return
&nbsp;     */
&nbsp;    public List&lt;CriticalSlot&gt; getCockpit() {
<b class="nc">&nbsp;        List&lt;CriticalSlot&gt; retVal = new ArrayList&lt;&gt;();</b>
&nbsp;        
<b class="nc">&nbsp;        switch (cockpitType) {</b>
&nbsp;        // these always occupy slots 2 and 3 in the head
&nbsp;        case Mech.COCKPIT_COMMAND_CONSOLE:
&nbsp;        case Mech.COCKPIT_DUAL:
&nbsp;        case Mech.COCKPIT_SMALL_COMMAND_CONSOLE:
&nbsp;        case Mech.COCKPIT_INTERFACE:
&nbsp;        case Mech.COCKPIT_QUADVEE:
&nbsp;        case Mech.COCKPIT_SUPERHEAVY_COMMAND_CONSOLE:
<b class="nc">&nbsp;            retVal.add(getCritical(Mech.LOC_HEAD, 2));</b>
<b class="nc">&nbsp;            retVal.add(getCritical(Mech.LOC_HEAD, 3));</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case Mech.COCKPIT_TORSO_MOUNTED:
<b class="nc">&nbsp;            for (int critIndex = 0; critIndex &lt; getNumberOfCriticals(Mech.LOC_CT); critIndex++) {</b>
<b class="nc">&nbsp;                CriticalSlot slot = getCritical(Mech.LOC_CT, critIndex);</b>
<b class="nc">&nbsp;                if (slot.getIndex() == SYSTEM_COCKPIT) {</b>
<b class="nc">&nbsp;                    retVal.add(slot);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        default:
<b class="nc">&nbsp;            retVal.add(getCritical(Mech.LOC_HEAD, 2));</b>
&nbsp;        }
&nbsp;        
<b class="nc">&nbsp;        return retVal;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Determines which crew slot is associated with a particular cockpit critical.
&nbsp;     *
&nbsp;     * @param cs    A cockpit critical slot
&nbsp;     * @return      The crew slot index associated with this critical slot, or -1 to indicate the entire crew.
&nbsp;     */
&nbsp;    public int getCrewForCockpitSlot(int loc, CriticalSlot cs) {
&nbsp;        //For those with split cockpits, count the cockpit criticals in the location until we reach the correct
&nbsp;        //one.
<b class="nc">&nbsp;        if (getCockpitType() == COCKPIT_COMMAND_CONSOLE</b>
<b class="nc">&nbsp;                || getCockpitType() == COCKPIT_SUPERHEAVY_COMMAND_CONSOLE</b>
<b class="nc">&nbsp;	            || getCockpitType() == COCKPIT_SMALL_COMMAND_CONSOLE</b>
<b class="nc">&nbsp;                || getCockpitType() == COCKPIT_DUAL</b>
<b class="nc">&nbsp;                || getCockpitType() == COCKPIT_QUADVEE) {</b>
<b class="nc">&nbsp;            int crewSlot = 0;</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; getNumberOfCriticals(loc); i++) {</b>
<b class="nc">&nbsp;                if (getCritical(loc, i) == cs) {</b>
<b class="nc">&nbsp;                    return crewSlot;</b>
<b class="nc">&nbsp;                } else if (getCritical(loc, i).getIndex() == SYSTEM_COCKPIT) {</b>
<b class="nc">&nbsp;                    crewSlot++;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return -1;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean hasCommandConsoleBonus() {
<b class="nc">&nbsp;        return ((getCockpitType() == COCKPIT_COMMAND_CONSOLE) </b>
<b class="nc">&nbsp;		|| (getCockpitType() == COCKPIT_SUPERHEAVY_COMMAND_CONSOLE) </b>
<b class="nc">&nbsp;		|| (getCockpitType() == COCKPIT_SMALL_COMMAND_CONSOLE))</b>
<b class="nc">&nbsp;                &amp;&amp; getCrew().hasActiveCommandConsole()</b>
<b class="nc">&nbsp;                &amp;&amp; getWeightClass() &gt;= EntityWeightClass.WEIGHT_HEAVY</b>
<b class="nc">&nbsp;                &amp;&amp; (!isIndustrial() || hasWorkingMisc(MiscType.F_ADVANCED_FIRECONTROL));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a standard gyro. Also set the gyro
&nbsp;     * type variable. Note: This is part of the mek creation public API, and
&nbsp;     * might not be referenced by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addGyro() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_CT) &lt; (isSuperHeavy() ? 2 : 4)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCompactGyro();</b>
<b class="nc">&nbsp;        if (!isSuperHeavy()) {</b>
<b class="nc">&nbsp;            addCritical(LOC_CT, 5, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_GYRO));
<b class="nc">&nbsp;            addCritical(LOC_CT, 6, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_GYRO));
<b class="nc">&nbsp;            setGyroType(GYRO_STANDARD);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            setGyroType(GYRO_SUPERHEAVY);</b>
&nbsp;        }
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a standard gyro. Also set the gyro
&nbsp;     * type variable. Note: This is part of the mek creation public API, and
&nbsp;     * might not be referenced by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addSuperheavyGyro() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_CT) &lt; 2) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_CT, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_GYRO));
<b class="nc">&nbsp;        if (getEngine().getEngineType() == Engine.COMPACT_ENGINE) {</b>
<b class="nc">&nbsp;            addCritical(LOC_CT, 2, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_GYRO));
&nbsp;        } else {
<b class="nc">&nbsp;            addCritical(LOC_CT, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_GYRO));
&nbsp;        }
<b class="nc">&nbsp;        setGyroType(GYRO_SUPERHEAVY);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a compact gyro. Also set the gyro
&nbsp;     * type variable. Note: This is part of the mek creation public API, and
&nbsp;     * might not be referenced by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addCompactGyro() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_CT) &lt; 2) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        addCritical(LOC_CT, 3, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_GYRO));
<b class="nc">&nbsp;        addCritical(LOC_CT, 4, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_GYRO));
<b class="nc">&nbsp;        setGyroType(GYRO_COMPACT);</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for an extra-light gyro. Also set the
&nbsp;     * gyro type variable. Note: This is part of the mek creation public API,
&nbsp;     * and might not be referenced by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addXLGyro() {
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_CT) &lt; 6) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        clearEngineCrits();</b>
<b class="nc">&nbsp;        addGyro();</b>
<b class="nc">&nbsp;        addCritical(LOC_CT, 7, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_GYRO));
<b class="nc">&nbsp;        addCritical(LOC_CT, 8, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                SYSTEM_GYRO));
<b class="nc">&nbsp;        setGyroType(GYRO_XL);</b>
<b class="nc">&nbsp;        addEngineCrits();</b>
&nbsp;
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for a heavy-duty gyro. Also set the gyro
&nbsp;     * type variable. Note: This is part of the mek creation public API, and
&nbsp;     * might not be referenced by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addHeavyDutyGyro() {
<b class="nc">&nbsp;        if (addGyro()) {</b>
<b class="nc">&nbsp;            setGyroType(GYRO_HEAVY_DUTY);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add the critical slots necessary for the mek&#39;s engine. Calling this
&nbsp;     * method before setting a mek&#39;s engine object will result in a NPE. Note:
&nbsp;     * This is part of the mek creation public API, and might not be referenced
&nbsp;     * by any MegaMek code.
&nbsp;     *
&nbsp;     * @return false if insufficient critical space
&nbsp;     */
&nbsp;    public boolean addEngineCrits() {
<b class="nc">&nbsp;        if(!hasEngine()) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        boolean success = true;</b>
&nbsp;
<b class="nc">&nbsp;        int centerSlots[] = getEngine().getCenterTorsoCriticalSlots(</b>
<b class="nc">&nbsp;                getGyroType());</b>
<b class="nc">&nbsp;        if (getEmptyCriticals(LOC_CT) &lt; centerSlots.length) {</b>
<b class="nc">&nbsp;            success = false;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            for (int centerSlot : centerSlots) {</b>
<b class="nc">&nbsp;                addCritical(LOC_CT, centerSlot, new CriticalSlot(</b>
&nbsp;                        CriticalSlot.TYPE_SYSTEM, SYSTEM_ENGINE));
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        int sideSlots[] = getEngine().getSideTorsoCriticalSlots();</b>
<b class="nc">&nbsp;        if ((getEmptyCriticals(LOC_LT) &lt; sideSlots.length)</b>
<b class="nc">&nbsp;                || (getEmptyCriticals(LOC_RT) &lt; sideSlots.length) || !success) {</b>
<b class="nc">&nbsp;            success = false;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            for (int sideSlot : sideSlots) {</b>
<b class="nc">&nbsp;                addCritical(LOC_LT, sideSlot, new CriticalSlot(</b>
&nbsp;                        CriticalSlot.TYPE_SYSTEM, SYSTEM_ENGINE));
<b class="nc">&nbsp;                addCritical(LOC_RT, sideSlot, new CriticalSlot(</b>
&nbsp;                        CriticalSlot.TYPE_SYSTEM, SYSTEM_ENGINE));
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return success;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Remove all engine critical slots from the mek. Note: This is part of the
&nbsp;     * mek creation public API, and might not be referenced by any MegaMek code.
&nbsp;     */
&nbsp;    public void clearEngineCrits() {
<b class="nc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="nc">&nbsp;            removeCriticals(i, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_ENGINE));
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Remove all cockpit critical slots from the mek. Note: This is part of the
&nbsp;     * mek creation public API, and might not be referenced by any MegaMek code.
&nbsp;     */
&nbsp;    public void clearCockpitCrits() {
<b class="nc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="nc">&nbsp;            removeCriticals(i, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_LIFE_SUPPORT));
<b class="nc">&nbsp;            removeCriticals(i, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_SENSORS));
<b class="nc">&nbsp;            removeCriticals(i, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_COCKPIT));
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Remove all gyro critical slots from the mek. Note: This is part of the
&nbsp;     * mek creation public API, and might not be referenced by any MegaMek code.
&nbsp;     */
&nbsp;    public void clearGyroCrits() {
<b class="nc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="nc">&nbsp;            removeCriticals(i, new CriticalSlot(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                    SYSTEM_GYRO));
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public int shieldAbsorptionDamage(int damage, int location, boolean rear) {
<b class="nc">&nbsp;        int damageAbsorption = damage;</b>
<b class="nc">&nbsp;        if (this.hasActiveShield(location, rear)) {</b>
<b class="nc">&nbsp;            switch (location) {</b>
&nbsp;                case Mech.LOC_CT:
&nbsp;                case Mech.LOC_HEAD:
<b class="nc">&nbsp;                    if (this.hasActiveShield(Mech.LOC_RARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_RARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
<b class="nc">&nbsp;                    if (this.hasActiveShield(Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_LARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case Mech.LOC_LARM:
&nbsp;                case Mech.LOC_LT:
&nbsp;                case Mech.LOC_LLEG:
<b class="nc">&nbsp;                    if (this.hasActiveShield(Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_LARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;                default:
<b class="nc">&nbsp;                    if (this.hasActiveShield(Mech.LOC_RARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_RARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (this.hasPassiveShield(location, rear)) {</b>
<b class="nc">&nbsp;            switch (location) {</b>
&nbsp;                case Mech.LOC_LARM:
&nbsp;                case Mech.LOC_LT:
<b class="nc">&nbsp;                    if (this.hasPassiveShield(Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_LARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case Mech.LOC_RARM:
&nbsp;                case Mech.LOC_RT:
<b class="nc">&nbsp;                    if (this.hasPassiveShield(Mech.LOC_RARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_RARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (hasNoDefenseShield(location)) {</b>
<b class="nc">&nbsp;            switch (location) {</b>
&nbsp;                case Mech.LOC_LARM:
<b class="nc">&nbsp;                    if (hasNoDefenseShield(Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_LARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case Mech.LOC_RARM:
<b class="nc">&nbsp;                    if (hasNoDefenseShield(Mech.LOC_RARM)) {</b>
<b class="nc">&nbsp;                        damageAbsorption = getAbsorptionRate(Mech.LOC_RARM,</b>
&nbsp;                                damageAbsorption);
&nbsp;                    }
&nbsp;                    break;
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return Math.max(0, damageAbsorption);</b>
&nbsp;    }
&nbsp;
&nbsp;    private int getAbsorptionRate(int location, int damage) {
<b class="nc">&nbsp;        int rate = damage;</b>
&nbsp;
<b class="nc">&nbsp;        if ((location != Mech.LOC_RARM) &amp;&amp; (location != Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;            return rate;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (damage &lt;= 0) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for (int slot = 0; slot &lt; this.getNumberOfCriticals(location); slot++) {</b>
<b class="nc">&nbsp;            CriticalSlot cs = getCritical(location, slot);</b>
&nbsp;
<b class="nc">&nbsp;            if (cs == null) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (cs.getType() != CriticalSlot.TYPE_EQUIPMENT) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (cs.isDamaged()) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            Mounted m = cs.getMount();</b>
&nbsp;
<b class="nc">&nbsp;            EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;            if ((type instanceof MiscType) &amp;&amp; ((MiscType) type).isShield()) {</b>
<b class="nc">&nbsp;                rate -= m.getDamageAbsorption(this, m.getLocation());</b>
<b class="nc">&nbsp;                m.damageTaken++;</b>
<b class="nc">&nbsp;                return Math.max(0, rate);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return rate;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does this mech have an undamaged HarJel system in this location?
&nbsp;     *
&nbsp;     * @param loc
&nbsp;     *            the &lt;code&gt;int&lt;/code&gt; location to check
&nbsp;     * @return a &lt;code&gt;boolean&lt;/code&gt; value indicating a present HarJel system
&nbsp;     */
&nbsp;    public boolean hasHarJelIIIn(int loc) {
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if ((mounted.getLocation() == loc) &amp;&amp; mounted.isReady()</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getType().hasFlag(MiscType.F_HARJEL_II))) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Does this mech have an undamaged HarJel system in this location?
&nbsp;     *
&nbsp;     * @param loc
&nbsp;     *            the &lt;code&gt;int&lt;/code&gt; location to check
&nbsp;     * @return a &lt;code&gt;boolean&lt;/code&gt; value indicating a present HarJel system
&nbsp;     */
&nbsp;    public boolean hasHarJelIIIIn(int loc) {
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if ((mounted.getLocation() == loc) &amp;&amp; mounted.isReady()</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getType().hasFlag(MiscType.F_HARJEL_III))) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void setGrappled(int id, boolean attacker) {
<b class="nc">&nbsp;        grappled_id = id;</b>
<b class="nc">&nbsp;        isGrappleAttacker = attacker;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isGrappleAttacker() {
<b class="nc">&nbsp;        return isGrappleAttacker;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getGrappled() {
<b class="nc">&nbsp;        return grappled_id;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isGrappledThisRound() {
<b class="nc">&nbsp;        return grappledThisRound;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void setGrappledThisRound(boolean grappled) {
<b class="nc">&nbsp;        grappledThisRound = grappled;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isEligibleForMovement() {
&nbsp;        // For normal grapples, neither unit can move
&nbsp;        // If the grapple is caused by a chain whip, then the attacker can move
&nbsp;        // (this breaks the grapple), TO pg 289
<b class="nc">&nbsp;        if ((grappled_id != Entity.NONE)</b>
<b class="nc">&nbsp;                &amp;&amp; (!isChainWhipGrappled() || !isGrappleAttacker())) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        return super.isEligibleForMovement();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isNuclearHardened() {
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void destroyLocation(int loc) {
<b class="nc">&nbsp;        destroyLocation(loc, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void destroyLocation(int loc, boolean blownOff) {
&nbsp;        // If it&#39;s already destroyed, don&#39;t bother -- as of 12/06/28, super.
&nbsp;        // destroyLocation() will just return having done nothing itself and
&nbsp;        // then we&#39;d potentially end up with a second PSR for an
&nbsp;        // already-destroyed
&nbsp;        // leg.
<b class="nc">&nbsp;        if (getInternal(loc) &lt; 0) {</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        super.destroyLocation(loc, blownOff);</b>
&nbsp;        // if it&#39;s a leg, the entity falls
<b class="nc">&nbsp;        if (locationIsLeg(loc) &amp;&amp; canFall()) {</b>
<b class="nc">&nbsp;            game.addPSR(new PilotingRollData(getId(),</b>
&nbsp;                    TargetRoll.AUTOMATIC_FAIL, 5, &quot;leg destroyed&quot;));
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean hasCASEII(int location) {
&nbsp;
<b class="nc">&nbsp;        for (Mounted mount : this.getEquipment()) {</b>
<b class="nc">&nbsp;            if ((mount.getLocation() == location)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mount.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; ((MiscType) mount.getType()).hasFlag(MiscType.F_CASEII)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /* Check to see if case II exists anywhere on the mech */
&nbsp;    public boolean hasCASEIIAnywhere() {
&nbsp;
<b class="nc">&nbsp;        for (Mounted mount : this.getEquipment()) {</b>
<b class="nc">&nbsp;            if ((mount.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; ((MiscType) mount.getType()).hasFlag(MiscType.F_CASEII)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void setGrappleSide(int side) {
<b class="nc">&nbsp;        grappledSide = side;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getGrappleSide() {
<b class="nc">&nbsp;        return grappledSide;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isCarefulStand() {
<b class="nc">&nbsp;        return isCarefulStanding;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getCoolantFailureAmount() {
<b class="nc">&nbsp;        return heatSinkCoolantFailureFactor;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void addCoolantFailureAmount(int amount) {
<b class="nc">&nbsp;        heatSinkCoolantFailureFactor += amount;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void resetCoolantFailureAmount() {
<b class="nc">&nbsp;        heatSinkCoolantFailureFactor = 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getTotalCommGearTons()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getTotalCommGearTons() {
<b class="nc">&nbsp;        return 1 + getExtraCommGearTons();</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getHQIniBonus()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getHQIniBonus() {
<b class="nc">&nbsp;        int bonus = super.getHQIniBonus();</b>
<b class="nc">&nbsp;        if (((getGyroHits() &gt; 0) || hasHipCrit()) &amp;&amp; (mpUsedLastRound &gt; 0)) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        return bonus;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#getBARRating()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getBARRating(int loc) {
<b class="nc">&nbsp;        if (armorType[loc] == EquipmentType.T_ARMOR_COMMERCIAL) {</b>
<b class="nc">&nbsp;            return 5;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((armorType[loc] == EquipmentType.T_ARMOR_INDUSTRIAL)</b>
&nbsp;                || (armorType[loc] == EquipmentType.T_ARMOR_HEAVY_INDUSTRIAL)) {
<b class="nc">&nbsp;            return 10;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 10;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Is this an Industrial Mech?
&nbsp;     *
&nbsp;     * @return if this mech has an industrial inner structure
&nbsp;     */
&nbsp;    public boolean isIndustrial() {
<b class="fc">&nbsp;        return getStructureType() == EquipmentType.T_STRUCTURE_INDUSTRIAL;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * set if this mech just moved into water that would kill it because of the
&nbsp;     * lack of environmental sealing
&nbsp;     *
&nbsp;     * @param moved
&nbsp;     */
&nbsp;    public void setJustMovedIntoIndustrialKillingWater(boolean moved) {
<b class="nc">&nbsp;        justMovedIntoIndustrialKillingWater = moved;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * did this mech just moved into water that would kill it because we lack
&nbsp;     * environmental sealing?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean isJustMovedIntoIndustrialKillingWater() {
<b class="fc">&nbsp;        return justMovedIntoIndustrialKillingWater;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * should this mech die at the end of turn because it&#39;s an IndustrialMech
&nbsp;     * without environmental sealing that moved into water last round and stayed
&nbsp;     * there?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean shouldDieAtEndOfTurnBecauseOfWater() {
<b class="nc">&nbsp;        return shouldDieAtEndOfTurnBecauseOfWater;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Set if this Mech&#39;s ICE Engine is stalled or not should only be used for
&nbsp;     * industrial mechs carrying an ICE engine
&nbsp;     *
&nbsp;     * @param stalled
&nbsp;     */
&nbsp;    public void setStalled(boolean stalled) {
<b class="nc">&nbsp;        this.stalled = stalled;</b>
<b class="nc">&nbsp;        stalledThisTurn = true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#isStalled()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isStalled() {
<b class="fc">&nbsp;        return stalled;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#isShutDown()
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean isShutDown() {
<b class="fc">&nbsp;        return super.isShutDown() || isStalled();</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#doCheckEngineStallRoll(java.util.Vector)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public Vector&lt;Report&gt; doCheckEngineStallRoll(Vector&lt;Report&gt; vPhaseReport) {
<b class="nc">&nbsp;        if(hasEngine() &amp;&amp; (getEngine().getEngineType() == Engine.COMBUSTION_ENGINE)) {</b>
<b class="nc">&nbsp;            Report r = new Report(2280);</b>
<b class="nc">&nbsp;            r.addDesc(this);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.add(1);</b>
<b class="nc">&nbsp;            r.add(&quot;ICE-Engine &#39;Mech failed a PSR&quot;);</b>
<b class="nc">&nbsp;            vPhaseReport.add(r);</b>
<b class="nc">&nbsp;            r = new Report(2285);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
&nbsp;            // Stall check is made against unmodified Piloting skill...
<b class="nc">&nbsp;            PilotingRollData base = new PilotingRollData(getId(), getCrew()</b>
<b class="nc">&nbsp;                    .getPiloting(), &quot;Base piloting skill&quot;);</b>
&nbsp;            // ...but dead or unconscious pilots should still auto-fail.
<b class="nc">&nbsp;            if (getCrew().isDead() || getCrew().isDoomed()</b>
<b class="nc">&nbsp;                    || (getCrew().getHits() &gt;= 6)) {</b>
<b class="nc">&nbsp;                base = new PilotingRollData(getId(), TargetRoll.AUTOMATIC_FAIL,</b>
&nbsp;                        &quot;Pilot dead&quot;);
<b class="nc">&nbsp;            } else if (!getCrew().isActive()) {</b>
<b class="nc">&nbsp;                base = new PilotingRollData(getId(), TargetRoll.IMPOSSIBLE,</b>
&nbsp;                        &quot;Pilot unconscious&quot;);
&nbsp;            }
<b class="nc">&nbsp;            r.add(base.getValueAsString());</b>
<b class="nc">&nbsp;            r.add(base.getDesc());</b>
<b class="nc">&nbsp;            vPhaseReport.add(r);</b>
<b class="nc">&nbsp;            r = new Report(2290);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.indent();</b>
<b class="nc">&nbsp;            r.newlines = 0;</b>
<b class="nc">&nbsp;            r.add(1);</b>
<b class="nc">&nbsp;            r.add(base.getPlainDesc());</b>
<b class="nc">&nbsp;            vPhaseReport.add(r);</b>
<b class="nc">&nbsp;            int diceRoll = getCrew().rollPilotingSkill();</b>
<b class="nc">&nbsp;            r = new Report(2300);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.add(base.getValueAsString());</b>
<b class="nc">&nbsp;            r.add(diceRoll);</b>
<b class="nc">&nbsp;            if (diceRoll &lt; base.getValue()) {</b>
<b class="nc">&nbsp;                r.choose(false);</b>
<b class="nc">&nbsp;                setStalled(true);</b>
<b class="nc">&nbsp;                r.newlines = 0;</b>
<b class="nc">&nbsp;                vPhaseReport.add(r);</b>
<b class="nc">&nbsp;                r = new Report(2303);</b>
<b class="nc">&nbsp;                r.subject = getId();</b>
<b class="nc">&nbsp;                vPhaseReport.add(r);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                r.choose(true);</b>
<b class="nc">&nbsp;                vPhaseReport.add(r);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return vPhaseReport;</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;     * (non-Javadoc)
&nbsp;     *
&nbsp;     * @see megamek.common.Entity#checkUnstall(java.util.Vector)
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void checkUnstall(Vector&lt;Report&gt; vPhaseReport) {
<b class="nc">&nbsp;        if (stalled &amp;&amp; !stalledThisTurn &amp;&amp; hasEngine()</b>
<b class="nc">&nbsp;                &amp;&amp; (getEngine().getEngineType() == Engine.COMBUSTION_ENGINE)) {</b>
<b class="nc">&nbsp;            Report r = new Report(2280);</b>
<b class="nc">&nbsp;            r.addDesc(this);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.add(1);</b>
<b class="nc">&nbsp;            r.add(&quot;unstall stalled ICE engine&quot;);</b>
<b class="nc">&nbsp;            vPhaseReport.add(r);</b>
<b class="nc">&nbsp;            r = new Report(2285);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
&nbsp;            // Unstall check is made against unmodified Piloting skill...
<b class="nc">&nbsp;            PilotingRollData base = new PilotingRollData(getId(), getCrew()</b>
<b class="nc">&nbsp;                    .getPiloting(), &quot;Base piloting skill&quot;);</b>
&nbsp;            // ...but dead or unconscious pilots should still auto-fail, same as
&nbsp;            // for stalling.
<b class="nc">&nbsp;            if (getCrew().isDead() || getCrew().isDoomed()</b>
<b class="nc">&nbsp;                    || (getCrew().getHits() &gt;= 6)) {</b>
<b class="nc">&nbsp;                base = new PilotingRollData(getId(), TargetRoll.AUTOMATIC_FAIL,</b>
&nbsp;                        &quot;Pilot dead&quot;);
<b class="nc">&nbsp;            } else if (!getCrew().isActive()) {</b>
<b class="nc">&nbsp;                base = new PilotingRollData(getId(), TargetRoll.IMPOSSIBLE,</b>
&nbsp;                        &quot;Pilot unconscious&quot;);
&nbsp;            }
<b class="nc">&nbsp;            r.add(base.getValueAsString());</b>
<b class="nc">&nbsp;            r.add(base.getDesc());</b>
<b class="nc">&nbsp;            vPhaseReport.add(r);</b>
<b class="nc">&nbsp;            r = new Report(2290);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.indent();</b>
<b class="nc">&nbsp;            r.newlines = 0;</b>
<b class="nc">&nbsp;            r.add(1);</b>
<b class="nc">&nbsp;            r.add(base.getPlainDesc());</b>
<b class="nc">&nbsp;            vPhaseReport.add(r);</b>
<b class="nc">&nbsp;            int diceRoll = getCrew().rollPilotingSkill();</b>
<b class="nc">&nbsp;            r = new Report(2300);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.add(base.getValueAsString());</b>
<b class="nc">&nbsp;            r.add(diceRoll);</b>
<b class="nc">&nbsp;            if (diceRoll &lt; base.getValue()) {</b>
<b class="nc">&nbsp;                r.choose(false);</b>
<b class="nc">&nbsp;                vPhaseReport.add(r);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                r.choose(true);</b>
<b class="nc">&nbsp;                r.newlines = 0;</b>
<b class="nc">&nbsp;                vPhaseReport.add(r);</b>
<b class="nc">&nbsp;                setStalled(false);</b>
<b class="nc">&nbsp;                r = new Report(2304);</b>
<b class="nc">&nbsp;                r.subject = getId();</b>
<b class="nc">&nbsp;                vPhaseReport.add(r);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isPrimitive() {
<b class="fc">&nbsp;        return (getCockpitType() == Mech.COCKPIT_PRIMITIVE)</b>
<b class="fc">&nbsp;                || (getCockpitType() == Mech.COCKPIT_PRIMITIVE_INDUSTRIAL);</b>
&nbsp;    }
&nbsp;
&nbsp;    private int getFirstEmptyCrit(int Location) {
<b class="nc">&nbsp;        for (int i = 0; i &lt; getNumberOfCriticals(Location); i++) {</b>
<b class="nc">&nbsp;            if (getCritical(Location, i) == null) {</b>
<b class="nc">&nbsp;                return i;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return -1;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasArmoredCockpit() {
&nbsp;
<b class="nc">&nbsp;        int location = getCockpitType() == Mech.COCKPIT_TORSO_MOUNTED ? Mech.LOC_CT</b>
<b class="nc">&nbsp;                : Mech.LOC_HEAD;</b>
&nbsp;
<b class="nc">&nbsp;        for (int slot = 0; slot &lt; getNumberOfCriticals(location); slot++) {</b>
<b class="nc">&nbsp;            CriticalSlot cs = getCritical(location, slot);</b>
<b class="nc">&nbsp;            if ((cs != null) &amp;&amp; (cs.getType() == CriticalSlot.TYPE_SYSTEM)</b>
<b class="nc">&nbsp;                    &amp;&amp; (cs.getIndex() == Mech.SYSTEM_COCKPIT)) {</b>
<b class="nc">&nbsp;                return cs.isArmored();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasArmoredGyro() {
<b class="nc">&nbsp;        for (int slot = 0; slot &lt; getNumberOfCriticals(LOC_CT); slot++) {</b>
<b class="nc">&nbsp;            CriticalSlot cs = getCritical(LOC_CT, slot);</b>
<b class="nc">&nbsp;            if ((cs != null) &amp;&amp; (cs.getType() == CriticalSlot.TYPE_SYSTEM)</b>
<b class="nc">&nbsp;                    &amp;&amp; (cs.getIndex() == Mech.SYSTEM_GYRO)) {</b>
<b class="nc">&nbsp;                return cs.isArmored();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean hasArmoredEngine() {
<b class="nc">&nbsp;        for (int slot = 0; slot &lt; getNumberOfCriticals(LOC_CT); slot++) {</b>
<b class="nc">&nbsp;            CriticalSlot cs = getCritical(LOC_CT, slot);</b>
<b class="nc">&nbsp;            if ((cs != null) &amp;&amp; (cs.getType() == CriticalSlot.TYPE_SYSTEM)</b>
<b class="nc">&nbsp;                    &amp;&amp; (cs.getIndex() == Mech.SYSTEM_ENGINE)) {</b>
<b class="nc">&nbsp;                return cs.isArmored();</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * should this mech check for a critical hit at the end of turn due to being
&nbsp;     * an industrial mech and having been the target of a succesfull physical
&nbsp;     * attack or for falling
&nbsp;     */
&nbsp;    public boolean isCheckForCrit() {
<b class="nc">&nbsp;        return checkForCrit;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * how many levels did this mech fall this turn?
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    public int getLevelsFallen() {
<b class="nc">&nbsp;        return levelsFallen;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setLevelsFallen(int levels) {
<b class="nc">&nbsp;        levelsFallen = levels;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setCheckForCrit(boolean check) {
<b class="nc">&nbsp;        checkForCrit = check;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Is the passed in location an arm?
&nbsp;     *
&nbsp;     * @param loc
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean isArm(int loc) {
<b class="nc">&nbsp;        return (loc == Mech.LOC_LARM) || (loc == Mech.LOC_RARM);</b>
&nbsp;    }
&nbsp;
&nbsp;    public double getArmoredComponentBV() {
<b class="nc">&nbsp;        double bv = 0.0f;</b>
&nbsp;
&nbsp;        // all equipment gets 5% of BV cost per slot, or a flat +5 per slot
&nbsp;        // if BV is 0
<b class="nc">&nbsp;        for (Mounted mount : getEquipment()) {</b>
<b class="nc">&nbsp;            if (!mount.isArmored()</b>
<b class="nc">&nbsp;                    || ((mount.getType() instanceof MiscType) &amp;&amp; ((MiscType) mount</b>
<b class="nc">&nbsp;                            .getType()).hasFlag(MiscType.F_PPC_CAPACITOR))) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            double mountBv = mount.getType().getBV(this);</b>
<b class="nc">&nbsp;            if ((mount.getType() instanceof PPCWeapon)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mount.getLinkedBy() != null)) {</b>
<b class="nc">&nbsp;                mountBv += ((MiscType) mount.getLinkedBy().getType()).getBV(</b>
&nbsp;                        this, mount);
<b class="nc">&nbsp;                bv += mountBv * 0.05 * (mount.getCriticals() + 1);</b>
<b class="nc">&nbsp;            } else if (mountBv &gt; 0) {</b>
<b class="nc">&nbsp;                bv += mountBv * 0.05 * mount.getCriticals();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                bv += 5 * mount.getCriticals();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        for (int location = 0; location &lt; locations(); location++) {</b>
<b class="nc">&nbsp;            for (int slot = 0; slot &lt; getNumberOfCriticals(location); slot++) {</b>
<b class="nc">&nbsp;                CriticalSlot cs = getCritical(location, slot);</b>
<b class="nc">&nbsp;                if ((cs != null) &amp;&amp; cs.isArmored()</b>
<b class="nc">&nbsp;                        &amp;&amp; (cs.getType() == CriticalSlot.TYPE_SYSTEM)) {</b>
&nbsp;                    // gyro is the only system that has it&#39;s own BV
<b class="nc">&nbsp;                    if ((cs.getIndex() == Mech.SYSTEM_GYRO)) {</b>
<b class="nc">&nbsp;                        bv += getWeight() * getGyroMultiplier() * 0.05;</b>
&nbsp;                    } else {
&nbsp;                        // System Crit that is armored but does not normally
&nbsp;                        // have a BV
<b class="nc">&nbsp;                        bv += 5;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return bv;</b>
&nbsp;    }
&nbsp;
&nbsp;    public double getGyroMultiplier() {
<b class="nc">&nbsp;        if ((getGyroType() == GYRO_HEAVY_DUTY)) {</b>
<b class="nc">&nbsp;            return 1.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getGyroType() == GYRO_NONE &amp;&amp; getCockpitType() != COCKPIT_INTERFACE) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0.5;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setFullHeadEject(boolean fullHeadEject) {
<b class="fc">&nbsp;        this.fullHeadEject = fullHeadEject;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasFullHeadEject() {
<b class="fc">&nbsp;        return fullHeadEject;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Start of Battle Force Conversion Methods
&nbsp;     */
&nbsp;
&nbsp;    @Override
&nbsp;    public double getBaseBattleForceMovement() {
<b class="nc">&nbsp;        double move = getOriginalWalkMP();</b>
&nbsp;
<b class="nc">&nbsp;        if (hasMASCAndSuperCharger()) {</b>
<b class="nc">&nbsp;            move *= 1.5;</b>
<b class="nc">&nbsp;        } else if (hasMASC()) {</b>
<b class="nc">&nbsp;            move *= 1.25;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (hasMPReducingHardenedArmor()) {</b>
<b class="nc">&nbsp;            move--;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getMisc().stream().filter(m -&gt; m.getType().hasFlag(MiscType.F_CLUB))</b>
<b class="nc">&nbsp;        		.map(m -&gt; m.getType().getSubType())</b>
<b class="nc">&nbsp;        		.anyMatch(st -&gt; st == MiscType.S_SHIELD_LARGE || st == MiscType.S_SHIELD_MEDIUM)) {</b>
<b class="nc">&nbsp;            move--;</b>
&nbsp;        }
<b class="nc">&nbsp;        return move;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    /*
&nbsp;     * returns the battle force structure points for a mech
&nbsp;     */
&nbsp;    public int getBattleForceStructurePoints() {
<b class="nc">&nbsp;        int battleForceStructure = 0;</b>
<b class="nc">&nbsp;        int battleForceEngineType = 0;</b>
&nbsp;
<b class="nc">&nbsp;        int[][] battleForceStructureTable = new int[][] {</b>
&nbsp;                { 1, 1, 2, 2, 3, 3, 3, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7, 8, 8,
&nbsp;                    8, 8, 9, 9, 10, 10, 10, 11, 11, 11, 12, 12, 13, 13, 13, 14, 14, 14, 15, 15 },
&nbsp;                { 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 7, 7, 7, 8, 8, 9, 10, 10, 10,
&nbsp;                    11, 11, 12, 12, 13, 13, 14, 14, 15, 15, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20 },
&nbsp;                { 1, 1, 1, 2, 2, 2, 2, 3, 3, 4, 4, 4, 4, 5, 5, 5, 6, 6, 6,
&nbsp;                    6, 7, 7, 7, 8, 8, 8, 8, 9, 9, 9, 10, 10, 10, 11, 11, 11, 11, 12, 12 },
&nbsp;                { 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5,
&nbsp;                    5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 9, 9, 9, 9, 10, 10, 10 },
&nbsp;                { 1, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4,
&nbsp;                    5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 7, 7, 7, 7, 8 ,8, 8, 8, 8, 9 },
&nbsp;                { 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4,
&nbsp;                    4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 8 },
&nbsp;                { 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3,
&nbsp;                    3, 3, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6 },
&nbsp;                { 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3,
&nbsp;                    4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7 },
&nbsp;                { 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3,
&nbsp;                    3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5 } };
&nbsp;
<b class="nc">&nbsp;        if(hasEngine()) {</b>
<b class="nc">&nbsp;            if (isClan()) {</b>
<b class="nc">&nbsp;                if (getEngine().hasFlag(Engine.LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    switch (getEngine().getEngineType()) {</b>
&nbsp;                        case Engine.XL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 5;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.XXL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 8;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    switch (getEngine().getEngineType()) {</b>
&nbsp;                        case Engine.XL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 4;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.XXL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 6;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        default:
<b class="nc">&nbsp;                            battleForceEngineType = 1;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                if (getEngine().hasFlag(Engine.LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    switch (getEngine().getEngineType()) {</b>
&nbsp;                        case Engine.XL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 5;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.XXL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 9;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.LIGHT_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 5;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        default:
<b class="nc">&nbsp;                            battleForceEngineType = 3;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    switch (getEngine().getEngineType()) {</b>
&nbsp;                        case Engine.XL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 5;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.COMPACT_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 2;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.LIGHT_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 4;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case Engine.XXL_ENGINE:
<b class="nc">&nbsp;                            battleForceEngineType = 7;</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        default:
<b class="nc">&nbsp;                            battleForceEngineType = 1;</b>
&nbsp;                            break;
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        battleForceStructure = battleForceStructureTable[battleForceEngineType - 1][((int) getWeight() / 5) - 2];</b>
&nbsp;
<b class="nc">&nbsp;        if (getStructureType() == EquipmentType.T_STRUCTURE_COMPOSITE) {</b>
<b class="nc">&nbsp;            battleForceStructure = (int) Math.ceil(battleForceStructure * .5);</b>
<b class="nc">&nbsp;        } else if (getStructureType() == EquipmentType.T_STRUCTURE_REINFORCED) {</b>
<b class="nc">&nbsp;            battleForceStructure *= 2;</b>
&nbsp;        }
<b class="nc">&nbsp;        return battleForceStructure;</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getNumBattleForceWeaponsLocations() {
<b class="nc">&nbsp;        return 2;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public double getBattleForceLocationMultiplier(int index, int location, boolean rearMounted) {
<b class="nc">&nbsp;        if ((index == 0 &amp;&amp; !rearMounted</b>
&nbsp;                || (index == 1) &amp;&amp; rearMounted)) {
<b class="nc">&nbsp;            return 1.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public String getBattleForceLocationName(int index) {
<b class="nc">&nbsp;        if (index == 1) {</b>
<b class="nc">&nbsp;            return &quot;REAR&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return &quot;&quot;;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isBattleForceRearLocation(int index) {
<b class="nc">&nbsp;        return index == 1;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getBattleForceTotalHeatGeneration(boolean allowRear) {
<b class="nc">&nbsp;        int totalHeat = 0;</b>
&nbsp;
&nbsp;        // finish the max heat calculations
<b class="nc">&nbsp;        if (this.getJumpMP() &gt; 0) {</b>
<b class="nc">&nbsp;            totalHeat += getJumpHeat(getJumpMP());</b>
<b class="nc">&nbsp;        } else if (!isIndustrial() &amp;&amp; hasEngine()) {</b>
<b class="nc">&nbsp;            totalHeat += getEngine().getRunHeat(this);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for (Mounted mount : getWeaponList()) {</b>
<b class="nc">&nbsp;            WeaponType weapon = (WeaponType) mount.getType();</b>
<b class="nc">&nbsp;            if (weapon.hasFlag(WeaponType.F_ONESHOT)</b>
<b class="nc">&nbsp;                || (allowRear &amp;&amp; !mount.isRearMounted())</b>
<b class="nc">&nbsp;                || (!allowRear &amp;&amp; mount.isRearMounted())) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (weapon.getAmmoType() == AmmoType.T_AC_ROTARY) {</b>
<b class="nc">&nbsp;                totalHeat += weapon.getHeat() * 6;</b>
<b class="nc">&nbsp;            } else if (weapon.getAmmoType() == AmmoType.T_AC_ULTRA</b>
<b class="nc">&nbsp;                    || weapon.getAmmoType() == AmmoType.T_AC_ULTRA_THB) {</b>
<b class="nc">&nbsp;                totalHeat += weapon.getHeat() * 2;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                totalHeat += weapon.getHeat();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        if (hasWorkingMisc(MiscType.F_STEALTH, -1)) {</b>
<b class="nc">&nbsp;            totalHeat += 10;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return totalHeat;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void addBattleForceSpecialAbilities(Map&lt;BattleForceSPA,Integer&gt; specialAbilities) {
<b class="nc">&nbsp;        super.addBattleForceSpecialAbilities(specialAbilities);</b>
<b class="nc">&nbsp;        specialAbilities.put(BattleForceSPA.SRCH, null);</b>
<b class="nc">&nbsp;        for (Mounted m : getEquipment()) {</b>
<b class="nc">&nbsp;            if (!(m.getType() instanceof MiscType)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (m.getType().hasFlag(MiscType.F_HARJEL)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.BHJ, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_HARJEL_II)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.BHJ2, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_HARJEL_III)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.BHJ3, null);</b>
<b class="nc">&nbsp;            } else if (((MiscType)m.getType()).isShield()) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.SHLD, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_INDUSTRIAL_TSM)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.ITSM, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_TSM)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.TSM, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_VOIDSIG)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.MAS, null);</b>
<b class="nc">&nbsp;            } else if (isIndustrial() &amp;&amp; m.getType().hasFlag(MiscType.F_ENVIRONMENTAL_SEALING)</b>
<b class="nc">&nbsp;                    &amp;&amp; getEngine().getEngineType() != Engine.COMBUSTION_ENGINE) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.SOA, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_NULLSIG)</b>
<b class="nc">&nbsp;                    || m.getType().hasFlag(MiscType.F_CHAMELEON_SHIELD)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.STL, null);</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.ECM, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_UMU)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.UMU, null);</b>
<b class="nc">&nbsp;            } else if (m.getType().hasFlag(MiscType.F_BATTLEMECH_NIU)) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.DN, null);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (getCockpitType() == COCKPIT_COMMAND_CONSOLE) {</b>
<b class="nc">&nbsp;            specialAbilities.merge(BattleForceSPA.MHQ, 1, Integer::sum);</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == COCKPIT_SUPERHEAVY_COMMAND_CONSOLE) {</b>
<b class="nc">&nbsp;            specialAbilities.merge(BattleForceSPA.MHQ, 1, Integer::sum);</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == COCKPIT_SMALL_COMMAND_CONSOLE) {</b>
<b class="nc">&nbsp;            specialAbilities.merge(BattleForceSPA.MHQ, 1, Integer::sum);</b>
<b class="nc">&nbsp;        } else if (getCockpitType() == COCKPIT_VRRP) {</b>
<b class="nc">&nbsp;            specialAbilities.merge(BattleForceSPA.VR, 1, Integer::sum);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (isIndustrial()) {</b>
<b class="nc">&nbsp;            if (getCockpitType() == Mech.COCKPIT_STANDARD) {</b>
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.AFC, null);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                specialAbilities.put(BattleForceSPA.BFC, null);</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            specialAbilities.put(BattleForceSPA.SOA, null);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public abstract boolean hasMPReducingHardenedArmor();
&nbsp;
&nbsp;    /**
&nbsp;     * End of Battle Force Conversion Methods
&nbsp;     */
&nbsp;
&nbsp;    @Override
&nbsp;    public int getEngineHits() {
<b class="nc">&nbsp;        int engineHits = 0;</b>
<b class="nc">&nbsp;        engineHits += getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                Mech.SYSTEM_ENGINE, Mech.LOC_CT);
<b class="nc">&nbsp;        engineHits += getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                Mech.SYSTEM_ENGINE, Mech.LOC_RT);
<b class="nc">&nbsp;        engineHits += getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                Mech.SYSTEM_ENGINE, Mech.LOC_LT);
<b class="nc">&nbsp;        return engineHits;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getGyroHits() {
<b class="nc">&nbsp;        return getHitCriticals(CriticalSlot.TYPE_SYSTEM, Mech.SYSTEM_GYRO,</b>
&nbsp;                Mech.LOC_CT);
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isGyroDestroyed() {
<b class="nc">&nbsp;        if (getGyroType() == GYRO_HEAVY_DUTY) {</b>
<b class="nc">&nbsp;            return getGyroHits() &gt; 2;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return getGyroHits() &gt; 1;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public String getLocationDamage(int loc) {
<b class="nc">&nbsp;        String toReturn = &quot;&quot;;</b>
<b class="nc">&nbsp;        boolean first = true;</b>
<b class="nc">&nbsp;        if (isLocationBlownOff(loc)) {</b>
<b class="nc">&nbsp;            toReturn += &quot;BLOWN OFF&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (isLocationTrulyDestroyed(loc)) {</b>
<b class="nc">&nbsp;            return toReturn;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getLocationStatus(loc) == ILocationExposureStatus.BREACHED) {</b>
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;BREACH&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(SYSTEM_LIFE_SUPPORT, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        SYSTEM_LIFE_SUPPORT, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Life Spt.&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(SYSTEM_SENSORS, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        SYSTEM_SENSORS, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Sensors&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(SYSTEM_COCKPIT, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        SYSTEM_COCKPIT, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Cockpit&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_SHOULDER, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_SHOULDER, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Shoulder&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_UPPER_ARM, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_UPPER_ARM, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Upper Arm&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_LOWER_ARM, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_LOWER_ARM, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Lower Arm&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_HAND, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_HAND, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Hand&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_HIP, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM, ACTUATOR_HIP,</b>
&nbsp;                        loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Hip&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_UPPER_LEG, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_UPPER_LEG, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Upper Leg&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_LOWER_LEG, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_LOWER_LEG, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Lower Leg&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (hasSystem(ACTUATOR_FOOT, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        ACTUATOR_FOOT, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Foot&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((getEntityType() &amp; ETYPE_QUADVEE) != 0</b>
<b class="nc">&nbsp;                &amp;&amp; hasSystem(QuadVee.SYSTEM_CONVERSION_GEAR, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        QuadVee.SYSTEM_CONVERSION_GEAR, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Conversion Gear&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((getEntityType() &amp; ETYPE_LAND_AIR_MECH) != 0</b>
<b class="nc">&nbsp;                &amp;&amp; hasSystem(LandAirMech.LAM_AVIONICS, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        LandAirMech.LAM_AVIONICS, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Avionics&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((getEntityType() &amp; ETYPE_LAND_AIR_MECH) != 0</b>
<b class="nc">&nbsp;                &amp;&amp; hasSystem(LandAirMech.LAM_LANDING_GEAR, loc)</b>
<b class="nc">&nbsp;                &amp;&amp; (getDamagedCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                        LandAirMech.LAM_LANDING_GEAR, loc) &gt; 0)) {
<b class="nc">&nbsp;            if (!first) {</b>
<b class="nc">&nbsp;                toReturn += &quot;, &quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            toReturn += &quot;Landing Gear&quot;;</b>
<b class="nc">&nbsp;            first = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        return toReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isCrippled() {
<b class="nc">&nbsp;        return isCrippled(false);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isCrippled(boolean checkCrew) {
<b class="nc">&nbsp;        if (countInternalDamagedLimbs() &gt;= 3) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: 3+ limbs have taken internals.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (countInternalDamagedTorsos() &gt;= 2) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: 2+ torsos have taken internals.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (isLocationBad(LOC_LT)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: Left Torso destroyed.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (isLocationBad(LOC_RT)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: Right Torso destroyed.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getEngineHits() &gt;= 2) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: 2 or more Engine Hits.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getEngineHits() == 1) &amp;&amp; (getGyroHits() == 1)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: Engine + Gyro hit.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getHitCriticals(CriticalSlot.TYPE_SYSTEM, SYSTEM_SENSORS, LOC_HEAD) &gt; 1) {</b>
&nbsp;            // If the cockpit isn&#39;t torso-mounted, we&#39;re done; if it is, we
&nbsp;            // need to look at the CT sensor slot as well.
<b class="nc">&nbsp;            if ((getCockpitType() != COCKPIT_TORSO_MOUNTED)</b>
<b class="nc">&nbsp;                    || (getHitCriticals(CriticalSlot.TYPE_SYSTEM,</b>
&nbsp;                            SYSTEM_SENSORS, LOC_CT) &gt; 0)) {
<b class="nc">&nbsp;                MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: Sensors destroyed.&quot;);</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getCrew() != null) &amp;&amp; (getCrew().getHits() &gt;= 4)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: Pilot has taken 4+ damage.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (isPermanentlyImmobilized(checkCrew)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: Immobilized.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
&nbsp;        // If this is not a military unit, we don&#39;t care about weapon status.
<b class="nc">&nbsp;        if (!isMilitary()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
&nbsp;        // no weapons can fire anymore, can cause no more than 5 points of
&nbsp;        // combined weapons damage,
&nbsp;        // or has no weapons with range greater than 5 hexes
<b class="nc">&nbsp;        if (!hasViableWeapons()) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; CRIPPLED: has no more viable weapons.&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    private int countInternalDamagedTorsos() {
<b class="nc">&nbsp;        int count = 0;</b>
<b class="nc">&nbsp;        if ((getOInternal(LOC_CT) &gt; getInternal(LOC_CT))</b>
<b class="nc">&nbsp;                &amp;&amp; (getArmor(LOC_CT) &lt; 1)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((getOInternal(LOC_LT) &gt; getInternal(LOC_LT))</b>
<b class="nc">&nbsp;                &amp;&amp; (getArmor(LOC_LT) &lt; 1)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((getOInternal(LOC_RT) &gt; getInternal(LOC_RT))</b>
<b class="nc">&nbsp;                &amp;&amp; (getArmor(LOC_RT) &lt; 1)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        return count;</b>
&nbsp;    }
&nbsp;
&nbsp;    private int countInternalDamagedLimbs() {
<b class="nc">&nbsp;        int count = 0;</b>
<b class="nc">&nbsp;        if (getOInternal(LOC_RLEG) &gt; getInternal(LOC_RLEG)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getOInternal(LOC_LLEG) &gt; getInternal(LOC_LLEG)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getOInternal(LOC_LARM) &gt; getInternal(LOC_LARM)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getOInternal(LOC_RARM) &gt; getInternal(LOC_RARM)) {</b>
<b class="nc">&nbsp;            count++;</b>
&nbsp;        }
<b class="nc">&nbsp;        return count;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean canEscape() {
<b class="nc">&nbsp;        int hipHits = 0;</b>
<b class="nc">&nbsp;        int legsDestroyed = 0;</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; locations(); i++) {</b>
<b class="nc">&nbsp;            if (locationIsLeg(i)) {</b>
<b class="nc">&nbsp;                if (!isLocationBad(i)) {</b>
<b class="nc">&nbsp;                    if (legHasHipCrit(i)) {</b>
<b class="nc">&nbsp;                        hipHits++;</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    legsDestroyed++;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;        //there is room for debate here but I think most people would agree that a
&nbsp;        //legged biped mech (and a double legged quad mech) or a hipped mech are not
&nbsp;        //escapable, although technically they still have as much MP as foot infantry which
&nbsp;        //can escape. We could also consider creating options to control this.
<b class="nc">&nbsp;        if(((this instanceof BipedMech) &amp;&amp; (legsDestroyed &gt; 0))</b>
&nbsp;                || (legsDestroyed &gt; 1) || (hipHits &gt; 0)) {
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        return super.canEscape();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isPermanentlyImmobilized(boolean checkCrew) {
&nbsp;        // First check for conditions that would permanently immobilize *any*
&nbsp;        // entity; if we find any, we&#39;re already done.
<b class="nc">&nbsp;        if (super.isPermanentlyImmobilized(checkCrew)) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;        // If we&#39;re prone and base walking MP -- adjusted for gravity and
&nbsp;        // modular armor since they&#39;re reasonably permanent but ignoring heat
&nbsp;        // effects -- have dropped to 0, we&#39;re stuck even if we still have
&nbsp;        // jump jets because we can&#39;t get up anymore to *use* them.
<b class="nc">&nbsp;        if ((getWalkMP(true, true, false) &lt;= 0) &amp;&amp; isProne()) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;        // Gyro destroyed? TW p. 258 at least heavily implies that that counts
&nbsp;        // as being immobilized as well, which makes sense because the &#39;Mech
&nbsp;        // certainly isn&#39;t leaving that hex under its own power anymore.
<b class="nc">&nbsp;        int hitsToDestroyGyro = (gyroType == GYRO_HEAVY_DUTY) ? 3 : 2;</b>
<b class="nc">&nbsp;        if (getGyroHits() &gt;= hitsToDestroyGyro) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isDmgHeavy() {
<b class="nc">&nbsp;        if (((double) getArmor(LOC_HEAD) / getOArmor(LOC_HEAD)) &lt;= 0.33) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Less than 1/3 head armor remaining&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getArmorRemainingPercent() &lt;= 0.25) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Less than 25% armor remaining&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (countInternalDamagedLimbs() == 2) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Two limbs with internal damage&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (countInternalDamagedTorsos() == 1) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Torso internal damage&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getEngineHits() == 1) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Engine hit&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getGyroHits() == 1) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Gyro hit&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getCrew() != null) &amp;&amp; (getCrew().getHits() == 3)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; Three crew hits&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
&nbsp;        // If this is not a military unit, we don&#39;t care about weapon status.
<b class="nc">&nbsp;        if (!isMilitary()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int totalWeapons = getTotalWeaponList().size();</b>
<b class="nc">&nbsp;        int totalInoperable = 0;</b>
<b class="nc">&nbsp;        for (Mounted weap : getTotalWeaponList()) {</b>
<b class="nc">&nbsp;            if (weap.isCrippled()) {</b>
<b class="nc">&nbsp;                totalInoperable++;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (((double) totalInoperable / totalWeapons) &gt;= 0.75) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; HEAVY DAMAGE: Less than 25% weapons operable&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isDmgModerate() {
<b class="nc">&nbsp;        if (((double) getArmor(LOC_HEAD) / getOArmor(LOC_HEAD)) &lt;= 0.67) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; MODERATE DAMAGE: Less than 2/3 head armor&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getArmorRemainingPercent() &lt;= 0.5) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; MODERATE DAMAGE: Less than 50% armor&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (countInternalDamagedLimbs() == 1) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; MODERATE DAMAGE: Limb with internal damage&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getCrew() != null) &amp;&amp; (getCrew().getHits() == 2)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; MODERATE DAMAGE: 2 crew hits&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
&nbsp;        // If this is not a military unit, we don&#39;t care about weapon status.
<b class="nc">&nbsp;        if (!isMilitary()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int totalWeapons = getTotalWeaponList().size();</b>
<b class="nc">&nbsp;        int totalInoperable = 0;</b>
<b class="nc">&nbsp;        for (Mounted weap : getTotalWeaponList()) {</b>
<b class="nc">&nbsp;            if (weap.isCrippled()) {</b>
<b class="nc">&nbsp;                totalInoperable++;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        if (((double) totalInoperable / totalWeapons) &gt;= 0.5) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; MODERATE DAMAGE: Less than 50% weapons operable&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isDmgLight() {
<b class="nc">&nbsp;        if (getArmor(LOC_HEAD) &lt; getOArmor(LOC_HEAD)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; LIGHT DAMAGE: head armor damaged&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (getArmorRemainingPercent() &lt;= 0.75) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; LIGHT DAMAGE: less than 75% armor remaining&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((getCrew() != null) &amp;&amp; (getCrew().getHits() == 1)) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; LIGHT DAMAGE: crew hit&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
&nbsp;        // If this is not a military unit, we don&#39;t care about weapon status.
<b class="nc">&nbsp;        if (!isMilitary()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int totalWeapons = getTotalWeaponList().size();</b>
<b class="nc">&nbsp;        int totalInoperable = 0;</b>
<b class="nc">&nbsp;        for (Mounted weap : getTotalWeaponList()) {</b>
<b class="nc">&nbsp;            if (weap.isCrippled()) {</b>
<b class="nc">&nbsp;                totalInoperable++;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        if (((double) totalInoperable / totalWeapons) &gt;= 0.5) {</b>
<b class="nc">&nbsp;            MegaMek.getLogger().debug(getDisplayName() + &quot; LIGHT DAMAGE: Less than 75% weapons operable&quot;);</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasCompactHeatSinks() {
<b class="nc">&nbsp;        for (Mounted mounted : getMisc()) {</b>
<b class="nc">&nbsp;            if (mounted.getType().hasFlag(MiscType.F_COMPACT_HEAT_SINK)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Report the location as destroyed if blown off in a previous phase, doomed
&nbsp;     * if blown off in this one.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getInternal(int loc) {
<b class="fc">&nbsp;        if (isLocationBlownOff(loc)) {</b>
<b class="nc">&nbsp;            return isLocationBlownOffThisPhase(loc) ? IArmorState.ARMOR_DOOMED</b>
<b class="nc">&nbsp;                    : IArmorState.ARMOR_DESTROYED;</b>
&nbsp;        }
<b class="fc">&nbsp;        return super.getInternal(loc);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isSuperHeavy() {
<b class="fc">&nbsp;        return weight &gt; 100;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public long getEntityType() {
<b class="nc">&nbsp;        return Entity.ETYPE_MECH;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isEjectionPossible() {
<b class="nc">&nbsp;        return (getCockpitType() != Mech.COCKPIT_TORSO_MOUNTED)</b>
<b class="nc">&nbsp;                &amp;&amp; getCrew().isActive() &amp;&amp; !hasQuirk(OptionsConstants.QUIRK_NEG_NO_EJECT);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Check to see if a mech has a claw in one of its arms
&nbsp;     *
&nbsp;     * @param location
&nbsp;     *            (LOC_RARM or LOC_LARM)
&nbsp;     * @return True/False
&nbsp;     */
&nbsp;    public boolean hasClaw(int location) {
&nbsp;        // only arms have claws.
<b class="nc">&nbsp;        if ((location != Mech.LOC_RARM) &amp;&amp; (location != Mech.LOC_LARM)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        for (int slot = 0; slot &lt; this.getNumberOfCriticals(location); slot++) {</b>
<b class="nc">&nbsp;            CriticalSlot cs = getCritical(location, slot);</b>
&nbsp;
<b class="nc">&nbsp;            if (cs == null) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (cs.getType() != CriticalSlot.TYPE_EQUIPMENT) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;            Mounted m = cs.getMount();</b>
<b class="nc">&nbsp;            EquipmentType type = m.getType();</b>
<b class="nc">&nbsp;            if ((type instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; type.hasFlag(MiscType.F_HAND_WEAPON)</b>
<b class="nc">&nbsp;                    &amp;&amp; type.hasSubType(MiscType.S_CLAW)) {</b>
<b class="nc">&nbsp;                return !(m.isDestroyed() || m.isMissing() || m.isBreached());</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Check whether a mech has intact heat-dissipating armor in every location
&nbsp;     * thus protecting it from external heat sources like fires or magma
&nbsp;     *
&nbsp;     * @return True/False
&nbsp;     */
&nbsp;    public boolean hasIntactHeatDissipatingArmor() {
<b class="nc">&nbsp;        for (int loc = 0; loc &lt; locations(); ++loc) {</b>
<b class="nc">&nbsp;            if ((getArmor(loc) &lt; 1)</b>
<b class="nc">&nbsp;                || (getArmorType(loc) != EquipmentType.T_ARMOR_HEAT_DISSIPATING)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * return if a RISC emergency coolant failed its roll
&nbsp;     * @param vDesc
&nbsp;     * @param vCriticals
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean doRISCEmergencyCoolantCheckFor(Vector&lt;Report&gt; vDesc,
&nbsp;            HashMap&lt;Integer, List&lt;CriticalSlot&gt;&gt; vCriticals) {
<b class="nc">&nbsp;        Mounted coolantSystem = null;</b>
<b class="nc">&nbsp;        for (Mounted misc : getMisc()) {</b>
<b class="nc">&nbsp;            if (misc.getType().hasFlag(MiscType.F_EMERGENCY_COOLANT_SYSTEM)</b>
<b class="nc">&nbsp;                    &amp;&amp; !misc.isInoperable()) {</b>
<b class="nc">&nbsp;                coolantSystem = misc;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (coolantSystem != null) {</b>
<b class="nc">&nbsp;            boolean bFailure = false;</b>
<b class="nc">&nbsp;            int nRoll = Compute.d6(2);</b>
<b class="nc">&nbsp;            bUsedCoolantSystem = true;</b>
<b class="nc">&nbsp;            Report r = new Report(2365);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.addDesc(this);</b>
<b class="nc">&nbsp;            r.add(coolantSystem.getName());</b>
<b class="nc">&nbsp;            vDesc.addElement(r);</b>
<b class="nc">&nbsp;            r = new Report(2370);</b>
<b class="nc">&nbsp;            r.subject = getId();</b>
<b class="nc">&nbsp;            r.indent();</b>
<b class="nc">&nbsp;            r.add(EMERGENCY_COOLANT_SYSTEM_FAILURE[nCoolantSystemLevel]);</b>
<b class="nc">&nbsp;            r.add(nRoll);</b>
&nbsp;
<b class="nc">&nbsp;            if (nRoll &lt; EMERGENCY_COOLANT_SYSTEM_FAILURE[nCoolantSystemLevel]) {</b>
&nbsp;                // uh oh
<b class="nc">&nbsp;                bFailure = true;</b>
<b class="nc">&nbsp;                r.choose(false);</b>
<b class="nc">&nbsp;                vDesc.addElement(r);</b>
&nbsp;                // do the damage.
&nbsp;                // hit and auto crit to first engine crit in this location,
&nbsp;                // or the transfer location, if there&#39;s no hittable engine slot
&nbsp;                // in this location
<b class="nc">&nbsp;                coolantSystem.setHit(true);</b>
<b class="nc">&nbsp;                bDamagedCoolantSystem = true;</b>
<b class="nc">&nbsp;                int loc = coolantSystem.getLocation();</b>
<b class="nc">&nbsp;                boolean found = false;</b>
<b class="nc">&nbsp;                for (int i = 0; i &lt; getNumberOfCriticals(loc); i++) {</b>
<b class="nc">&nbsp;                    CriticalSlot crit = getCritical(loc, i);</b>
<b class="nc">&nbsp;                    if ((crit != null)</b>
<b class="nc">&nbsp;                        &amp;&amp; crit.isHittable()</b>
<b class="nc">&nbsp;                        &amp;&amp; (crit.getType() == CriticalSlot.TYPE_SYSTEM)</b>
<b class="nc">&nbsp;                        &amp;&amp; (crit.getIndex() == Mech.SYSTEM_ENGINE)) {</b>
<b class="nc">&nbsp;                        vCriticals.put(Integer.valueOf(loc),</b>
&nbsp;                                new LinkedList&lt;CriticalSlot&gt;());
<b class="nc">&nbsp;                        vCriticals.get(Integer.valueOf(loc)).add(crit);</b>
<b class="nc">&nbsp;                        found = true;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (!found) {</b>
<b class="nc">&nbsp;                    loc = this.getTransferLocation(loc);</b>
<b class="nc">&nbsp;                    for (int i = 0; i &lt; getNumberOfCriticals(loc); i++) {</b>
<b class="nc">&nbsp;                        CriticalSlot crit = getCritical(loc, i);</b>
<b class="nc">&nbsp;                        if ((crit != null)</b>
<b class="nc">&nbsp;                            &amp;&amp; crit.isHittable()</b>
<b class="nc">&nbsp;                            &amp;&amp; (crit.getType() == CriticalSlot.TYPE_SYSTEM)</b>
<b class="nc">&nbsp;                            &amp;&amp; (crit.getIndex() == Mech.SYSTEM_ENGINE)) {</b>
<b class="nc">&nbsp;                            vCriticals.put(Integer.valueOf(loc),</b>
&nbsp;                                    new LinkedList&lt;CriticalSlot&gt;());
<b class="nc">&nbsp;                            vCriticals.get(Integer.valueOf(loc)).add(crit);</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                r.choose(true);</b>
<b class="nc">&nbsp;                vDesc.addElement(r);</b>
<b class="nc">&nbsp;                nCoolantSystemMOS = nRoll - EMERGENCY_COOLANT_SYSTEM_FAILURE[nCoolantSystemLevel];</b>
&nbsp;            }
<b class="nc">&nbsp;            return bFailure;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasDamagedCoolantSystem() {
<b class="nc">&nbsp;        return bDamagedCoolantSystem;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setHasDamagedCoolantSystem(boolean hit) {
<b class="nc">&nbsp;        bDamagedCoolantSystem = hit;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getCoolantSystemMOS() {
<b class="nc">&nbsp;        return nCoolantSystemMOS;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isCoolingFlawActive() {
<b class="nc">&nbsp;        return coolingFlawActive;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setCoolingFlawActive(boolean flawActive) {
<b class="nc">&nbsp;        coolingFlawActive = flawActive;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Used to determine the draw priority of different Entity subclasses.
&nbsp;     * This allows different unit types to always be draw above/below other
&nbsp;     * types.
&nbsp;     *
&nbsp;     * @return
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int getSpriteDrawPriority() {
<b class="nc">&nbsp;        return 6;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-04-13 20:46</div>
</div>
</body>
</html>
